import{j as e,L as t,T as s,C as r,R as a,S as n,P as i,c as l,u as o,a as c,b as d,d as m,e as u,O as h,f as p,g as f,h as x,D as g,i as v,k as y,l as w,m as j,n as b,o as N,p as k,I as C,q as S,r as E,s as A,t as T,v as R,w as I,x as O,y as P,W as _,z as F,A as M,B,E as L,F as U,G as z,H as D,J as W,K as $,M as V,N as K,Q as H,U as q,V as G,X as J,Y,Z as X,_ as Z,$ as Q,a0 as ee,a1 as te,a2 as se,a3 as re,a4 as ae,a5 as ne,a6 as ie,a7 as le,a8 as oe}from"./ui-ckm1Jskl.js";import{b as ce,r as de}from"./vendor-D4ZTmUwZ.js";import{n as me,g as ue,v as he,m as pe}from"./crypto-DOzwkbBQ.js";var fe;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var xe=ce;fe=xe.createRoot,xe.hydrateRoot;for(var ge={},ve={byteLength:function(e){var t=ke(e),s=t[0],r=t[1];return 3*(s+r)/4-r},toByteArray:function(e){var t,s,r=ke(e),a=r[0],n=r[1],i=new je(function(e,t,s){return 3*(t+s)/4-s}(0,a,n)),l=0,o=n>0?a-4:a;for(s=0;s<o;s+=4)t=we[e.charCodeAt(s)]<<18|we[e.charCodeAt(s+1)]<<12|we[e.charCodeAt(s+2)]<<6|we[e.charCodeAt(s+3)],i[l++]=t>>16&255,i[l++]=t>>8&255,i[l++]=255&t;2===n&&(t=we[e.charCodeAt(s)]<<2|we[e.charCodeAt(s+1)]>>4,i[l++]=255&t);1===n&&(t=we[e.charCodeAt(s)]<<10|we[e.charCodeAt(s+1)]<<4|we[e.charCodeAt(s+2)]>>2,i[l++]=t>>8&255,i[l++]=255&t);return i},fromByteArray:function(e){for(var t,s=e.length,r=s%3,a=[],n=16383,i=0,l=s-r;i<l;i+=n)a.push(Se(e,i,i+n>l?l:i+n));1===r?(t=e[s-1],a.push(ye[t>>2]+ye[t<<4&63]+"==")):2===r&&(t=(e[s-2]<<8)+e[s-1],a.push(ye[t>>10]+ye[t>>4&63]+ye[t<<2&63]+"="));return a.join("")}},ye=[],we=[],je="undefined"!=typeof Uint8Array?Uint8Array:Array,be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ne=0;Ne<64;++Ne)ye[Ne]=be[Ne],we[be.charCodeAt(Ne)]=Ne;function ke(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.indexOf("=");return-1===s&&(s=t),[s,s===t?0:4-s%4]}function Ce(e){return ye[e>>18&63]+ye[e>>12&63]+ye[e>>6&63]+ye[63&e]}function Se(e,t,s){for(var r,a=[],n=t;n<s;n+=3)r=(e[n]<<16&16711680)+(e[n+1]<<8&65280)+(255&e[n+2]),a.push(Ce(r));return a.join("")}we["-".charCodeAt(0)]=62,we["_".charCodeAt(0)]=63;var Ee={};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Ae(e){var t,s,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=Ae(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}Ee.read=function(e,t,s,r,a){var n,i,l=8*a-r-1,o=(1<<l)-1,c=o>>1,d=-7,m=s?a-1:0,u=s?-1:1,h=e[t+m];for(m+=u,n=h&(1<<-d)-1,h>>=-d,d+=l;d>0;n=256*n+e[t+m],m+=u,d-=8);for(i=n&(1<<-d)-1,n>>=-d,d+=r;d>0;i=256*i+e[t+m],m+=u,d-=8);if(0===n)n=1-c;else{if(n===o)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,r),n-=c}return(h?-1:1)*i*Math.pow(2,n-r)},Ee.write=function(e,t,s,r,a,n){var i,l,o,c=8*n-a-1,d=(1<<c)-1,m=d>>1,u=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:n-1,p=r?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,i=d):(i=Math.floor(Math.log(t)/Math.LN2),t*(o=Math.pow(2,-i))<1&&(i--,o*=2),(t+=i+m>=1?u/o:u*Math.pow(2,1-m))*o>=2&&(i++,o/=2),i+m>=d?(l=0,i=d):i+m>=1?(l=(t*o-1)*Math.pow(2,a),i+=m):(l=t*Math.pow(2,m-1)*Math.pow(2,a),i=0));a>=8;e[s+h]=255&l,h+=p,l/=256,a-=8);for(i=i<<a|l,c+=a;c>0;e[s+h]=255&i,h+=p,i/=256,c-=8);e[s+h-p]|=128*f},
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
function(e){const t=ve,s=Ee,r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=i,e.SlowBuffer=function(e){+e!=e&&(e=0);return i.alloc(+e)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function n(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,i.prototype),t}function i(e,t,s){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,s)}function l(e,t,s){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!i.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const s=0|h(e,t);let r=n(s);const a=r.write(e,t);a!==s&&(r=r.slice(0,a));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(q(e,Uint8Array)){const t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer))return m(e,t,s);if("undefined"!=typeof SharedArrayBuffer&&(q(e,SharedArrayBuffer)||e&&q(e.buffer,SharedArrayBuffer)))return m(e,t,s);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return i.from(r,t,s);const a=function(e){if(i.isBuffer(e)){const t=0|u(e.length),s=n(t);return 0===s.length||e.copy(s,0,0,t),s}if(void 0!==e.length)return"number"!=typeof e.length||G(e.length)?n(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),t,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return o(e),n(e<0?0:0|u(e))}function d(e){const t=e.length<0?0:0|u(e.length),s=n(t);for(let r=0;r<t;r+=1)s[r]=255&e[r];return s}function m(e,t,s){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(s||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===s?new Uint8Array(e):void 0===s?new Uint8Array(e,t):new Uint8Array(e,t,s),Object.setPrototypeOf(r,i.prototype),r}function u(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function h(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const s=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===s)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return K(e).length;default:if(a)return r?-1:V(e).length;t=(""+t).toLowerCase(),a=!0}}function p(e,t,s){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===s||s>this.length)&&(s=this.length),s<=0)return"";if((s>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,s);case"utf8":case"utf-8":return k(this,t,s);case"ascii":return S(this,t,s);case"latin1":case"binary":return E(this,t,s);case"base64":return N(this,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,s);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function f(e,t,s){const r=e[t];e[t]=e[s],e[s]=r}function x(e,t,s,r,a){if(0===e.length)return-1;if("string"==typeof s?(r=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),G(s=+s)&&(s=a?0:e.length-1),s<0&&(s=e.length+s),s>=e.length){if(a)return-1;s=e.length-1}else if(s<0){if(!a)return-1;s=0}if("string"==typeof t&&(t=i.from(t,r)),i.isBuffer(t))return 0===t.length?-1:g(e,t,s,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,s):Uint8Array.prototype.lastIndexOf.call(e,t,s):g(e,[t],s,r,a);throw new TypeError("val must be string, number or Buffer")}function g(e,t,s,r,a){let n,i=1,l=e.length,o=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,l/=2,o/=2,s/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a){let r=-1;for(n=s;n<l;n++)if(c(e,n)===c(t,-1===r?0:n-r)){if(-1===r&&(r=n),n-r+1===o)return r*i}else-1!==r&&(n-=n-r),r=-1}else for(s+o>l&&(s=l-o),n=s;n>=0;n--){let s=!0;for(let r=0;r<o;r++)if(c(e,n+r)!==c(t,r)){s=!1;break}if(s)return n}return-1}function v(e,t,s,r){s=Number(s)||0;const a=e.length-s;r?(r=Number(r))>a&&(r=a):r=a;const n=t.length;let i;for(r>n/2&&(r=n/2),i=0;i<r;++i){const r=parseInt(t.substr(2*i,2),16);if(G(r))return i;e[s+i]=r}return i}function y(e,t,s,r){return H(V(t,e.length-s),e,s,r)}function w(e,t,s,r){return H(function(e){const t=[];for(let s=0;s<e.length;++s)t.push(255&e.charCodeAt(s));return t}(t),e,s,r)}function j(e,t,s,r){return H(K(t),e,s,r)}function b(e,t,s,r){return H(function(e,t){let s,r,a;const n=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)s=e.charCodeAt(i),r=s>>8,a=s%256,n.push(a),n.push(r);return n}(t,e.length-s),e,s,r)}function N(e,s,r){return 0===s&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(s,r))}function k(e,t,s){s=Math.min(e.length,s);const r=[];let a=t;for(;a<s;){const t=e[a];let n=null,i=t>239?4:t>223?3:t>191?2:1;if(a+i<=s){let s,r,l,o;switch(i){case 1:t<128&&(n=t);break;case 2:s=e[a+1],128==(192&s)&&(o=(31&t)<<6|63&s,o>127&&(n=o));break;case 3:s=e[a+1],r=e[a+2],128==(192&s)&&128==(192&r)&&(o=(15&t)<<12|(63&s)<<6|63&r,o>2047&&(o<55296||o>57343)&&(n=o));break;case 4:s=e[a+1],r=e[a+2],l=e[a+3],128==(192&s)&&128==(192&r)&&128==(192&l)&&(o=(15&t)<<18|(63&s)<<12|(63&r)<<6|63&l,o>65535&&o<1114112&&(n=o))}}null===n?(n=65533,i=1):n>65535&&(n-=65536,r.push(n>>>10&1023|55296),n=56320|1023&n),r.push(n),a+=i}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let s="",r=0;for(;r<t;)s+=String.fromCharCode.apply(String,e.slice(r,r+=C));return s}(r)}e.kMaxLength=a,i.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(e,t,s){return l(e,t,s)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(e,t,s){return function(e,t,s){return o(e),e<=0?n(e):void 0!==t?"string"==typeof s?n(e).fill(t,s):n(e).fill(t):n(e)}(e,t,s)},i.allocUnsafe=function(e){return c(e)},i.allocUnsafeSlow=function(e){return c(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(q(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let s=e.length,r=t.length;for(let a=0,n=Math.min(s,r);a<n;++a)if(e[a]!==t[a]){s=e[a],r=t[a];break}return s<r?-1:r<s?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);let s;if(void 0===t)for(t=0,s=0;s<e.length;++s)t+=e[s].length;const r=i.allocUnsafe(t);let a=0;for(s=0;s<e.length;++s){let t=e[s];if(q(t,Uint8Array))a+t.length>r.length?(i.isBuffer(t)||(t=i.from(t)),t.copy(r,a)):Uint8Array.prototype.set.call(r,t,a);else{if(!i.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,a)}a+=t.length}return r},i.byteLength=h,i.prototype._isBuffer=!0,i.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)f(this,t,t+1);return this},i.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},i.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},i.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):p.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){let t="";const s=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(t+=" ... "),"<Buffer "+t+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(e,t,s,r,a){if(q(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===s&&(s=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||s>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=s)return 0;if(r>=a)return-1;if(t>=s)return 1;if(this===e)return 0;let n=(a>>>=0)-(r>>>=0),l=(s>>>=0)-(t>>>=0);const o=Math.min(n,l),c=this.slice(r,a),d=e.slice(t,s);for(let i=0;i<o;++i)if(c[i]!==d[i]){n=c[i],l=d[i];break}return n<l?-1:l<n?1:0},i.prototype.includes=function(e,t,s){return-1!==this.indexOf(e,t,s)},i.prototype.indexOf=function(e,t,s){return x(this,e,t,s,!0)},i.prototype.lastIndexOf=function(e,t,s){return x(this,e,t,s,!1)},i.prototype.write=function(e,t,s,r){if(void 0===t)r="utf8",s=this.length,t=0;else if(void 0===s&&"string"==typeof t)r=t,s=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(s)?(s>>>=0,void 0===r&&(r="utf8")):(r=s,s=void 0)}const a=this.length-t;if((void 0===s||s>a)&&(s=a),e.length>0&&(s<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let n=!1;for(;;)switch(r){case"hex":return v(this,e,t,s);case"utf8":case"utf-8":return y(this,e,t,s);case"ascii":case"latin1":case"binary":return w(this,e,t,s);case"base64":return j(this,e,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,s);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),n=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function S(e,t,s){let r="";s=Math.min(e.length,s);for(let a=t;a<s;++a)r+=String.fromCharCode(127&e[a]);return r}function E(e,t,s){let r="";s=Math.min(e.length,s);for(let a=t;a<s;++a)r+=String.fromCharCode(e[a]);return r}function A(e,t,s){const r=e.length;(!t||t<0)&&(t=0),(!s||s<0||s>r)&&(s=r);let a="";for(let n=t;n<s;++n)a+=J[e[n]];return a}function T(e,t,s){const r=e.slice(t,s);let a="";for(let n=0;n<r.length-1;n+=2)a+=String.fromCharCode(r[n]+256*r[n+1]);return a}function R(e,t,s){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>s)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,s,r,a,n){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<n)throw new RangeError('"value" argument is out of bounds');if(s+r>e.length)throw new RangeError("Index out of range")}function O(e,t,s,r,a){z(t,r,a,e,s,7);let n=Number(t&BigInt(4294967295));e[s++]=n,n>>=8,e[s++]=n,n>>=8,e[s++]=n,n>>=8,e[s++]=n;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[s++]=i,i>>=8,e[s++]=i,i>>=8,e[s++]=i,i>>=8,e[s++]=i,s}function P(e,t,s,r,a){z(t,r,a,e,s,7);let n=Number(t&BigInt(4294967295));e[s+7]=n,n>>=8,e[s+6]=n,n>>=8,e[s+5]=n,n>>=8,e[s+4]=n;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[s+3]=i,i>>=8,e[s+2]=i,i>>=8,e[s+1]=i,i>>=8,e[s]=i,s+8}function _(e,t,s,r,a,n){if(s+r>e.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function F(e,t,r,a,n){return t=+t,r>>>=0,n||_(e,0,r,4),s.write(e,t,r,a,23,4),r+4}function M(e,t,r,a,n){return t=+t,r>>>=0,n||_(e,0,r,8),s.write(e,t,r,a,52,8),r+8}i.prototype.slice=function(e,t){const s=this.length;(e=~~e)<0?(e+=s)<0&&(e=0):e>s&&(e=s),(t=void 0===t?s:~~t)<0?(t+=s)<0&&(t=0):t>s&&(t=s),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,i.prototype),r},i.prototype.readUintLE=i.prototype.readUIntLE=function(e,t,s){e>>>=0,t>>>=0,s||R(e,t,this.length);let r=this[e],a=1,n=0;for(;++n<t&&(a*=256);)r+=this[e+n]*a;return r},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,t,s){e>>>=0,t>>>=0,s||R(e,t,this.length);let r=this[e+--t],a=1;for(;t>0&&(a*=256);)r+=this[e+--t]*a;return r},i.prototype.readUint8=i.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readBigUInt64LE=Y(function(e){D(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||W(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,a=this[++e]+256*this[++e]+65536*this[++e]+s*2**24;return BigInt(r)+(BigInt(a)<<BigInt(32))}),i.prototype.readBigUInt64BE=Y(function(e){D(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||W(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],a=this[++e]*2**24+65536*this[++e]+256*this[++e]+s;return(BigInt(r)<<BigInt(32))+BigInt(a)}),i.prototype.readIntLE=function(e,t,s){e>>>=0,t>>>=0,s||R(e,t,this.length);let r=this[e],a=1,n=0;for(;++n<t&&(a*=256);)r+=this[e+n]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,s){e>>>=0,t>>>=0,s||R(e,t,this.length);let r=t,a=1,n=this[e+--r];for(;r>0&&(a*=256);)n+=this[e+--r]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*t)),n},i.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);const s=this[e]|this[e+1]<<8;return 32768&s?4294901760|s:s},i.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);const s=this[e+1]|this[e]<<8;return 32768&s?4294901760|s:s},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readBigInt64LE=Y(function(e){D(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||W(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(s<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),i.prototype.readBigInt64BE=Y(function(e){D(e>>>=0,"offset");const t=this[e],s=this[e+7];void 0!==t&&void 0!==s||W(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+s)}),i.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),s.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),s.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),s.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),s.read(this,e,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,t,s,r){if(e=+e,t>>>=0,s>>>=0,!r){I(this,e,t,s,Math.pow(2,8*s)-1,0)}let a=1,n=0;for(this[t]=255&e;++n<s&&(a*=256);)this[t+n]=e/a&255;return t+s},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,t,s,r){if(e=+e,t>>>=0,s>>>=0,!r){I(this,e,t,s,Math.pow(2,8*s)-1,0)}let a=s-1,n=1;for(this[t+a]=255&e;--a>=0&&(n*=256);)this[t+a]=e/n&255;return t+s},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,t,s){return e=+e,t>>>=0,s||I(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,t,s){return e=+e,t>>>=0,s||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,t,s){return e=+e,t>>>=0,s||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,t,s){return e=+e,t>>>=0,s||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,t,s){return e=+e,t>>>=0,s||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeBigUInt64LE=Y(function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=Y(function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(e,t,s,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*s-1);I(this,e,t,s,r-1,-r)}let a=0,n=1,i=0;for(this[t]=255&e;++a<s&&(n*=256);)e<0&&0===i&&0!==this[t+a-1]&&(i=1),this[t+a]=(e/n|0)-i&255;return t+s},i.prototype.writeIntBE=function(e,t,s,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*s-1);I(this,e,t,s,r-1,-r)}let a=s-1,n=1,i=0;for(this[t+a]=255&e;--a>=0&&(n*=256);)e<0&&0===i&&0!==this[t+a+1]&&(i=1),this[t+a]=(e/n|0)-i&255;return t+s},i.prototype.writeInt8=function(e,t,s){return e=+e,t>>>=0,s||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,s){return e=+e,t>>>=0,s||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,s){return e=+e,t>>>=0,s||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,s){return e=+e,t>>>=0,s||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,s){return e=+e,t>>>=0,s||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeBigInt64LE=Y(function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=Y(function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function(e,t,s){return F(this,e,t,!0,s)},i.prototype.writeFloatBE=function(e,t,s){return F(this,e,t,!1,s)},i.prototype.writeDoubleLE=function(e,t,s){return M(this,e,t,!0,s)},i.prototype.writeDoubleBE=function(e,t,s){return M(this,e,t,!1,s)},i.prototype.copy=function(e,t,s,r){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(s||(s=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<s&&(r=s),r===s)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-s&&(r=e.length-t+s);const a=r-s;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,s,r):Uint8Array.prototype.set.call(e,this.subarray(s,r),t),a},i.prototype.fill=function(e,t,s,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,s=this.length):"string"==typeof s&&(r=s,s=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<s)throw new RangeError("Out of range index");if(s<=t)return this;let a;if(t>>>=0,s=void 0===s?this.length:s>>>0,e||(e=0),"number"==typeof e)for(a=t;a<s;++a)this[a]=e;else{const n=i.isBuffer(e)?e:i.from(e,r),l=n.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<s-t;++a)this[a+t]=n[a%l]}return this};const B={};function L(e,t,s){B[e]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",s=e.length;const r="-"===e[0]?1:0;for(;s>=r+4;s-=3)t=`_${e.slice(s-3,s)}${t}`;return`${e.slice(0,s)}${t}`}function z(e,t,s,r,a,n){if(e>s||e<t){const s="bigint"==typeof t?"n":"";let r;throw r=0===t||t===BigInt(0)?`>= 0${s} and < 2${s} ** ${8*(n+1)}${s}`:`>= -(2${s} ** ${8*(n+1)-1}${s}) and < 2 ** ${8*(n+1)-1}${s}`,new B.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,s){D(t,"offset"),void 0!==e[t]&&void 0!==e[t+s]||W(t,e.length-(s+1))}(r,a,n)}function D(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,s){if(Math.floor(e)!==e)throw D(e,s),new B.ERR_OUT_OF_RANGE("offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}L("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),L("ERR_OUT_OF_RANGE",function(e,t,s){let r=`The value of "${e}" is out of range.`,a=s;return Number.isInteger(s)&&Math.abs(s)>2**32?a=U(String(s)):"bigint"==typeof s&&(a=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(a=U(a)),a+="n"),r+=` It must be ${t}. Received ${a}`,r},RangeError);const $=/[^+/0-9A-Za-z-_]/g;function V(e,t){let s;t=t||1/0;const r=e.length;let a=null;const n=[];for(let i=0;i<r;++i){if(s=e.charCodeAt(i),s>55295&&s<57344){if(!a){if(s>56319){(t-=3)>-1&&n.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&n.push(239,191,189);continue}a=s;continue}if(s<56320){(t-=3)>-1&&n.push(239,191,189),a=s;continue}s=65536+(a-55296<<10|s-56320)}else a&&(t-=3)>-1&&n.push(239,191,189);if(a=null,s<128){if((t-=1)<0)break;n.push(s)}else if(s<2048){if((t-=2)<0)break;n.push(s>>6|192,63&s|128)}else if(s<65536){if((t-=3)<0)break;n.push(s>>12|224,s>>6&63|128,63&s|128)}else{if(!(s<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;n.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}}return n}function K(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace($,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,s,r){let a;for(a=0;a<r&&!(a+s>=t.length||a>=e.length);++a)t[a+s]=e[a];return a}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let s=0;s<16;++s){const r=16*s;for(let a=0;a<16;++a)t[r+a]=e[s]+e[a]}return t}();function Y(e){return"undefined"==typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}}(ge),window.Buffer=ge.Buffer;const Te=e=>{const t=Pe(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),Re(s,t)||Oe(e)},getConflictingClassGroupIds:(e,t)=>{const a=s[e]||[];return t&&r[e]?[...a,...r[e]]:a}}},Re=(e,t)=>{var s;if(0===e.length)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),n=a?Re(e.slice(1),a):void 0;if(n)return n;if(0===t.validators.length)return;const i=e.join("-");return null==(s=t.validators.find(({validator:e})=>e(i)))?void 0:s.classGroupId},Ie=/^\[(.+)\]$/,Oe=e=>{if(Ie.test(e)){const t=Ie.exec(e)[1],s=null==t?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},Pe=e=>{const{theme:t,prefix:s}=e,r={nextPart:new Map,validators:[]};return Be(Object.entries(e.classGroups),s).forEach(([e,s])=>{_e(s,r,e,t)}),r},_e=(e,t,s,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Fe(t,e)).classGroupId=s)}if("function"==typeof e)return Me(e)?void _e(e(r),t,s,r):void t.validators.push({validator:e,classGroupId:s});Object.entries(e).forEach(([e,a])=>{_e(a,Fe(t,e),s,r)})})},Fe=(e,t)=>{let s=e;return t.split("-").forEach(e=>{s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s},Me=e=>e.isThemeGetter,Be=(e,t)=>t?e.map(([e,s])=>[e,s.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,s])=>[t+e,s])):e)]):e,Le=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,r=new Map;const a=(a,n)=>{s.set(a,n),t++,t>e&&(t=0,r=s,s=new Map)};return{get(e){let t=s.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(a(e,t),t):void 0},set(e,t){s.has(e)?s.set(e,t):a(e,t)}}},Ue=e=>{const{separator:t,experimentalParseClassName:s}=e,r=1===t.length,a=t[0],n=t.length,i=e=>{const s=[];let i,l=0,o=0;for(let m=0;m<e.length;m++){let c=e[m];if(0===l){if(c===a&&(r||e.slice(m,m+n)===t)){s.push(e.slice(o,m)),o=m+n;continue}if("/"===c){i=m;continue}}"["===c?l++:"]"===c&&l--}const c=0===s.length?e:e.substring(o),d=c.startsWith("!");return{modifiers:s,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>o?i-o:void 0}};return s?e=>s({className:e,parseClassName:i}):i},ze=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(e=>{"["===e[0]?(t.push(...s.sort(),e),s=[]):s.push(e)}),t.push(...s.sort()),t},De=/\s+/;function We(){let e,t,s=0,r="";for(;s<arguments.length;)(e=arguments[s++])&&(t=$e(e))&&(r&&(r+=" "),r+=t);return r}const $e=e=>{if("string"==typeof e)return e;let t,s="";for(let r=0;r<e.length;r++)e[r]&&(t=$e(e[r]))&&(s&&(s+=" "),s+=t);return s};function Ve(e,...t){let s,r,a,n=function(l){const o=t.reduce((e,t)=>t(e),e());return s=(e=>({cache:Le(e.cacheSize),parseClassName:Ue(e),...Te(e)}))(o),r=s.cache.get,a=s.cache.set,n=i,i(l)};function i(e){const t=r(e);if(t)return t;const n=((e,t)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:a}=t,n=[],i=e.trim().split(De);let l="";for(let o=i.length-1;o>=0;o-=1){const e=i[o],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:m}=s(e);let u=Boolean(m),h=r(u?d.substring(0,m):d);if(!h){if(!u){l=e+(l.length>0?" "+l:l);continue}if(h=r(d),!h){l=e+(l.length>0?" "+l:l);continue}u=!1}const p=ze(t).join(":"),f=c?p+"!":p,x=f+h;if(n.includes(x))continue;n.push(x);const g=a(h,u);for(let s=0;s<g.length;++s){const e=g[s];n.push(f+e)}l=e+(l.length>0?" "+l:l)}return l})(e,s);return a(e,n),n}return function(){return n(We.apply(null,arguments))}}const Ke=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},He=/^\[(?:([a-z-]+):)?(.+)\]$/i,qe=/^\d+\/\d+$/,Ge=new Set(["px","full","screen"]),Je=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ye=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Xe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ze=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Qe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,et=e=>st(e)||Ge.has(e)||qe.test(e),tt=e=>ft(e,"length",xt),st=e=>Boolean(e)&&!Number.isNaN(Number(e)),rt=e=>ft(e,"number",st),at=e=>Boolean(e)&&Number.isInteger(Number(e)),nt=e=>e.endsWith("%")&&st(e.slice(0,-1)),it=e=>He.test(e),lt=e=>Je.test(e),ot=new Set(["length","size","percentage"]),ct=e=>ft(e,ot,gt),dt=e=>ft(e,"position",gt),mt=new Set(["image","url"]),ut=e=>ft(e,mt,yt),ht=e=>ft(e,"",vt),pt=()=>!0,ft=(e,t,s)=>{const r=He.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):s(r[2]))},xt=e=>Ye.test(e)&&!Xe.test(e),gt=()=>!1,vt=e=>Ze.test(e),yt=e=>Qe.test(e),wt=Ve(()=>{const e=Ke("colors"),t=Ke("spacing"),s=Ke("blur"),r=Ke("brightness"),a=Ke("borderColor"),n=Ke("borderRadius"),i=Ke("borderSpacing"),l=Ke("borderWidth"),o=Ke("contrast"),c=Ke("grayscale"),d=Ke("hueRotate"),m=Ke("invert"),u=Ke("gap"),h=Ke("gradientColorStops"),p=Ke("gradientColorStopPositions"),f=Ke("inset"),x=Ke("margin"),g=Ke("opacity"),v=Ke("padding"),y=Ke("saturate"),w=Ke("scale"),j=Ke("sepia"),b=Ke("skew"),N=Ke("space"),k=Ke("translate"),C=()=>["auto",it,t],S=()=>[it,t],E=()=>["",et,tt],A=()=>["auto",st,it],T=()=>["","0",it],R=()=>[st,it];return{cacheSize:500,separator:":",theme:{colors:[pt],spacing:[et,tt],blur:["none","",lt,it],brightness:R(),borderColor:[e],borderRadius:["none","","full",lt,it],borderSpacing:S(),borderWidth:E(),contrast:R(),grayscale:T(),hueRotate:R(),invert:T(),gap:S(),gradientColorStops:[e],gradientColorStopPositions:[nt,tt],inset:C(),margin:C(),opacity:R(),padding:S(),saturate:R(),scale:R(),sepia:T(),skew:R(),space:S(),translate:S()},classGroups:{aspect:[{aspect:["auto","square","video",it]}],container:["container"],columns:[{columns:[lt]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",it]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",at,it]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",it]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",at,it]}],"grid-cols":[{"grid-cols":[pt]}],"col-start-end":[{col:["auto",{span:["full",at,it]},it]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[pt]}],"row-start-end":[{row:["auto",{span:[at,it]},it]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",it]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",it]}],gap:[{gap:[u]}],"gap-x":[{"gap-x":[u]}],"gap-y":[{"gap-y":[u]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",it,t]}],"min-w":[{"min-w":[it,t,"min","max","fit"]}],"max-w":[{"max-w":[it,t,"none","full","min","max","fit","prose",{screen:[lt]},lt]}],h:[{h:[it,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[it,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[it,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[it,t,"auto","min","max","fit"]}],"font-size":[{text:["base",lt,tt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rt]}],"font-family":[{font:[pt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",it]}],"line-clamp":[{"line-clamp":["none",st,rt]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",et,it]}],"list-image":[{"list-image":["none",it]}],"list-style-type":[{list:["none","disc","decimal",it]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",et,tt]}],"underline-offset":[{"underline-offset":["auto",et,it]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",it]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",it]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",dt]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ct]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ut]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[n]}],"rounded-s":[{"rounded-s":[n]}],"rounded-e":[{"rounded-e":[n]}],"rounded-t":[{"rounded-t":[n]}],"rounded-r":[{"rounded-r":[n]}],"rounded-b":[{"rounded-b":[n]}],"rounded-l":[{"rounded-l":[n]}],"rounded-ss":[{"rounded-ss":[n]}],"rounded-se":[{"rounded-se":[n]}],"rounded-ee":[{"rounded-ee":[n]}],"rounded-es":[{"rounded-es":[n]}],"rounded-tl":[{"rounded-tl":[n]}],"rounded-tr":[{"rounded-tr":[n]}],"rounded-br":[{"rounded-br":[n]}],"rounded-bl":[{"rounded-bl":[n]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[et,it]}],"outline-w":[{outline:[et,tt]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[et,tt]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",lt,ht]}],"shadow-color":[{shadow:[pt]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[o]}],"drop-shadow":[{"drop-shadow":["","none",lt,it]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[y]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[o]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",it]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",it]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",it]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[at,it]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[b]}],"skew-y":[{"skew-y":[b]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",it]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",it]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",it]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[et,tt,rt]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function jt(...e){return wt(function(){for(var e,t,s=0,r="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=Ae(e))&&(r&&(r+=" "),r+=t);return r}(e))}const bt=de.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:jt("rounded-xl border bg-card text-card-foreground shadow",t),...s}));bt.displayName="Card";const Nt=de.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:jt("flex flex-col space-y-1.5 p-6",t),...s}));Nt.displayName="CardHeader";const kt=de.forwardRef(({className:t,...s},r)=>e.jsx("h3",{ref:r,className:jt("font-semibold leading-none tracking-tight",t),...s}));kt.displayName="CardTitle";de.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:jt("text-sm text-muted-foreground",t),...s})).displayName="CardDescription";const Ct=de.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:jt("p-6 pt-0",t),...s}));Ct.displayName="CardContent";de.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:jt("flex items-center p-6 pt-0",t),...s})).displayName="CardFooter";const St=a,Et=de.forwardRef(({className:s,...r},a)=>e.jsx(t,{ref:a,className:jt("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...r}));Et.displayName=t.displayName;const At=de.forwardRef(({className:t,...r},a)=>e.jsx(s,{ref:a,className:jt("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...r}));At.displayName=s.displayName;const Tt=de.forwardRef(({className:t,...s},a)=>e.jsx(r,{ref:a,className:jt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));function Rt(e){var t,s,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(s=Rt(e[t]))&&(r&&(r+=" "),r+=s);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}Tt.displayName=r.displayName;const It=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,Ot=function(){for(var e,t,s=0,r="";s<arguments.length;)(e=arguments[s++])&&(t=Rt(e))&&(r&&(r+=" "),r+=t);return r},Pt=(e,t)=>s=>{var r;if(null==(null==t?void 0:t.variants))return Ot(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:a,defaultVariants:n}=t,i=Object.keys(a).map(e=>{const t=null==s?void 0:s[e],r=null==n?void 0:n[e];if(null===t)return null;const i=It(t)||It(r);return a[e][i]}),l=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),o=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...n,...l}[t]):{...n,...l}[t]===s})?[...e,s,r]:e},[]);return Ot(e,i,o,null==s?void 0:s.class,null==s?void 0:s.className)},_t=Pt("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ft=de.forwardRef(({className:t,variant:s,...r},a)=>e.jsx("div",{ref:a,role:"alert",className:jt(_t({variant:s}),t),...r}));Ft.displayName="Alert";de.forwardRef(({className:t,...s},r)=>e.jsx("h5",{ref:r,className:jt("mb-1 font-medium leading-none tracking-tight",t),...s})).displayName="AlertTitle";const Mt=de.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:jt("text-sm [&_p]:leading-relaxed",t),...s}));Mt.displayName="AlertDescription";const Bt=Pt("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Lt=de.forwardRef(({className:t,variant:s,size:r,asChild:a=!1,...i},l)=>{const o=a?n:"button";return e.jsx(o,{className:jt(Bt({variant:s,size:r,className:t})),ref:l,...i})});Lt.displayName="Button";const Ut=Pt("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function zt({className:t,variant:s,...r}){return e.jsx("div",{className:jt(Ut({variant:s}),t),...r})}var Dt="horizontal",Wt=["horizontal","vertical"],$t=de.forwardRef((t,s)=>{const{decorative:r,orientation:a=Dt,...n}=t,l=function(e){return Wt.includes(e)}(a)?a:Dt,o=r?{role:"none"}:{"aria-orientation":"vertical"===l?l:void 0,role:"separator"};return e.jsx(i.div,{"data-orientation":l,...o,...n,ref:s})});$t.displayName="Separator";var Vt=$t;const Kt=de.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...a},n)=>e.jsx(Vt,{ref:n,decorative:r,orientation:s,className:jt("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",t),...a}));Kt.displayName=Vt.displayName;
/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Ht=(...e)=>e.filter((e,t,s)=>Boolean(e)&&s.indexOf(e)===t).join(" ");
/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var qt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=de.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:n,iconNode:i,...l},o)=>de.createElement("svg",{ref:o,...qt,width:t,height:t,stroke:e,strokeWidth:r?24*Number(s)/Number(t):s,className:Ht("lucide",a),...l},[...i.map(([e,t])=>de.createElement(e,t)),...Array.isArray(n)?n:[n]])),Jt=(e,t)=>{const s=de.forwardRef(({className:s,...r},a)=>{return de.createElement(Gt,{ref:a,iconNode:t,className:Ht(`lucide-${n=e,n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,s),...r});var n});return s.displayName=`${e}`,s},Yt=Jt("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),Xt=Jt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),Zt=Jt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Qt=Jt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),es=Jt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ts=Jt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ss=Jt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),rs=Jt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),as=Jt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ns=Jt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),is=Jt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ls=Jt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),os=Jt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),cs=Jt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),ds=Jt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),ms=Jt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),us=Jt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),hs=Jt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ps=Jt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),fs=Jt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),xs=Jt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),gs=Jt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),vs=Jt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),ys=Jt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ws=Jt("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),js=Jt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),bs=Jt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Ns=Jt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ks=Jt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Cs=Jt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Ss=Jt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Es=Jt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),As=Jt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Ts=Jt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Rs=Jt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Is=Jt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Os=Jt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Ps=Jt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),_s=Jt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Fs=Jt("Unplug",[["path",{d:"m19 5 3-3",key:"yk6iyv"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z",key:"1snsnr"}]]),Ms=Jt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Bs=Jt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ls=Jt("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),Us=Jt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),zs=Jt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ds=Jt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);
/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Ws(e){return Buffer.from(e).toString("hex")}function $s(e){return Buffer.from(e).toString("base64")}function Vs(e){return Buffer.from(e,"base64")}async function Ks(e){const t=function(e){if(0===e.length)return"";let t=BigInt("0x"+e.toString("hex")),s="";for(;t>0n;){const e=t%58n;t/=58n,s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"[Number(e)]+s}for(let r=0;r<e.length&&0===e[r];r++)s="1"+s;return s}(Buffer.from(await crypto.subtle.digest("SHA-256",e)));return"oct"+t}function Hs(){return ue()}function qs(e){return he(e)}async function Gs(e){if(!qs(e))throw new Error("Invalid mnemonic phrase");const t=function(e){return pe(e)}(e),{masterPrivateKey:s}=await async function(e){const t=Buffer.from("Octra seed","utf8"),s=await crypto.subtle.importKey("raw",t,{name:"HMAC",hash:"SHA-512"},!1,["sign"]),r=await crypto.subtle.sign("HMAC",s,e),a=Buffer.from(r);return{masterPrivateKey:a.slice(0,32),masterChainCode:a.slice(32,64)}}(t),r=me.sign.keyPair.fromSeed(s),a=Buffer.from(r.secretKey.slice(0,32)),n=Buffer.from(r.publicKey),i=await Ks(n);return{mnemonic:e,privateKey:$s(a),publicKey:Ws(n),address:i,balance:0,nonce:0}}async function Js(e,t){const s=await function(e){const t=Vs(e),s=(new TextEncoder).encode("octra_encrypted_balance_v2"),r=new Uint8Array(s.length+t.length);return r.set(s),r.set(t,s.length),crypto.subtle.digest("SHA-256",r).then(e=>new Uint8Array(e).slice(0,32))}(t),r=crypto.getRandomValues(new Uint8Array(12)),a=(new TextEncoder).encode(e.toString()),n=await crypto.subtle.importKey("raw",s,{name:"AES-GCM"},!1,["encrypt"]),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,a),l=new Uint8Array(r.length+i.byteLength);return l.set(r),l.set(new Uint8Array(i),r.length),"v2|"+$s(Buffer.from(l))}let Ys=0;const Xs=new Map,Zs=e=>{if(Xs.has(e))return;const t=setTimeout(()=>{Xs.delete(e),sr({type:"REMOVE_TOAST",toastId:e})},1e6);Xs.set(e,t)},Qs=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?Zs(s):e.toasts.forEach(e=>{Zs(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},er=[];let tr={toasts:[]};function sr(e){tr=Qs(tr,e),er.forEach(e=>{e(tr)})}function rr({...e}){const t=(Ys=(Ys+1)%Number.MAX_SAFE_INTEGER,Ys.toString()),s=()=>sr({type:"DISMISS_TOAST",toastId:t});return sr({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>sr({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function ar(){const[e,t]=de.useState(tr);return de.useEffect(()=>(er.push(t),()=>{const e=er.indexOf(t);e>-1&&er.splice(e,1)}),[e]),{...e,toast:rr,dismiss:e=>sr({type:"DISMISS_TOAST",toastId:e})}}function nr({onWalletGenerated:t}){const[s,r]=de.useState(null),[a,n]=de.useState(!1),[i,l]=de.useState(!1),{toast:o}=ar(),c=async()=>{n(!0);try{const e=await async function(){let e,t=0;do{const s=Hs();if(e=await Gs(s),t++,t>=100)throw new Error("Failed to generate wallet with 47-character address after maximum attempts")}while(47!==e.address.length);return{address:e.address,privateKey:e.privateKey,mnemonic:e.mnemonic,publicKey:e.publicKey}}();r(e),l(!1),o({title:"Wallet Generated!",description:"Please backup your wallet information securely"})}catch(e){o({title:"Error",description:"Generation failed",variant:"destructive"})}finally{n(!1)}},d=async(e,t)=>{try{await navigator.clipboard.writeText(e),o({title:"Copied!",description:`${t} copied to clipboard`})}catch(s){o({title:"Error",description:"Copy failed",variant:"destructive"})}};return s?e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ft,{className:"border-green-200 bg-green-50 dark:bg-green-950",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(rs,{className:"h-4 w-4 mt-0.5 flex-shrink-0 text-green-600"}),e.jsx(Mt,{className:"text-green-800 dark:text-green-200",children:"Wallet generated successfully! Please backup the information below."})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Wallet Address"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1 p-3 bg-muted rounded-md font-mono text-sm break-all",children:s.address}),e.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>d(s.address,"Address"),children:e.jsx(ls,{className:"h-4 w-4"})})]})]}),s.mnemonic&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Mnemonic Phrase"}),e.jsx("div",{className:"p-4 bg-muted rounded-md",children:e.jsx("div",{className:"grid grid-cols-3 gap-3",children:s.mnemonic.split(" ").map((t,s)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(zt,{variant:"outline",className:"w-8 h-6 text-xs",children:s+1}),e.jsx("span",{className:"font-mono text-sm",children:t})]},s))})}),e.jsxs(Lt,{variant:"outline",size:"sm",onClick:()=>d(s.mnemonic,"Mnemonic"),className:"w-full mt-2",children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Copy Mnemonic Phrase"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Private Key (Base64)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1 p-3 bg-muted rounded-md font-mono text-sm break-all",children:s.privateKey}),e.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>d(s.privateKey,"Private Key"),children:e.jsx(ls,{className:"h-4 w-4"})})]})]}),e.jsx(Kt,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(rs,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"Please confirm that you have securely backed up your wallet information. This includes your private key and mnemonic phrase."})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"backup-confirm",checked:i,onChange:e=>l(e.target.checked),className:"rounded"}),e.jsx("label",{htmlFor:"backup-confirm",className:"text-sm",children:"I have securely backed up my wallet information"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(Lt,{variant:"outline",onClick:()=>r(null),className:"flex-1",children:"Generate Another"}),e.jsx(Lt,{onClick:()=>{s&&(i?t(s):o({title:"Backup Required",description:"Confirm backup first",variant:"destructive"}))},disabled:!i,className:"flex-1",size:"lg",children:"Continue to Wallet"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_s,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"Make sure to backup your wallet information securely. Loss of private key or mnemonic phrase will result in permanent loss of funds."})]})}),e.jsx(Lt,{onClick:c,disabled:a,className:"w-full",size:"lg",children:a?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Generate New Wallet"]})})]})}const ir=de.forwardRef(({className:t,type:s,...r},a)=>e.jsx("input",{type:s,className:jt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...r}));ir.displayName="Input";const lr=de.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:jt("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));lr.displayName="Textarea";var or=de.forwardRef((t,s)=>e.jsx(i.label,{...t,ref:s,onMouseDown:e=>{var s;e.target.closest("button, input, select, textarea")||(null==(s=t.onMouseDown)||s.call(t,e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));or.displayName="Label";var cr=or;const dr=Pt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),mr=de.forwardRef(({className:t,...s},r)=>e.jsx(cr,{ref:r,className:jt(dr(),t),...s}));function ur({onWalletImported:t}){const[s,r]=de.useState(""),[a,n]=de.useState(""),[i,l]=de.useState(!1),{toast:o}=ar();return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_s,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"Only import wallets from trusted sources. Never share your private key or mnemonic phrase with anyone."})]})}),e.jsxs(St,{defaultValue:"private-key",className:"w-full",children:[e.jsxs(Et,{className:"grid w-full grid-cols-2",children:[e.jsxs(At,{value:"private-key",className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Private Key"]}),e.jsxs(At,{value:"mnemonic",className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-4 w-4"}),"Mnemonic"]})]}),e.jsxs(Tt,{value:"private-key",className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"private-key",children:"Private Key"}),e.jsx(ir,{id:"private-key",type:"password",placeholder:"Enter your private key (Base64)",value:s,onChange:e=>r(e.target.value),className:"font-mono text-sm"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your private key in Base64 format"})]}),e.jsx(Lt,{onClick:async()=>{if(s.trim()){l(!0);try{const e=await async function(e){let t,s=e.trim();try{if(t=Buffer.from(s,"base64"),32!==t.length)throw new Error("Invalid private key length")}catch(r){throw new Error("Invalid private key format")}try{const e=me.sign.keyPair.fromSeed(t),s=Buffer.from(e.publicKey);return{address:await Ks(s),privateKey:$s(t),publicKey:Ws(s)}}catch(r){throw new Error("Failed to create wallet from private key")}}(s.trim()),r=JSON.parse(localStorage.getItem("wallets")||"[]");if(r.some(t=>t.address===e.address))return void o({title:"Wallet Already Exists",description:"This wallet is already in your collection",variant:"destructive"});t(e),o({title:"Success!",description:"Wallet imported successfully"})}catch(e){o({title:"Error",description:"Import failed",variant:"destructive"})}finally{l(!1)}}else o({title:"Error",description:"Private key required",variant:"destructive"})},disabled:i||!s.trim(),className:"w-full",size:"lg",children:i?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):"Import Wallet"})]}),e.jsxs(Tt,{value:"mnemonic",className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"mnemonic",children:"Mnemonic Phrase"}),e.jsx(lr,{id:"mnemonic",placeholder:"Enter your 12 or 24 word mnemonic phrase",value:a,onChange:e=>n(e.target.value),rows:4,className:"font-mono text-sm"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your mnemonic phrase separated by spaces (12 or 24 words)"})]}),e.jsx(Lt,{onClick:async()=>{if(a.trim()){l(!0);try{const e=await async function(e){const t=e.trim().split(/\s+/);if(12!==t.length&&24!==t.length)throw new Error("Invalid mnemonic length. Must be 12 or 24 words.");if(!qs(e))throw new Error("Invalid mnemonic phrase");const s=await Gs(e);return{address:s.address,privateKey:s.privateKey,mnemonic:s.mnemonic,publicKey:s.publicKey}}(a.trim()),s=JSON.parse(localStorage.getItem("wallets")||"[]");if(s.some(t=>t.address===e.address))return void o({title:"Wallet Already Exists",description:"This wallet is already in your collection",variant:"destructive"});t(e),o({title:"Success!",description:"Wallet imported successfully"})}catch(e){o({title:"Error",description:"Import failed",variant:"destructive"})}finally{l(!1)}}else o({title:"Error",description:"Mnemonic required",variant:"destructive"})},disabled:i||!a.trim(),className:"w-full",size:"lg",children:i?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):"Import Wallet"})]})]})]})}function hr(e){const t=de.useRef({value:e,previous:e});return de.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}mr.displayName=cr.displayName;var pr="Checkbox",[fr,xr]=l(pr),[gr,vr]=fr(pr),yr=de.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:a,checked:n,defaultChecked:l,required:m,disabled:u,value:h="on",onCheckedChange:p,form:f,...x}=t,[g,v]=de.useState(null),y=o(s,e=>v(e)),w=de.useRef(!1),j=!g||(f||!!g.closest("form")),[b=!1,N]=c({prop:n,defaultProp:l,onChange:p}),k=de.useRef(b);return de.useEffect(()=>{const e=null==g?void 0:g.form;if(e){const t=()=>N(k.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[g,N]),e.jsxs(gr,{scope:r,state:b,disabled:u,children:[e.jsx(i.button,{type:"button",role:"checkbox","aria-checked":Nr(b)?"mixed":b,"aria-required":m,"data-state":kr(b),"data-disabled":u?"":void 0,disabled:u,value:h,...x,ref:y,onKeyDown:d(t.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:d(t.onClick,e=>{N(e=>!!Nr(e)||!e),j&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),j&&e.jsx(br,{control:g,bubbles:!w.current,name:a,value:h,checked:b,required:m,disabled:u,form:f,style:{transform:"translateX(-100%)"},defaultChecked:!Nr(l)&&l})]})});yr.displayName=pr;var wr="CheckboxIndicator",jr=de.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:a,...n}=t,l=vr(wr,r);return e.jsx(m,{present:a||Nr(l.state)||!0===l.state,children:e.jsx(i.span,{"data-state":kr(l.state),"data-disabled":l.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...t.style}})})});jr.displayName=wr;var br=t=>{const{control:s,checked:r,bubbles:a=!0,defaultChecked:n,...i}=t,l=de.useRef(null),o=hr(r),c=u(s);de.useEffect(()=>{const e=l.current,t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==r&&s){const t=new Event("click",{bubbles:a});e.indeterminate=Nr(r),s.call(e,!Nr(r)&&r),e.dispatchEvent(t)}},[o,r,a]);const d=de.useRef(!Nr(r)&&r);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??d.current,...i,tabIndex:-1,ref:l,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Nr(e){return"indeterminate"===e}function kr(e){return Nr(e)?"indeterminate":e?"checked":"unchecked"}var Cr=yr,Sr=jr;function Er(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}var Ar=["color"],Tr=de.forwardRef(function(e,t){var s=e.color,r=void 0===s?"currentColor":s,a=Er(e,Ar);return de.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),de.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Rr=["color"],Ir=de.forwardRef(function(e,t){var s=e.color,r=void 0===s?"currentColor":s,a=Er(e,Rr);return de.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),de.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Or=["color"],Pr=de.forwardRef(function(e,t){var s=e.color,r=void 0===s?"currentColor":s,a=Er(e,Or);return de.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),de.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),_r=["color"],Fr=de.forwardRef(function(e,t){var s=e.color,r=void 0===s?"currentColor":s,a=Er(e,_r);return de.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),de.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Mr=["color"],Br=de.forwardRef(function(e,t){var s=e.color,r=void 0===s?"currentColor":s,a=Er(e,Mr);return de.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),de.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const Lr=de.forwardRef(({className:t,...s},r)=>e.jsx(Cr,{ref:r,className:jt("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(Sr,{className:jt("flex items-center justify-center text-current"),children:e.jsx(Ir,{className:"h-4 w-4"})})}));async function Ur(e,t){const s=new TextEncoder,r=t?ge.Buffer.from(t,"hex"):crypto.getRandomValues(new Uint8Array(16)),a=s.encode(e),n=new Uint8Array(a.length+r.length);n.set(a),n.set(r,a.length);const i=await crypto.subtle.digest("SHA-256",n);return{hashedPassword:ge.Buffer.from(i).toString("hex"),salt:ge.Buffer.from(r).toString("hex")}}async function zr(e,t,s){const{hashedPassword:r}=await Ur(e,s);return r===t}function Dr(e,t){return new Promise(async(s,r)=>{try{const r=new TextEncoder,a=new TextDecoder,n=await crypto.subtle.importKey("raw",await crypto.subtle.digest("SHA-256",r.encode(t)),{name:"AES-GCM"},!1,["decrypt"]),i=ge.Buffer.from(e,"base64"),l=i.slice(0,12),o=i.slice(12),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:l},n,o);s(a.decode(c))}catch(a){r(a)}})}function Wr({wallet:t,onPasswordSet:s,onBack:r}){const[a,n]=de.useState(""),[i,l]=de.useState(""),[o,c]=de.useState(!1),[d,m]=de.useState(!1),[u,h]=de.useState(!1),[p,f]=de.useState(!1),[x,g]=de.useState(!1),{toast:v}=ar(),y=()=>a.length<8?"Password must be at least 8 characters long":a!==i?"Passwords do not match":null,w=y();return e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(bt,{children:[e.jsx(Nt,{children:e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-5 w-5"}),"Secure Your Wallet"]})}),e.jsxs(Ct,{className:"space-y-6",children:[e.jsxs(Ft,{children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx(Mt,{children:"Create a password to protect your wallet. This password will be required when dApps request to connect to your wallet."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ir,{id:"password",type:o?"text":"password",placeholder:"Enter a strong password",value:a,onChange:e=>n(e.target.value),className:"pr-10"}),e.jsx(Lt,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>c(!o),children:o?e.jsx(ms,{className:"h-4 w-4"}):e.jsx(us,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ir,{id:"confirmPassword",type:d?"text":"password",placeholder:"Confirm your password",value:i,onChange:e=>l(e.target.value),className:"pr-10"}),e.jsx(Lt,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>m(!d),children:d?e.jsx(ms,{className:"h-4 w-4"}):e.jsx(us,{className:"h-4 w-4"})})]}),w&&e.jsx("p",{className:"text-sm text-red-600",children:w})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Lr,{id:"acknowledge-recovery",checked:u,onCheckedChange:e=>h(e)}),e.jsx(mr,{htmlFor:"acknowledge-recovery",className:"text-sm leading-5",children:"I acknowledge that this password can not be used to recover my accounts, I still need to preserve the recovery methods used when first creating my accounts (seed phrase etc.)"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Lr,{id:"acknowledge-browser",checked:p,onCheckedChange:e=>f(e)}),e.jsx(mr,{htmlFor:"acknowledge-browser",className:"text-sm leading-5",children:"I acknowledge that storing this password in my browser's password manager exposes me to additional risk (we recommend you do not)."})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Lt,{variant:"outline",onClick:r,disabled:x,className:"flex-1",children:"Back"}),e.jsx(Lt,{onClick:async()=>{const e=y();if(e)v({title:"Validation Error",description:e,variant:"destructive"});else if(u&&p){g(!0);try{const{hashedPassword:e,salt:r}=await Ur(a),n=JSON.stringify(t),i=await function(e,t){return new Promise(async(s,r)=>{try{const r=new TextEncoder,a=await crypto.subtle.importKey("raw",await crypto.subtle.digest("SHA-256",r.encode(t)),{name:"AES-GCM"},!1,["encrypt"]),n=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},a,r.encode(e)),l=new Uint8Array(n.length+i.byteLength);l.set(n),l.set(new Uint8Array(i),n.length),s(ge.Buffer.from(l).toString("base64"))}catch(a){r(a)}})}(n,a);localStorage.setItem("walletPasswordHash",e),localStorage.setItem("walletPasswordSalt",r),localStorage.setItem("isWalletLocked","false");const l=[...JSON.parse(localStorage.getItem("encryptedWallets")||"[]"),{address:t.address,encryptedData:i,createdAt:Date.now()}];localStorage.setItem("encryptedWallets",JSON.stringify(l)),v({title:"Password Created!",description:"Your wallet is now protected with a password"}),s(t)}catch(r){console.error("Password creation error:",r),v({title:"Error",description:"Failed to create password protection",variant:"destructive"})}finally{g(!1)}}else v({title:"Acknowledgment Required",description:"Please acknowledge both security warnings",variant:"destructive"})},disabled:x||!a||!i||!u||!p||!!w,className:"flex-1",children:x?"Creating...":"Next"})]})]})]})})}function $r({onWalletCreated:t}){const[s,r]=de.useState("generate"),[a,n]=de.useState(null),[i,l]=de.useState(!1),o=()=>{const e=localStorage.getItem("wallets");return e&&JSON.parse(e).length>0},c=e=>{n(e),l(!0)},d=e=>{l(!1),n(null),t(e)},m=()=>{l(!1),n(null)};return i&&a?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx(Wr,{wallet:a,onPasswordSet:d,onBack:m})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8 octra-fade-in",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-primary/10 rounded-full border border-primary/20",children:e.jsx(Ls,{className:"h-10 w-10 text-primary"})})}),e.jsx("h1",{className:"text-4xl font-bold mb-3 text-foreground",children:"Octra Wallet"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Your secure gateway to the Octra blockchain network"}),o()&&e.jsxs(Ft,{className:"max-w-md mx-auto mb-6 border-primary/20 bg-primary/5",children:[e.jsx(gs,{className:"h-4 w-4 text-primary"}),e.jsx(Mt,{className:"text-muted-foreground",children:"You have existing wallets. Creating or importing a new wallet will add it to your collection."})]})]}),e.jsxs(bt,{className:"shadow-sm border-border/40 bg-card/50 backdrop-blur-sm octra-fade-in",children:[e.jsxs(Nt,{className:"text-center pb-6",children:[e.jsx(kt,{className:"text-2xl font-semibold text-foreground",children:o()?"Add Another Wallet":"Get Started"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:o()?"Create a new wallet or import an existing one to add to your collection":"Create a new wallet or import an existing one to begin"})]}),e.jsx(Ct,{children:e.jsxs(St,{value:s,onValueChange:r,className:"w-full",children:[e.jsxs(Et,{className:"grid w-full grid-cols-2 mb-8 bg-muted/50",children:[e.jsxs(At,{value:"generate",className:"flex items-center gap-2 data-[state=active]:bg-background",children:[e.jsx(Ss,{className:"h-4 w-4"}),"Create New Wallet"]}),e.jsxs(At,{value:"import",className:"flex items-center gap-2 data-[state=active]:bg-background",children:[e.jsx(os,{className:"h-4 w-4"}),"Import Wallet"]})]}),e.jsxs(Tt,{value:"generate",className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"Create New Wallet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate a brand new wallet with a secure mnemonic phrase"})]}),e.jsx(nr,{onWalletGenerated:c})]}),e.jsxs(Tt,{value:"import",className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"Import Existing Wallet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Restore your wallet using a private key or mnemonic phrase"})]}),e.jsx(ur,{onWalletImported:c})]})]})})]}),e.jsxs("div",{className:"text-center mt-8 text-sm text-muted-foreground space-y-2",children:[e.jsx("p",{children:"By using Octra Wallet, you agree to our terms of service and privacy policy."}),e.jsx("p",{children:"Always keep your private keys and mnemonic phrase secure and never share them with anyone."})]})]})})}Lr.displayName=Cr.displayName;const Vr=y,Kr=w,Hr=v,qr=de.forwardRef(({className:t,...s},r)=>e.jsx(h,{ref:r,className:jt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));qr.displayName=h.displayName;const Gr=de.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(Hr,{children:[e.jsx(qr,{}),e.jsxs(p,{ref:a,className:jt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,e.jsxs(f,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Br,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Gr.displayName=p.displayName;const Jr=({className:t,...s})=>e.jsx("div",{className:jt("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Jr.displayName="DialogHeader";const Yr=de.forwardRef(({className:t,...s},r)=>e.jsx(x,{ref:r,className:jt("text-lg font-semibold leading-none tracking-tight",t),...s}));Yr.displayName=x.displayName;const Xr=de.forwardRef(({className:t,...s},r)=>e.jsx(g,{ref:r,className:jt("text-sm text-muted-foreground",t),...s}));Xr.displayName=g.displayName;const Zr=I,Qr=O;de.forwardRef(({className:t,inset:s,children:r,...a},n)=>e.jsxs(j,{ref:n,className:jt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",t),...a,children:[r,e.jsx(ss,{className:"ml-auto h-4 w-4"})]})).displayName=j.displayName;de.forwardRef(({className:t,...s},r)=>e.jsx(b,{ref:r,className:jt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})).displayName=b.displayName;const ea=de.forwardRef(({className:t,sideOffset:s=4,...r},a)=>e.jsx(N,{children:e.jsx(k,{ref:a,sideOffset:s,className:jt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));ea.displayName=k.displayName;const ta=de.forwardRef(({className:t,inset:s,...r},a)=>e.jsx(C,{ref:a,className:jt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",t),...r}));ta.displayName=C.displayName;de.forwardRef(({className:t,children:s,checked:r,...a},n)=>e.jsxs(S,{ref:n,className:jt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(E,{children:e.jsx(es,{className:"h-4 w-4"})})}),s]})).displayName=S.displayName;de.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(A,{ref:a,className:jt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(E,{children:e.jsx(ns,{className:"h-2 w-2 fill-current"})})}),s]})).displayName=A.displayName;de.forwardRef(({className:t,inset:s,...r},a)=>e.jsx(T,{ref:a,className:jt("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...r})).displayName=T.displayName;const sa=de.forwardRef(({className:t,...s},r)=>e.jsx(R,{ref:r,className:jt("-mx-1 my-1 h-px bg-muted",t),...s}));sa.displayName=R.displayName;const ra=y,aa=w,na=v,ia=de.forwardRef(({className:t,...s},r)=>e.jsx(h,{className:jt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));ia.displayName=h.displayName;const la=Pt("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),oa=de.forwardRef(({side:t="right",className:s,children:r,...a},n)=>e.jsxs(na,{children:[e.jsx(ia,{}),e.jsxs(p,{ref:n,className:jt(la({side:t}),s),...a,children:[e.jsxs(f,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Br,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),r]})]}));oa.displayName=p.displayName;const ca=({className:t,...s})=>e.jsx("div",{className:jt("flex flex-col space-y-2 text-center sm:text-left",t),...s});ca.displayName="SheetHeader";const da=de.forwardRef(({className:t,...s},r)=>e.jsx(x,{ref:r,className:jt("text-lg font-semibold text-foreground",t),...s}));da.displayName=x.displayName;de.forwardRef(({className:t,...s},r)=>e.jsx(g,{ref:r,className:jt("text-sm text-muted-foreground",t),...s})).displayName=g.displayName;var ma="AlertDialog",[ua,ha]=l(ma,[P]),pa=P(),fa=t=>{const{__scopeAlertDialog:s,...r}=t,a=pa(s);return e.jsx(y,{...a,...r,modal:!0})};fa.displayName=ma;var xa=de.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,n=pa(r);return e.jsx(w,{...n,...a,ref:s})});xa.displayName="AlertDialogTrigger";var ga=t=>{const{__scopeAlertDialog:s,...r}=t,a=pa(s);return e.jsx(v,{...a,...r})};ga.displayName="AlertDialogPortal";var va=de.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,n=pa(r);return e.jsx(h,{...n,...a,ref:s})});va.displayName="AlertDialogOverlay";var ya="AlertDialogContent",[wa,ja]=ua(ya),ba=de.forwardRef((t,s)=>{const{__scopeAlertDialog:r,children:a,...n}=t,i=pa(r),l=de.useRef(null),c=o(s,l),m=de.useRef(null);return e.jsx(_,{contentName:ya,titleName:Na,docsSlug:"alert-dialog",children:e.jsx(wa,{scope:r,cancelRef:m,children:e.jsxs(p,{role:"alertdialog",...i,...n,ref:c,onOpenAutoFocus:d(n.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=m.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[e.jsx(F,{children:a}),e.jsx(Ra,{contentRef:l})]})})})});ba.displayName=ya;var Na="AlertDialogTitle",ka=de.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,n=pa(r);return e.jsx(x,{...n,...a,ref:s})});ka.displayName=Na;var Ca="AlertDialogDescription",Sa=de.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,n=pa(r);return e.jsx(g,{...n,...a,ref:s})});Sa.displayName=Ca;var Ea=de.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,n=pa(r);return e.jsx(f,{...n,...a,ref:s})});Ea.displayName="AlertDialogAction";var Aa="AlertDialogCancel",Ta=de.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...a}=t,{cancelRef:n}=ja(Aa,r),i=pa(r),l=o(s,n);return e.jsx(f,{...i,...a,ref:l})});Ta.displayName=Aa;var Ra=({contentRef:e})=>{const t=`\`${ya}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${ya}\` by passing a \`${Ca}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ya}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return de.useEffect(()=>{var s;document.getElementById(null==(s=e.current)?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Ia=va,Oa=ba,Pa=Ea,_a=Ta,Fa=ka,Ma=Sa;const Ba=fa,La=xa,Ua=ga,za=de.forwardRef(({className:t,...s},r)=>e.jsx(Ia,{className:jt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));za.displayName=Ia.displayName;const Da=de.forwardRef(({className:t,...s},r)=>e.jsxs(Ua,{children:[e.jsx(za,{}),e.jsx(Oa,{ref:r,className:jt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));Da.displayName=Oa.displayName;const Wa=({className:t,...s})=>e.jsx("div",{className:jt("flex flex-col space-y-2 text-center sm:text-left",t),...s});Wa.displayName="AlertDialogHeader";const $a=({className:t,...s})=>e.jsx("div",{className:jt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});$a.displayName="AlertDialogFooter";const Va=de.forwardRef(({className:t,...s},r)=>e.jsx(Fa,{ref:r,className:jt("text-lg font-semibold",t),...s}));Va.displayName=Fa.displayName;const Ka=de.forwardRef(({className:t,...s},r)=>e.jsx(Ma,{ref:r,className:jt("text-sm text-muted-foreground",t),...s}));Ka.displayName=Ma.displayName;const Ha=de.forwardRef(({className:t,...s},r)=>e.jsx(Pa,{ref:r,className:jt(Bt(),t),...s}));Ha.displayName=Pa.displayName;const qa=de.forwardRef(({className:t,...s},r)=>e.jsx(_a,{ref:r,className:jt(Bt({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));qa.displayName=_a.displayName;var Ga="Avatar",[Ja,Ya]=l(Ga),[Xa,Za]=Ja(Ga),Qa=de.forwardRef((t,s)=>{const{__scopeAvatar:r,...a}=t,[n,l]=de.useState("idle");return e.jsx(Xa,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:e.jsx(i.span,{...a,ref:s})})});Qa.displayName=Ga;var en="AvatarImage",tn=de.forwardRef((t,s)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:n=()=>{},...l}=t,o=Za(en,r),c=function(e,t){const[s,r]=de.useState("idle");return B(()=>{if(!e)return void r("error");let s=!0;const a=new window.Image,n=e=>()=>{s&&r(e)};return r("loading"),a.onload=n("loaded"),a.onerror=n("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{s=!1}},[e,t]),s}(a,l.referrerPolicy),d=M(e=>{n(e),o.onImageLoadingStatusChange(e)});return B(()=>{"idle"!==c&&d(c)},[c,d]),"loaded"===c?e.jsx(i.img,{...l,ref:s,src:a}):null});tn.displayName=en;var sn="AvatarFallback",rn=de.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:a,...n}=t,l=Za(sn,r),[o,c]=de.useState(void 0===a);return de.useEffect(()=>{if(void 0!==a){const e=window.setTimeout(()=>c(!0),a);return()=>window.clearTimeout(e)}},[a]),o&&"loaded"!==l.imageLoadingStatus?e.jsx(i.span,{...n,ref:s}):null});rn.displayName=sn;var an=Qa,nn=tn,ln=rn;const on=de.forwardRef(({className:t,...s},r)=>e.jsx(an,{ref:r,className:jt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));on.displayName=an.displayName;const cn=de.forwardRef(({className:t,...s},r)=>e.jsx(nn,{ref:r,className:jt("aspect-square h-full w-full",t),...s}));cn.displayName=nn.displayName;const dn=de.forwardRef(({className:t,...s},r)=>e.jsx(ln,{ref:r,className:jt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));function mn(e,[t,s]){return Math.min(s,Math.max(t,e))}dn.displayName=ln.displayName;var un="ScrollArea",[hn,pn]=l(un),[fn,xn]=hn(un),gn=de.forwardRef((t,s)=>{const{__scopeScrollArea:r,type:a="hover",dir:n,scrollHideDelay:l=600,...c}=t,[d,m]=de.useState(null),[u,h]=de.useState(null),[p,f]=de.useState(null),[x,g]=de.useState(null),[v,y]=de.useState(null),[w,j]=de.useState(0),[b,N]=de.useState(0),[k,C]=de.useState(!1),[S,E]=de.useState(!1),A=o(s,e=>m(e)),T=L(n);return e.jsx(fn,{scope:r,type:a,dir:T,scrollHideDelay:l,scrollArea:d,viewport:u,onViewportChange:h,content:p,onContentChange:f,scrollbarX:x,onScrollbarXChange:g,scrollbarXEnabled:k,onScrollbarXEnabledChange:C,scrollbarY:v,onScrollbarYChange:y,scrollbarYEnabled:S,onScrollbarYEnabledChange:E,onCornerWidthChange:j,onCornerHeightChange:N,children:e.jsx(i.div,{dir:T,...c,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})})});gn.displayName=un;var vn="ScrollAreaViewport",yn=de.forwardRef((t,s)=>{const{__scopeScrollArea:r,children:a,asChild:n,nonce:l,...c}=t,d=xn(vn,r),m=de.useRef(null),u=o(s,m,d.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"\n[data-radix-scroll-area-viewport] {\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  -webkit-overflow-scrolling: touch;\n}\n[data-radix-scroll-area-viewport]::-webkit-scrollbar {\n  display: none;\n}\n:where([data-radix-scroll-area-viewport]) {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n:where([data-radix-scroll-area-content]) {\n  flex-grow: 1;\n}\n"},nonce:l}),e.jsx(i.div,{"data-radix-scroll-area-viewport":"",...c,asChild:n,ref:u,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...t.style},children:Hn({asChild:n,children:a},t=>e.jsx("div",{"data-radix-scroll-area-content":"",ref:d.onContentChange,style:{minWidth:d.scrollbarXEnabled?"fit-content":void 0},children:t}))})]})});yn.displayName=vn;var wn="ScrollAreaScrollbar",jn=de.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=xn(wn,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=n,o="horizontal"===t.orientation;return de.useEffect(()=>(o?i(!0):l(!0),()=>{o?i(!1):l(!1)}),[o,i,l]),"hover"===n.type?e.jsx(bn,{...a,ref:s,forceMount:r}):"scroll"===n.type?e.jsx(Nn,{...a,ref:s,forceMount:r}):"auto"===n.type?e.jsx(kn,{...a,ref:s,forceMount:r}):"always"===n.type?e.jsx(Cn,{...a,ref:s}):null});jn.displayName=wn;var bn=de.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=xn(wn,t.__scopeScrollArea),[i,l]=de.useState(!1);return de.useEffect(()=>{const e=n.scrollArea;let t=0;if(e){const s=()=>{window.clearTimeout(t),l(!0)},r=()=>{t=window.setTimeout(()=>l(!1),n.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",r)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(m,{present:r||i,children:e.jsx(kn,{"data-state":i?"visible":"hidden",...a,ref:s})})}),Nn=de.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=xn(wn,t.__scopeScrollArea),i="horizontal"===t.orientation,l=Vn(()=>c("SCROLL_END"),100),[o,c]=(u="hidden",h={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},de.useReducer((e,t)=>h[e][t]??e,u));var u,h;return de.useEffect(()=>{if("idle"===o){const e=window.setTimeout(()=>c("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(e)}},[o,n.scrollHideDelay,c]),de.useEffect(()=>{const e=n.viewport,t=i?"scrollLeft":"scrollTop";if(e){let s=e[t];const r=()=>{const r=e[t];s!==r&&(c("SCROLL"),l()),s=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[n.viewport,i,c,l]),e.jsx(m,{present:r||"hidden"!==o,children:e.jsx(Cn,{"data-state":"hidden"===o?"hidden":"visible",...a,ref:s,onPointerEnter:d(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:d(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),kn=de.forwardRef((t,s)=>{const r=xn(wn,t.__scopeScrollArea),{forceMount:a,...n}=t,[i,l]=de.useState(!1),o="horizontal"===t.orientation,c=Vn(()=>{if(r.viewport){const e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;l(o?e:t)}},10);return Kn(r.viewport,c),Kn(r.content,c),e.jsx(m,{present:a||i,children:e.jsx(Cn,{"data-state":i?"visible":"hidden",...n,ref:s})})}),Cn=de.forwardRef((t,s)=>{const{orientation:r="vertical",...a}=t,n=xn(wn,t.__scopeScrollArea),i=de.useRef(null),l=de.useRef(0),[o,c]=de.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Ln(o.viewport,o.content),m={...a,sizes:o,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:e=>l.current=e};function u(e,t){return function(e,t,s,r="ltr"){const a=Un(s),n=a/2,i=t||n,l=a-i,o=s.scrollbar.paddingStart+i,c=s.scrollbar.size-s.scrollbar.paddingEnd-l,d=s.content-s.viewport,m="ltr"===r?[0,d]:[-1*d,0];return Dn([o,c],m)(e)}(e,l.current,o,t)}return"horizontal"===r?e.jsx(Sn,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){const e=zn(n.viewport.scrollLeft,o,n.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=u(e,n.dir))}}):"vertical"===r?e.jsx(En,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){const e=zn(n.viewport.scrollTop,o);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=u(e))}}):null}),Sn=de.forwardRef((t,s)=>{const{sizes:r,onSizesChange:a,...n}=t,i=xn(wn,t.__scopeScrollArea),[l,c]=de.useState(),d=de.useRef(null),m=o(s,d,i.onScrollbarXChange);return de.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(Rn,{"data-orientation":"horizontal",...n,ref:m,sizes:r,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Un(r)+"px",...t.style},onThumbPointerDown:e=>t.onThumbPointerDown(e.x),onDragScroll:e=>t.onDragScroll(e.x),onWheelScroll:(e,s)=>{if(i.viewport){const r=i.viewport.scrollLeft+e.deltaX;t.onWheelScroll(r),Wn(r,s)&&e.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Bn(l.paddingLeft),paddingEnd:Bn(l.paddingRight)}})}})}),En=de.forwardRef((t,s)=>{const{sizes:r,onSizesChange:a,...n}=t,i=xn(wn,t.__scopeScrollArea),[l,c]=de.useState(),d=de.useRef(null),m=o(s,d,i.onScrollbarYChange);return de.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(Rn,{"data-orientation":"vertical",...n,ref:m,sizes:r,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Un(r)+"px",...t.style},onThumbPointerDown:e=>t.onThumbPointerDown(e.y),onDragScroll:e=>t.onDragScroll(e.y),onWheelScroll:(e,s)=>{if(i.viewport){const r=i.viewport.scrollTop+e.deltaY;t.onWheelScroll(r),Wn(r,s)&&e.preventDefault()}},onResize:()=>{d.current&&i.viewport&&l&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Bn(l.paddingTop),paddingEnd:Bn(l.paddingBottom)}})}})}),[An,Tn]=hn(wn),Rn=de.forwardRef((t,s)=>{const{__scopeScrollArea:r,sizes:a,hasThumb:n,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:m,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:p,onResize:f,...x}=t,g=xn(wn,r),[v,y]=de.useState(null),w=o(s,e=>y(e)),j=de.useRef(null),b=de.useRef(""),N=g.viewport,k=a.content-a.viewport,C=M(p),S=M(u),E=Vn(f,10);function A(e){if(j.current){const t=e.clientX-j.current.left,s=e.clientY-j.current.top;h({x:t,y:s})}}return de.useEffect(()=>{const e=e=>{const t=e.target;(null==v?void 0:v.contains(t))&&C(e,k)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[N,v,k,C]),de.useEffect(S,[a,S]),Kn(v,E),Kn(g.content,E),e.jsx(An,{scope:r,scrollbar:v,hasThumb:n,onThumbChange:M(l),onThumbPointerUp:M(c),onThumbPositionChange:S,onThumbPointerDown:M(m),children:e.jsx(i.div,{...x,ref:w,style:{position:"absolute",...x.style},onPointerDown:d(t.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),j.current=v.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),A(e)}}),onPointerMove:d(t.onPointerMove,A),onPointerUp:d(t.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=b.current,g.viewport&&(g.viewport.style.scrollBehavior=""),j.current=null})})})}),In="ScrollAreaThumb",On=de.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=Tn(In,t.__scopeScrollArea);return e.jsx(m,{present:r||n.hasThumb,children:e.jsx(Pn,{ref:s,...a})})}),Pn=de.forwardRef((t,s)=>{const{__scopeScrollArea:r,style:a,...n}=t,l=xn(In,r),c=Tn(In,r),{onThumbPositionChange:m}=c,u=o(s,e=>c.onThumbChange(e)),h=de.useRef(),p=Vn(()=>{h.current&&(h.current(),h.current=void 0)},100);return de.useEffect(()=>{const e=l.viewport;if(e){const t=()=>{if(p(),!h.current){const t=$n(e,m);h.current=t,m()}};return m(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[l.viewport,p,m]),e.jsx(i.div,{"data-state":c.hasThumb?"visible":"hidden",...n,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:d(t.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top;c.onThumbPointerDown({x:s,y:r})}),onPointerUp:d(t.onPointerUp,c.onThumbPointerUp)})});On.displayName=In;var _n="ScrollAreaCorner",Fn=de.forwardRef((t,s)=>{const r=xn(_n,t.__scopeScrollArea),a=Boolean(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&a?e.jsx(Mn,{...t,ref:s}):null});Fn.displayName=_n;var Mn=de.forwardRef((t,s)=>{const{__scopeScrollArea:r,...a}=t,n=xn(_n,r),[l,o]=de.useState(0),[c,d]=de.useState(0),m=Boolean(l&&c);return Kn(n.scrollbarX,()=>{var e;const t=(null==(e=n.scrollbarX)?void 0:e.offsetHeight)||0;n.onCornerHeightChange(t),d(t)}),Kn(n.scrollbarY,()=>{var e;const t=(null==(e=n.scrollbarY)?void 0:e.offsetWidth)||0;n.onCornerWidthChange(t),o(t)}),m?e.jsx(i.div,{...a,ref:s,style:{width:l,height:c,position:"absolute",right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:0,...t.style}}):null});function Bn(e){return e?parseInt(e,10):0}function Ln(e,t){const s=e/t;return isNaN(s)?0:s}function Un(e){const t=Ln(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-s)*t;return Math.max(r,18)}function zn(e,t,s="ltr"){const r=Un(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=t.scrollbar.size-a,i=t.content-t.viewport,l=n-r,o=mn(e,"ltr"===s?[0,i]:[-1*i,0]);return Dn([0,i],[0,l])(o)}function Dn(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}function Wn(e,t){return e>0&&e<t}var $n=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const n={left:e.scrollLeft,top:e.scrollTop},i=s.left!==n.left,l=s.top!==n.top;(i||l)&&t(),s=n,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Vn(e,t){const s=M(e),r=de.useRef(0);return de.useEffect(()=>()=>window.clearTimeout(r.current),[]),de.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function Kn(e,t){const s=M(t);B(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,s])}function Hn(e,t){const{asChild:s,children:r}=e;if(!s)return"function"==typeof t?t(r):t;const a=de.Children.only(r);return de.cloneElement(a,{children:"function"==typeof t?t(a.props.children):t})}var qn=gn,Gn=yn,Jn=Fn;const Yn=de.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(qn,{ref:a,className:jt("relative overflow-hidden",t),...r,children:[e.jsx(Gn,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(Xn,{}),e.jsx(Jn,{})]}));Yn.displayName=qn.displayName;const Xn=de.forwardRef(({className:t,orientation:s="vertical",...r},a)=>e.jsx(jn,{ref:a,orientation:s,className:jt("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(On,{className:"relative flex-1 rounded-full bg-border"})}));function Zn({className:t,...s}){return e.jsx("div",{className:jt("animate-pulse rounded-md bg-primary/10",t),...s})}Xn.displayName=jn.displayName;const Qn=1e6;async function ei(e,t={}){const s=function(){try{const e=JSON.parse(localStorage.getItem("rpcProviders")||"[]").find(e=>e.isActive);if(e)return e}catch(t){console.error("Error loading RPC providers:",t)}const e={id:"default",name:"Octra Network (Default)",url:"https://octra.network",headers:{},priority:1,isActive:!0,createdAt:Date.now()};try{localStorage.setItem("rpcProviders",JSON.stringify([e]))}catch(t){console.error("Error saving default RPC provider:",t)}return e}();if(!s)throw new Error("No RPC provider available");const r={"Content-Type":"application/json",...s.headers};if(t.headers){const e=t.headers;Object.assign(r,e)}let a;a=`/rpc-proxy${e.startsWith("/")?e:`/${e}`}`,r["X-RPC-Target"]=s.url;try{return await fetch(a,{...t,headers:r,signal:AbortSignal.timeout(3e4)})}catch(n){return console.error(`API request failed for ${a}:`,n),new Response(null,{status:500,statusText:"Network Error",headers:new Headers})}}async function ti(e){try{const t=await e.text();if(!t.trim())throw new Error("Empty response body");return JSON.parse(t)}catch(t){throw console.error("Failed to parse JSON response:",t),new Error("Invalid JSON response from server")}}async function si(e){try{const t=await ei(`/address/${e}`);return t.ok?await ti(t):null}catch(t){return console.error("Error fetching address info:",t),null}}async function ri(e){try{const t=await ei("/send-tx",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.text();if(t.ok){try{const e=JSON.parse(s);if("accepted"===e.status)return{success:!0,hash:e.tx_hash}}catch{const e=s.match(/OK\s+([0-9a-fA-F]{64})/);if(e)return{success:!0,hash:e[1]}}return{success:!0,hash:s}}return console.error("Transaction failed:",s),{success:!1,error:s||"Transaction failed"}}catch(t){return console.error("Error sending transaction:",t),{success:!1,error:t instanceof Error?t.message:"Network error occurred"}}}async function ai(e){try{const t=await ei(`/tx/${e}`);if(!t.ok){const e=await t.text();throw console.error("Failed to fetch transaction details:",t.status,e),new Error(`Error ${t.status}`)}return await ti(t)}catch(t){throw console.error("Error fetching transaction details:",t),t}}async function ni(e){try{const s=await ei("/staging");if(!s.ok){const e=await s.text();return console.error("Failed to fetch pending transactions:",s.status,e),[]}let r;try{if(r=await ti(s),!r.staged_transactions||!Array.isArray(r.staged_transactions))return console.warn("Staging response does not contain staged_transactions array:",r),[]}catch(t){return console.error("Failed to parse staging JSON:",t),[]}return r.staged_transactions.filter(t=>t.from.toLowerCase()===e.toLowerCase()||t.to.toLowerCase()===e.toLowerCase())}catch(s){return console.error("Error fetching pending transactions:",s),[]}}async function ii(e){try{const[r,a]=await Promise.all([ei(`/balance/${e}`),ei("/staging").catch(()=>({ok:!1}))]);if(!r.ok){const e=await r.text();return console.error("Failed to fetch balance:",r.status,e),r.status,{balance:0,nonce:0}}let n;try{const e=await r.text();if(!e.trim())return console.error("Empty response from balance API"),{balance:0,nonce:0};n=JSON.parse(e)}catch(t){return console.error("Failed to parse balance response as JSON:",t),{balance:0,nonce:0}}const i="string"==typeof n.balance?parseFloat(n.balance):n.balance||0;let l=n.nonce||0;if("ok"in a&&a.ok)try{const t=await a.json();if(t.staged_transactions){const s=t.staged_transactions.filter(t=>t.from===e);if(s.length>0){const e=Math.max(...s.map(e=>parseInt(e.nonce)||0));l=Math.max(l,e)}}}catch(s){console.warn("Failed to parse staging data for nonce calculation:",s)}return isNaN(i)||isNaN(l)?(console.warn("Invalid balance or nonce in API response",{balance:i,nonce:l}),{balance:0,nonce:0}):{balance:i,nonce:l}}catch(s){return console.error("Error fetching balance:",s),{balance:0,nonce:0}}}async function li(e,t){var s,r,a;try{const i=await ei(`/view_encrypted_balance/${e}`,{headers:{"X-Private-Key":t}});if(!i.ok)return console.error("Failed to fetch encrypted balance:",i.status),null;let l;try{const e=await i.text();if(!e.trim())return console.error("Empty response from encrypted balance API"),null;l=JSON.parse(e)}catch(n){return console.error("Failed to parse encrypted balance response as JSON:",n),null}return{public:parseFloat((null==(s=l.public_balance)?void 0:s.split(" ")[0])||"0"),public_raw:parseInt(l.public_balance_raw||"0"),encrypted:parseFloat((null==(r=l.encrypted_balance)?void 0:r.split(" ")[0])||"0"),encrypted_raw:parseInt(l.encrypted_balance_raw||"0"),total:parseFloat((null==(a=l.total_balance)?void 0:a.split(" ")[0])||"0")}}catch(i){return console.error("Error fetching encrypted balance:",i),null}}async function oi(e,t,s,r){try{const a=await si(t);if(!a||!a.has_public_key)return{success:!1,error:"Recipient has no public key"};const n=await async function(e){try{const t=await ei(`/public_key/${e}`);return t.ok?(await ti(t)).public_key:null}catch(t){return console.error("Error fetching public key:",t),null}}(t);if(!n)return{success:!1,error:"Cannot get recipient public key"};const i={from:e,to:t,amount:Math.floor(s*Qn).toString(),from_private_key:r,to_public_key:n},l=await ei("/private_transfer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(l.ok){const e=await l.json();return{success:!0,tx_hash:e.tx_hash,ephemeral_key:e.ephemeral_key}}return{success:!1,error:await l.text()}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async function ci(e,t){try{const r=await ei(`/pending_private_transfers?address=${e}`,{headers:{"X-Private-Key":t}});if(r.ok){let e;try{const t=await r.text();if(!t.trim())return console.error("Empty response from pending private transfers API"),[];e=JSON.parse(t)}catch(s){return console.error("Failed to parse pending private transfers response as JSON:",s),[]}return e.pending_transfers||[]}return console.error("Failed to fetch pending private transfers:",r.status),[]}catch(r){return console.error("Error fetching pending private transfers:",r),[]}}async function di(e,t,s){try{const r={recipient_address:e,private_key:t,transfer_id:s},a=await ei("/claim_private_transfer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(a.ok){return{success:!0,amount:(await a.json()).amount}}return{success:!1,error:await a.text()}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}function mi(e,t,s,r,a,n,i){const l=Math.floor(s*Qn),o=s<1e3?"1":"3",c=Math.floor(1e3*(Date.now()/1e3+.01*Math.random()))/1e3,d={from:e,to_:t,amount:l.toString(),nonce:r,ou:o,timestamp:c};i&&(d.message=i);const m={};m.from=d.from,m.to_=d.to_,m.amount=d.amount,m.nonce=d.nonce,m.ou=d.ou,m.timestamp=d.timestamp;const u=JSON.stringify(m,null,0),h=Buffer.from(a,"base64"),p=Buffer.from(n,"hex"),f=new Uint8Array(64);f.set(h,0),f.set(p,32);const x=me.sign.detached((new TextEncoder).encode(u),f);return d.signature=Buffer.from(x).toString("base64"),d.public_key=Buffer.from(p).toString("base64"),d}async function ui(e){try{const t=await async function(e){try{const[s,r]=await Promise.all([ei(`/address/${e}`),ni(e).catch(()=>[])]);if(!s.ok){const e=await s.text();return console.error("Failed to fetch transaction history:",s.status,e),{transactions:[],balance:0}}let a;try{a=await ti(s)}catch(t){return console.error("Failed to parse transaction history JSON:",t),{transactions:[],balance:0}}const n=a.recent_transactions.map(async t=>{try{const s=await ai(t.hash);return{hash:s.tx_hash,from:s.parsed_tx.from,to:s.parsed_tx.to,amount:parseFloat(s.parsed_tx.amount),timestamp:s.parsed_tx.timestamp,status:"confirmed",type:s.parsed_tx.from.toLowerCase()===e.toLowerCase()?"sent":"received"}}catch(s){return console.error("Failed to fetch transaction details for hash:",t.hash,s),{hash:t.hash,from:"unknown",to:"unknown",amount:0,timestamp:Date.now()/1e3,status:"confirmed",type:"received"}}}),i=await Promise.all(n);return{transactions:[...r.map(t=>({hash:t.hash,from:t.from,to:t.to,amount:parseFloat(t.amount),timestamp:t.timestamp,status:"pending",type:t.from.toLowerCase()===e.toLowerCase()?"sent":"received"})),...i].sort((e,t)=>t.timestamp-e.timestamp),balance:parseFloat(a.balance)}}catch(s){return console.error("Error fetching transaction history:",s),{transactions:[],balance:0}}}(e);return t.transactions||[]}catch(t){return console.error("Error fetching transaction history:",t),[]}}function hi({open:t,onOpenChange:s,wallet:r,publicBalance:a,onSuccess:n}){const[i,l]=de.useState(""),[o,c]=de.useState(!1),{toast:d}=ar(),m=Math.max(0,a-.5);return e.jsx(Vr,{open:t,onOpenChange:s,children:e.jsxs(Gr,{className:"sm:max-w-md",children:[e.jsx(Jr,{children:e.jsxs(Yr,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-5 w-5"}),"Encrypt Balance"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Ft,{children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx(Mt,{children:"Encrypting balance converts public OCT to private OCT. This operation requires a transaction fee."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{children:"Current Public Balance"}),e.jsxs("div",{className:"p-3 bg-muted rounded-md font-mono",children:[a.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{children:"Maximum Encryptable"}),e.jsxs("div",{className:"p-3 bg-muted rounded-md font-mono text-yellow-600",children:[m.toFixed(8)," OCT"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"(1 OCT reserved for transaction fees)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"encrypt-amount",children:"Amount to Encrypt"}),e.jsx(ir,{id:"encrypt-amount",type:"number",placeholder:"0.00000000",value:i,onChange:e=>l(e.target.value),step:"0.1",min:"0",max:m,disabled:o})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Lt,{variant:"outline",onClick:()=>s(!1),disabled:o,className:"flex-1",children:"Cancel"}),e.jsx(Lt,{onClick:async()=>{const e=parseFloat(i);if(!i||isNaN(e)||e<=0)d({title:"Error",description:"Please enter a valid amount",variant:"destructive"});else if(e>m)d({title:"Error",description:`Amount too large. Maximum: ${m.toFixed(6)} OCT`,variant:"destructive"});else{c(!0);try{const t=await async function(e,t,s){try{const r=await li(e,s);if(!r)return{success:!1,error:"Cannot get balance"};const a=r.encrypted_raw+Math.floor(t*Qn),n=await Js(a,s),i={address:e,amount:Math.floor(t*Qn).toString(),private_key:s,encrypted_data:n},l=await ei("/encrypt_balance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});return l.ok?{success:!0,tx_hash:(await l.json()).tx_hash}:{success:!1,error:await l.text()}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}(r.address,e,r.privateKey);t.success?(d({title:"Encryption Submitted!",description:"Your balance encryption request has been submitted"}),l(""),n()):d({title:"Encryption Failed",description:t.error||"Unknown error occurred",variant:"destructive"})}catch(t){d({title:"Error",description:"Failed to encrypt balance",variant:"destructive"})}finally{c(!1)}}},disabled:o||!i||parseFloat(i)<=0||parseFloat(i)>m,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4 mr-2 animate-spin"}),"Encrypting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Encrypt"]})})]})]})]})})}function pi({open:t,onOpenChange:s,wallet:r,encryptedBalance:a,onSuccess:n}){const[i,l]=de.useState(""),[o,c]=de.useState(!1),{toast:d}=ar();return e.jsx(Vr,{open:t,onOpenChange:s,children:e.jsxs(Gr,{className:"sm:max-w-md",children:[e.jsx(Jr,{children:e.jsxs(Yr,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-5 w-5"}),"Decrypt Balance"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Ft,{children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx(Mt,{children:"Decrypting balance converts private OCT back to public OCT. This operation requires a transaction fee."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{children:"Current Private Balance"}),e.jsxs("div",{className:"p-3 bg-muted rounded-md font-mono text-yellow-600",children:[a.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"decrypt-amount",children:"Amount to Decrypt"}),e.jsx(ir,{id:"decrypt-amount",type:"number",placeholder:"0.00000000",value:i,onChange:e=>l(e.target.value),step:"0.1",min:"0",max:a,disabled:o})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Lt,{variant:"outline",onClick:()=>s(!1),disabled:o,className:"flex-1",children:"Cancel"}),e.jsx(Lt,{onClick:async()=>{const e=parseFloat(i);if(!i||isNaN(e)||e<=0)d({title:"Error",description:"Please enter a valid amount",variant:"destructive"});else if(e>a)d({title:"Error",description:`Amount too large. Maximum: ${a.toFixed(6)} OCT`,variant:"destructive"});else{c(!0);try{const t=await async function(e,t,s){try{const r=await li(e,s);if(!r)return{success:!1,error:"Cannot get balance"};const a=r.encrypted_raw;if(a<Math.floor(t*Qn))return{success:!1,error:"Insufficient encrypted balance"};const n=a-Math.floor(t*Qn),i=await Js(n,s),l={address:e,amount:Math.floor(t*Qn).toString(),private_key:s,encrypted_data:i},o=await ei("/decrypt_balance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});return o.ok?{success:!0,tx_hash:(await o.json()).tx_hash}:{success:!1,error:await o.text()}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}(r.address,e,r.privateKey);t.success?(d({title:"Decryption Submitted!",description:"Your balance decryption request has been submitted"}),l(""),n()):d({title:"Decryption Failed",description:t.error||"Unknown error occurred",variant:"destructive"})}catch(t){d({title:"Error",description:"Failed to decrypt balance",variant:"destructive"})}finally{c(!1)}}},disabled:o||!i||parseFloat(i)<=0||parseFloat(i)>a,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4 mr-2 animate-spin"}),"Decrypting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Decrypt"]})})]})]})]})})}function fi({wallet:t}){const[s,r]=de.useState(!1),[a,n]=de.useState(""),[i,l]=de.useState(!1),[o,c]=de.useState(!1),[d,m]=de.useState(!1),[u,h]=de.useState(!1),[p,f]=de.useState(!1),{toast:x}=ar(),g=async()=>{if(a){c(!0);try{const e=localStorage.getItem("walletPasswordHash"),t=localStorage.getItem("walletPasswordSalt");if(!e||!t)return void x({title:"No Password Set",description:"No wallet password found. Please set up password protection first.",variant:"destructive"});await zr(a,e,t)?(m(!0),x({title:"Access Granted",description:"Password verified successfully"})):x({title:"Invalid Password",description:"The password you entered is incorrect",variant:"destructive"})}catch(e){console.error("Password verification error:",e),x({title:"Verification Failed",description:"Failed to verify password",variant:"destructive"})}finally{c(!1)}}else x({title:"Password Required",description:"Please enter your wallet password",variant:"destructive"})},v=async(e,t)=>{try{await navigator.clipboard.writeText(e),x({title:"Copied!",description:`${t} copied to clipboard`})}catch(s){x({title:"Error",description:"Copy failed",variant:"destructive"})}},y=(e,t)=>{try{const s=new Blob([e],{type:"text/plain"}),r=URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),x({title:"Export Successful",description:`${t} has been downloaded`})}catch(s){x({title:"Export Failed",description:"Failed to export file",variant:"destructive"})}},w=()=>{r(!1),n(""),m(!1),h(!1),f(!1),l(!1)};return t?e.jsxs(bt,{children:[e.jsx(Nt,{children:e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5"}),"Export Private Keys"]})}),e.jsxs(Ct,{children:[e.jsx(Ft,{className:"mb-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Rs,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"Export your private keys and mnemonic phrase securely. Password verification required for access."})]})}),e.jsxs(Vr,{open:s,onOpenChange:r,children:[e.jsx(Kr,{asChild:!0,children:e.jsxs(Lt,{className:"w-full",size:"lg",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Export Private Keys"]})}),e.jsxs(Gr,{className:"sm:max-w-2xl max-h-[90vh]",onInteractOutside:e=>e.preventDefault(),children:[e.jsx(Jr,{children:e.jsxs(Yr,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5"}),"Export Private Keys"]})}),e.jsx(Yn,{className:"max-h-[calc(90vh-100px)] pr-2",children:e.jsx("div",{className:"pr-2",children:d?e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ft,{className:"border-green-200 bg-green-50 dark:bg-green-950/50 dark:border-green-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Rs,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{className:"text-green-800 dark:text-green-200",children:"Password verified. You can now view and export your private keys."})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{className:"text-sm font-medium",children:"Wallet Address"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("div",{className:"flex-1 p-3 bg-muted rounded-md font-mono text-xs sm:text-sm break-all",children:t.address}),e.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>v(t.address,"Address"),className:"self-start sm:self-auto",children:e.jsx(ls,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{className:"text-sm font-medium",children:"Private Key (Base64)"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("div",{className:"flex-1 p-3 bg-muted rounded-md font-mono text-xs sm:text-sm break-all",children:u?t.privateKey:"".repeat(44)}),e.jsxs("div",{className:"flex space-x-2 self-start sm:self-auto",children:[e.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>h(!u),children:u?e.jsx(ms,{className:"h-4 w-4"}):e.jsx(us,{className:"h-4 w-4"})}),u&&e.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>v(t.privateKey,"Private Key"),children:e.jsx(ls,{className:"h-4 w-4"})})]})]})]}),t.publicKey&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{className:"text-sm font-medium",children:"Public Key (Hex)"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("div",{className:"flex-1 p-3 bg-muted rounded-md font-mono text-xs sm:text-sm break-all",children:t.publicKey}),e.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>v(t.publicKey,"Public Key"),className:"self-start sm:self-auto",children:e.jsx(ls,{className:"h-4 w-4"})})]})]}),t.mnemonic&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{className:"text-sm font-medium",children:"Mnemonic Phrase"}),e.jsx("div",{className:"p-3 bg-muted rounded-md",children:p?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:t.mnemonic.split(" ").map((t,s)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground w-6",children:[s+1,"."]}),e.jsx("span",{className:"font-mono text-xs sm:text-sm",children:t})]},s))}):e.jsx("div",{className:"text-center py-4",children:e.jsx("span",{className:"text-muted-foreground",children:""})})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(Lt,{variant:"outline",size:"sm",onClick:()=>f(!p),className:"flex-1",children:[p?e.jsx(ms,{className:"h-4 w-4 mr-2"}):e.jsx(us,{className:"h-4 w-4 mr-2"}),p?"Hide":"Show"," Mnemonic"]}),p&&e.jsxs(Lt,{variant:"outline",size:"sm",onClick:()=>v(t.mnemonic,"Mnemonic"),className:"flex-1",children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Copy Mnemonic"]})]})]}),e.jsx(Kt,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(mr,{className:"text-base font-medium",children:"Export Options"}),e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_s,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsxs(Mt,{children:[e.jsx("strong",{children:"Security Warning:"})," Exported files contain sensitive information. Store them securely and delete after backing up safely."]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(Lt,{variant:"outline",onClick:()=>{if(!t)return;const e=`Octra Wallet Private Key Export\nGenerated: ${(new Date).toISOString()}\nAddress: ${t.address}\n\nPRIVATE KEY (Base64):\n${t.privateKey}\n\n  SECURITY WARNING:\n- Keep this private key secure and never share it with anyone\n- Anyone with access to this private key can control your wallet\n- Store this file in a secure location and delete it after backing up\n- Consider encrypting this file with additional password protection\n`;y(e,`octra-private-key-${t.address.slice(0,8)}.txt`)},className:"flex-1 h-auto p-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:"Private Key"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Export private key only"})]})]})}),t.mnemonic&&e.jsx(Lt,{variant:"outline",onClick:()=>{if(!t||!t.mnemonic)return;const e=`Octra Wallet Mnemonic Export\nGenerated: ${(new Date).toISOString()}\nAddress: ${t.address}\n\nMNEMONIC PHRASE:\n${t.mnemonic}\n\n  SECURITY WARNING:\n- Keep this mnemonic phrase secure and never share it with anyone\n- Anyone with access to this mnemonic can control your wallet\n- Store this file in a secure location and delete it after backing up\n- Consider encrypting this file with additional password protection\n- This mnemonic can be used to restore your wallet on any compatible wallet\n`;y(e,`octra-mnemonic-${t.address.slice(0,8)}.txt`)},className:"flex-1 h-auto p-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(hs,{className:"h-5 w-5"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:"Mnemonic"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Export mnemonic phrase"})]})]})}),e.jsx(Lt,{variant:"outline",onClick:()=>{if(!t)return;const e=`Octra Wallet Complete Export\nGenerated: ${(new Date).toISOString()}\n\nWALLET ADDRESS:\n${t.address}\n\nPRIVATE KEY (Base64):\n${t.privateKey}\n\n${t.publicKey?`PUBLIC KEY (Hex):\n${t.publicKey}\n\n`:""}${t.mnemonic?`MNEMONIC PHRASE:\n${t.mnemonic}\n\n`:""}  CRITICAL SECURITY WARNING:\n- This file contains ALL sensitive information needed to control your wallet\n- Keep this information secure and never share it with anyone\n- Anyone with access to this information can control your wallet and funds\n- Store this file in a secure, encrypted location\n- Delete this file after securely backing up the information\n- Consider using hardware security keys or encrypted storage solutions\n`;y(e,`octra-wallet-complete-${t.address.slice(0,8)}.txt`)},className:"flex-1 h-auto p-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(os,{className:"h-5 w-5"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:"Complete Wallet Info"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Export all wallet information"})]})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Lt,{variant:"outline",onClick:w,children:"Close"})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_s,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"Enter your wallet password to access private key information. This is required for security purposes."})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"password",children:"Wallet Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ir,{id:"password",type:i?"text":"password",placeholder:"Enter your wallet password",value:a,onChange:e=>n(e.target.value),onKeyPress:e=>"Enter"===e.key&&g(),className:"pr-10",disabled:o}),e.jsx(Lt,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!i),disabled:o,children:i?e.jsx(ms,{className:"h-4 w-4"}):e.jsx(us,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Lt,{variant:"outline",onClick:w,disabled:o,className:"flex-1",children:"Cancel"}),e.jsx(Lt,{onClick:g,disabled:o||!a,className:"flex-1",children:o?"Verifying...":"Verify Password"})]})]})})})]})]})]})]}):e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_s,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"No wallet available. Please generate or import a wallet first."})]})})}function xi({wallet:t,balance:s,encryptedBalance:r,onEncryptedBalanceUpdate:a,onBalanceUpdate:n,isLoading:i=!1}){const[l,o]=de.useState(!1);de.useState(!1);const[c,d]=de.useState(null),[m,u]=de.useState([]),[h,p]=de.useState(!1),[f,x]=de.useState(!1),{toast:g}=ar(),v=r||c,y=a||d,w=async()=>{if(t){o(!0);try{const r=await ii(t.address);n(r.balance);try{const e=await li(t.address,t.privateKey);y(e||{public:r.balance,public_raw:Math.floor(1e6*r.balance),encrypted:0,encrypted_raw:0,total:r.balance})}catch(e){console.error("Failed to fetch encrypted balance:",e),y({public:r.balance,public_raw:Math.floor(1e6*r.balance),encrypted:0,encrypted_raw:0,total:r.balance})}try{const e=await ci(t.address,t.privateKey);u(e)}catch(s){console.error("Failed to fetch pending transfers:",s)}g({title:"Balance Updated",description:"Balance has been refreshed successfully"})}catch(s){g({title:"Error",description:"Failed to refresh balance. This might be a new address or RPC connection issue.",variant:"destructive"}),console.error("Balance fetch error:",s)}finally{o(!1)}}};de.useEffect(()=>{t&&ii(t.address).then(e=>li(t.address,t.privateKey).then(t=>{y(t||{public:e.balance,public_raw:Math.floor(1e6*e.balance),encrypted:0,encrypted_raw:0,total:e.balance})}).then(()=>ci(t.address,t.privateKey).then(u).catch(e=>{console.error("Failed to fetch pending transfers on mount:",e),u([])}))).catch(e=>{console.error("Failed to fetch balance on mount:",e),y({public:0,public_raw:0,encrypted:0,encrypted_raw:0,total:0}),u([])})},[t]);return t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(bt,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-5 w-5"}),"Wallet Overview"]}),e.jsxs(Lt,{variant:"outline",size:"sm",onClick:w,disabled:l,children:[e.jsx(Es,{className:"h-4 w-4 mr-2 "+(l?"animate-spin":"")}),"Refresh"]})]}),e.jsxs(Ct,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ls,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Public Balance"})]}),i?e.jsx(Zn,{className:"h-8 w-32"}):e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:null!==s?`${s.toFixed(8)}`:"0.00000000"}),e.jsx(zt,{variant:"secondary",className:"text-xs font-bold mt-0.5",children:"OCT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Private Balance"})]}),i?e.jsx(Zn,{className:"h-8 w-32"}):e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:v?`${v.encrypted.toFixed(8)}`:"0.00000000"}),e.jsx(zt,{variant:"secondary",className:"text-xs font-bold mt-0.5",children:"OCT"})]})]})]}),v&&e.jsx("div",{className:"pt-5 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Balance"}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[v.total.toFixed(8)," OCT"]})]})}),m.length>0&&e.jsx("div",{className:"pt-5 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Claimable Transfers"}),e.jsxs(zt,{variant:"outline",className:"text-green-600 pb-1",children:[m.length," pending"]})]})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2 pt-5 border-t",children:[e.jsxs(Lt,{variant:"outline",size:"sm",onClick:()=>p(!0),disabled:!s||s<=1,className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Encrypt Balance"]}),e.jsxs(Lt,{variant:"outline",size:"sm",onClick:()=>x(!0),disabled:!v||v.encrypted<=0,className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),"Decrypt Balance"]})]})]})]}),e.jsx(fi,{wallet:t}),e.jsx(hi,{open:h,onOpenChange:p,wallet:t,publicBalance:s||0,onSuccess:()=>{p(!1),w()}}),e.jsx(pi,{open:f,onOpenChange:x,wallet:t,encryptedBalance:(null==v?void 0:v.encrypted)||0,onSuccess:()=>{x(!1),w()}})]}):e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ls,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"No wallet available. Please generate or import a wallet first."})]})})}function gi(e){if(!e||0===e.trim().length)return{isValid:!1,type:"invalid",error:"Input is required"};const t=e.trim();return function(e){return/^oct[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{44}$/.test(e)}(t)?{isValid:!0,type:"address"}:function(e){return/^[a-zA-Z0-9.-]+\.oct$/.test(e)}(t)?{isValid:!0,type:"ons"}:{isValid:!1,type:"invalid",error:'Invalid address format. Must be exactly 47 characters starting with "oct" or ONS domain ending with ".oct"'}}async function vi(e){const t=gi(e);if(!t.isValid)return{address:null,type:"invalid",error:t.error};if("address"===t.type)return{address:e.trim(),type:"address"};if("ons"===t.type)try{const t=await async function(e){try{const t=e.endsWith(".oct")?e.slice(0,-4):e,s=await fetch(`https://ons-api.xme.my.id/api/domains/resolve/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok){if(404===s.status)return null;throw new Error(`ONS resolution failed: ${s.status}`)}const r=await s.json();return r.verified&&"active"===r.status?r.address:null}catch(t){return console.error("Error resolving ONS domain:",t),null}}(e.trim());return t?{address:t,type:"ons"}:{address:null,type:"ons",error:"ONS domain not found or not verified"}}catch(s){return{address:null,type:"ons",error:"Failed to resolve ONS domain"}}return{address:null,type:"invalid",error:"Unknown validation error"}}function yi({wallet:t,balance:s,nonce:r,onBalanceUpdate:a,onNonceUpdate:n,onTransactionSuccess:i}){const[l,o]=de.useState([{address:"",amount:"",message:""}]),[c,d]=de.useState(!1),[m,u]=de.useState([]),{toast:h}=ar();de.useEffect(()=>{const e=setTimeout(async()=>{const e=await Promise.all(l.map(async(e,t)=>{if(!e.address.trim())return{...e,resolvedAddress:void 0,recipientType:void 0,isResolving:!1,resolutionError:void 0};const s=gi(e.address);if(!s.isValid)return{...e,resolvedAddress:void 0,recipientType:void 0,isResolving:!1,resolutionError:s.error};if("address"===s.type)return{...e,resolvedAddress:e.address.trim(),recipientType:"address",isResolving:!1,resolutionError:void 0};if("ons"===s.type)try{const t=await vi(e.address);return{...e,resolvedAddress:t.address||void 0,recipientType:"ons",isResolving:!1,resolutionError:t.error}}catch(r){return{...e,resolvedAddress:void 0,recipientType:"ons",isResolving:!1,resolutionError:"Failed to resolve ONS domain"}}return e}));o(e)},500);return()=>clearTimeout(e)},[l.map(e=>e.address).join(",")]);const p=(e,t,s)=>{const r=l.map((r,a)=>a===e?{...r,[t]:s}:r);o(r)},f=()=>{for(const e of l){if(!e.resolvedAddress||!e.amount)return!1;if(isNaN(Number(e.amount))||Number(e.amount)<=0)return!1;if(e.isResolving)return!1;if(e.resolutionError)return!1}return!0},x=()=>l.reduce((e,t)=>e+(Number(t.amount)||0),0),g=e=>e<1e3?.001:.003,v=()=>l.reduce((e,t)=>{const s=Number(t.amount)||0;return e+g(s)},0);if(!t)return e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ls,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"No wallet available. Please generate or import a wallet first."})]})});l.filter(e=>e.address&&Number(e.amount||0)>0);const y=x(),w=v(),j=y+w,b=s||0;return e.jsxs(bt,{children:[e.jsx(Nt,{children:e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5"}),"Multi Send"]})}),e.jsxs(Ct,{className:"space-y-6",children:[e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_s,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"Multi-send will create separate transactions for each recipient. Each transaction has its own fee based on the amount sent."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{children:"From Address"}),e.jsx("div",{className:"p-3 bg-muted rounded-md font-mono text-sm break-all",children:t.address})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{children:"Current Balance"}),e.jsxs("div",{className:"p-3 bg-muted rounded-md font-mono text-sm",children:[b.toFixed(8)," OCT"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(mr,{className:"text-base font-medium",children:"Recipients"}),e.jsxs(zt,{variant:"secondary",children:[l.length," recipient",1!==l.length?"s":""]})]}),l.map((t,s)=>e.jsx(bt,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Recipient ",s+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.amount&&e.jsxs(zt,{variant:"outline",className:"text-xs",children:["Fee: ",g(Number(t.amount)||0).toFixed(3)," OCT"]}),l.length>1&&e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>(e=>{l.length>1&&o(l.filter((t,s)=>s!==e))})(s),children:e.jsx(Ps,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:`address-${s}`,children:"Address"}),e.jsx(ir,{id:`address-${s}`,placeholder:"oct... or domain.oct",value:t.address,onChange:e=>p(s,"address",e.target.value),className:"font-mono"}),t.isResolving&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ys,{className:"h-4 w-4 animate-spin"}),"Resolving..."]}),t.recipientType&&!t.isResolving&&e.jsxs("div",{className:"space-y-1",children:["address"===t.recipientType&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-xs text-green-600",children:"Valid address"})]}),"ons"===t.recipientType&&t.resolvedAddress&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-xs text-blue-600",children:"ONS resolved"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground font-mono break-all",children:[" ",t.resolvedAddress]})]}),t.resolutionError&&e.jsx("div",{className:"text-xs text-red-600 mt-1",children:t.resolutionError})]}),t.address.trim()&&!t.recipientType&&!t.isResolving&&t.resolutionError&&e.jsx("div",{className:"text-xs text-red-600 mt-1",children:t.resolutionError})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:`amount-${s}`,children:"Amount (OCT)"}),e.jsx(ir,{id:`amount-${s}`,type:"number",placeholder:"0.00000000",value:t.amount,onChange:e=>p(s,"amount",e.target.value),step:"0.1",min:"0"})]})]}),e.jsxs("div",{className:"space-y-2 mt-3",children:[e.jsxs(mr,{htmlFor:`message-${s}`,className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"Message ( Optional )"]}),e.jsx(lr,{id:`message-${s}`,placeholder:"Enter an optional message for this recipient (max 1024 characters)",value:t.message,onChange:e=>p(s,"message",e.target.value),maxLength:1024,rows:2}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"This message will be included in the transaction to this recipient"}),e.jsxs("span",{children:[t.message.length,"/1024"]})]})]})]})},s)),e.jsxs(Lt,{variant:"outline",onClick:()=>{o([...l,{address:"",amount:"",message:""}])},className:"w-full",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Add Recipient"]})]}),m.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(mr,{className:"text-base font-medium",children:"Transaction Results"}),m.map((t,s)=>{var r,a;return e.jsx("div",{className:"rounded-lg p-3 sm:p-4 "+(t.success?"bg-green-50 border border-green-200 dark:bg-green-950/50 dark:border-green-800":"bg-red-50 border border-red-200 dark:bg-red-950/50 dark:border-red-800"),children:e.jsxs("div",{className:"flex items-start space-x-2",children:[t.success?e.jsx(rs,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2 mt-0.5 flex-shrink-0"}):e.jsx(_s,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium break-words "+(t.success?"text-green-800 dark:text-green-200":"text-red-800 dark:text-red-200"),children:t.success?"Success":"Failed"}),e.jsxs("div",{className:"mt-1 space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"To:"})," ",e.jsx("span",{className:"font-mono break-all",children:t.recipient})]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Amount:"})," ",t.amount," OCT"]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Fee:"})," ",g(Number(t.amount)||0).toFixed(3)," OCT"]}),(null==(r=l.find(e=>e.address===t.recipient))?void 0:r.message)&&e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Message:"})," ",null==(a=l.find(e=>e.address===t.recipient))?void 0:a.message]})]}),t.success&&t.hash&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm",children:"Transaction Hash:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center mt-1 space-y-1 sm:space-y-0 sm:space-x-2",children:[e.jsx("code",{className:"text-xs bg-green-100 dark:bg-green-900/50 px-2 py-1 rounded font-mono break-all text-green-800 dark:text-green-200 flex-1",children:t.hash}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>(async(e,t)=>{try{await navigator.clipboard.writeText(e),h({title:"Copied!",description:`${t} copied to clipboard`})}catch(s){h({title:"Error",description:"Copy failed",variant:"destructive"})}})(t.hash,"Transaction Hash"),className:"h-6 w-6 p-0",children:e.jsx(ls,{className:"h-3 w-3"})}),e.jsx("a",{href:`https://octrascan.io/tx/${t.hash}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center h-6 w-6 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"View on OctraScan",children:e.jsx(ds,{className:"h-3 w-3"})})]})]})]}),t.error&&e.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 break-words",children:t.error})]})]})},s)})]}),e.jsx(Kt,{}),e.jsxs("div",{className:"p-3 sm:p-4 bg-muted rounded-md space-y-3",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Fee Calculation"}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm",children:[e.jsx("div",{className:"text-muted-foreground",children:"Fee structure: 0.001 OCT for amounts under 1000, 0.003 OCT for amounts 1000 and above"}),l.filter(e=>e.address&&Number(e.amount)>0).map((t,s)=>{const r=Number(t.amount)||0,a=g(r);return e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("span",{children:["Recipient ",s+1," (",r.toFixed(6)," OCT):"]}),e.jsxs("span",{className:"font-mono",children:[a.toFixed(3)," OCT"]})]},s)})]})]}),e.jsxs("div",{className:"p-3 sm:p-4 bg-muted rounded-md space-y-2",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Transaction Summary"}),e.jsxs("div",{className:"space-y-1 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Total Recipients:"}),e.jsx("span",{children:l.filter(e=>e.resolvedAddress&&Number(e.amount)>0).length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{className:"font-mono",children:[y.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Total Fees:"}),e.jsxs("span",{className:"font-mono",children:[w.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center font-medium",children:[e.jsx("span",{children:"Total Cost:"}),e.jsxs("span",{className:"font-mono",children:[j.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Current Balance:"}),e.jsxs("span",{className:"font-mono",children:[b.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Remaining Balance:"}),e.jsxs("span",{className:"font-mono "+(b-j>=0?"text-green-600":"text-red-600"),children:[(b-j).toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Current Nonce:"}),e.jsx("span",{className:"font-mono",children:r})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Next Nonce:"}),e.jsx("span",{className:"font-mono",children:r+l.filter(e=>e.resolvedAddress&&Number(e.amount)>0).length})]}),j>b&&e.jsx("div",{className:"text-red-600 text-xs mt-2 break-words",children:" Insufficient balance for this transaction"})]})]}),e.jsx(Lt,{onClick:async()=>{var e;if(!t)return void h({title:"Error",description:"No wallet",variant:"destructive"});if(!f())return void h({title:"Error",description:"Fill all fields",variant:"destructive"});const r=x(),c=v(),m=r+c;if(null!==s&&m>s)h({title:"Error",description:`Insufficient balance. Need ${m.toFixed(8)} OCT (${r.toFixed(8)} + ${c.toFixed(8)} fees)`,variant:"destructive"});else{for(let e=0;e<l.length;e++){const t=l[e];if(t.message&&t.message.length>1024)return void h({title:"Error",description:`Message for recipient ${e+1} is too long (max 1024 characters)`,variant:"destructive"})}d(!0),u([]);try{let s=(await ii(t.address)).nonce;const r=l.filter(e=>e.address&&Number(e.amount)>0),c=[],d=5,m=[];for(let e=0;e<r.length;e+=d)m.push(r.slice(e,e+d));for(let a=0;a<m.length;a++){const r=m[a],n=[];for(let e=0;e<r.length;e++){const i=r[e],l=i.resolvedAddress,o=s+1+(a*d+e),c=mi(t.address,l,Number(i.amount),o,t.privateKey,t.publicKey||"",i.message||void 0);n.push(ri(c).then(e=>({...e,recipient:i.address,amount:i.amount})))}const i=await Promise.allSettled(n);for(let t=0;t<i.length;t++){const s=i[t],a=r[t];"fulfilled"===s.status?c.push(s.value):c.push({success:!1,error:(null==(e=s.reason)?void 0:e.message)||"Unknown error",recipient:a.address,amount:a.amount})}a<m.length-1&&await new Promise(e=>setTimeout(e,50))}u(c);const p=c.filter(e=>e.success).length;if(p>0){h({title:"Transactions Sent!",description:`${p} out of ${c.length} transactions sent successfully`}),p===c.length&&o([{address:"",amount:"",message:""}]);n(s+p),setTimeout(async()=>{try{const e=await ii(t.address);a(e.balance),n(e.nonce)}catch(e){console.error("Failed to refresh balance after transaction:",e)}},2e3),i()}}catch(p){console.error("Multi-send error:",p),h({title:"Error",description:"Send failed",variant:"destructive"})}finally{d(!1)}}},disabled:c||!f()||j>b||l.some(e=>e.message&&e.message.length>1024)||l.some(e=>e.isResolving),className:"w-full text-sm sm:text-base",size:"lg",children:c?"Sending...":`Send to ${l.filter(e=>e.resolvedAddress&&Number(e.amount)>0).length} Recipients`})]})]})}function wi({wallet:t,balance:s,nonce:r,onBalanceUpdate:a,onNonceUpdate:n,onTransactionSuccess:i}){const[l,o]=de.useState(""),[c,d]=de.useState(null),[m,u]=de.useState(null),[h,p]=de.useState(!1),[f,x]=de.useState(null),[g,v]=de.useState(""),[y,w]=de.useState(""),[j,b]=de.useState(!1),[N,k]=de.useState(null),{toast:C}=ar();de.useEffect(()=>{const e=setTimeout(async()=>{if(!l.trim())return d(null),u(null),void x(null);const e=gi(l);if(!e.isValid)return d(null),u(null),void x(e.error||"Invalid input");if("address"===e.type)return d(l.trim()),u("address"),void x(null);if("ons"===e.type){p(!0),x(null);try{const e=await vi(l);e.address?(d(e.address),u("ons"),x(null)):(d(null),u("ons"),x(e.error||"Failed to resolve ONS domain"))}catch(t){d(null),u("ons"),x("Failed to resolve ONS domain")}finally{p(!1)}}},500);return()=>clearTimeout(e)},[l]);const S=e=>{const t=parseFloat(e);return!isNaN(t)&&t>0},E=e=>e<1e3?.001:.003;if(!t)return e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ls,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"No wallet available. Please generate or import a wallet first."})]})});const A=parseFloat(g)||0,T=E(A),R=A+T,I=s||0;return e.jsxs(bt,{children:[e.jsx(Nt,{children:e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5"}),"Send Transaction"]})}),e.jsxs(Ct,{className:"space-y-6",children:[e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_s,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"Double-check the recipient address before sending. Transactions cannot be reversed."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{children:"From Address"}),e.jsx("div",{className:"p-3 bg-muted rounded-md font-mono text-sm break-all",children:t.address})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{children:"Current Balance"}),e.jsxs("div",{className:"p-3 bg-muted rounded-md font-mono text-sm",children:[I.toFixed(8)," OCT"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"recipient",children:"Recipient Address"}),e.jsx(ir,{id:"recipient",placeholder:"oct... or domain.oct",value:l,onChange:e=>o(e.target.value),className:"font-mono"}),h&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ys,{className:"h-4 w-4 animate-spin"}),"Resolving ONS domain..."]}),m&&!h&&e.jsxs("div",{className:"space-y-2",children:["address"===m&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-600",children:"Valid Octra address"})]}),"ons"===m&&c&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-blue-600",children:"ONS domain resolved"})]}),e.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-950/50 rounded text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Resolves to:"}),e.jsx("div",{className:"font-mono text-xs break-all mt-1",children:c})]})]}),f&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:f})]}),l.trim()&&!m&&!h&&f&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:f})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"amount",children:"Amount ( OCT )"}),e.jsx(ir,{id:"amount",type:"number",placeholder:"0.00000000",value:g,onChange:e=>v(e.target.value),step:"0.1",min:"0"}),g&&!S(g)&&e.jsx("p",{className:"text-sm text-red-600",children:"Invalid amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(mr,{htmlFor:"message",className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"Message ( Optional )"]}),e.jsx(lr,{id:"message",placeholder:"Enter an optional message (max 1024 characters)",value:y,onChange:e=>w(e.target.value),maxLength:1024,rows:3}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"This message will be included in the transaction"}),e.jsxs("span",{children:[y.length,"/1024"]})]})]}),g&&S(g)&&e.jsxs("div",{className:"p-3 bg-muted rounded-md space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(Zt,{className:"h-4 w-4"}),"Fee Calculation"]}),e.jsxs("div",{className:"space-y-1 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Amount:"}),e.jsxs("span",{className:"font-mono",children:[A.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:["Fee (",A<1e3?"< 1000":" 1000"," OCT):"]}),e.jsxs("span",{className:"font-mono",children:[T.toFixed(8)," OCT"]})]}),e.jsx(Kt,{}),e.jsxs("div",{className:"flex justify-between items-center font-medium",children:[e.jsx("span",{children:"Total Cost:"}),e.jsxs("span",{className:"font-mono",children:[R.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Remaining Balance:"}),e.jsxs("span",{className:"font-mono "+(I-R>=0?"text-green-600":"text-red-600"),children:[(I-R).toFixed(8)," OCT"]})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:"Fee structure: 0.001 OCT for amounts < 1000, 0.003 OCT for amounts  1000"})]})]}),N&&e.jsx("div",{className:"rounded-lg p-4 "+(N.success?"bg-green-50 border border-green-200 dark:bg-green-950/50 dark:border-green-800":"bg-red-50 border border-red-200 dark:bg-red-950/50 dark:border-red-800"),children:e.jsxs("div",{className:"flex items-start space-x-2",children:[N.success?e.jsx(rs,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2 mt-0.5 flex-shrink-0"}):e.jsx(_s,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium "+(N.success?"text-green-800 dark:text-green-200":"text-red-800 dark:text-red-200"),children:N.success?"Transaction Sent Successfully!":"Transaction Failed"}),N.success&&N.hash&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm",children:"Transaction Hash:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center mt-1 space-y-1 sm:space-y-0 sm:space-x-2",children:[e.jsx("code",{className:"text-xs bg-green-100 dark:bg-green-900/50 px-2 py-1 rounded font-mono break-all text-green-800 dark:text-green-200 flex-1",children:N.hash}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>(async(e,t)=>{try{await navigator.clipboard.writeText(e),C({title:"Copied!",description:`${t} copied to clipboard`})}catch(s){C({title:"Error",description:"Copy failed",variant:"destructive"})}})(N.hash,"Transaction Hash"),className:"h-6 w-6 p-0",children:e.jsx(ls,{className:"h-3 w-3"})}),e.jsx("a",{href:`https://octrascan.io/tx/${N.hash}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center h-6 w-6 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"View on OctraScan",children:e.jsx(ds,{className:"h-3 w-3"})})]})]})]}),N.error&&e.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm mt-1 break-words",children:N.error})]})]})}),e.jsx(Lt,{onClick:async()=>{if(!t)return void C({title:"Error",description:"No wallet connected",variant:"destructive"});const e=c;if(!e)return void C({title:"Error",description:f||"Invalid recipient address",variant:"destructive"});if(!S(g))return void C({title:"Error",description:"Invalid amount",variant:"destructive"});const r=parseFloat(g),l=E(r),d=r+l;if(null!==s&&d>s)C({title:"Error",description:`Insufficient balance. Need ${d.toFixed(8)} OCT (${r.toFixed(8)} + ${l.toFixed(8)} fee)`,variant:"destructive"});else if(y&&y.length>1024)C({title:"Error",description:"Message too long (max 1024 characters)",variant:"destructive"});else{b(!0),k(null);try{const s=(await ii(t.address)).nonce,l=mi(t.address,e,r,s+1,t.privateKey,t.publicKey||"",y||void 0),c=await ri(l);k(c),c.success?(C({title:"Transaction Sent!",description:"Transaction has been submitted successfully"}),o(""),v(""),w(""),n(s+1),setTimeout(async()=>{try{const e=await ii(t.address);a(e.balance),n(e.nonce)}catch(e){console.error("Failed to refresh balance after transaction:",e)}},2e3),i()):C({title:"Transaction Failed",description:c.error||"Unknown error occurred",variant:"destructive"})}catch(m){console.error("Send transaction error:",m),C({title:"Error",description:"Failed to send transaction",variant:"destructive"}),k({success:!1,error:m instanceof Error?m.message:"Unknown error"})}finally{b(!1)}}},disabled:j||!c||h||!S(g)||R>I||Boolean(y&&y.length>1024),className:"w-full",size:"lg",children:j?"Sending...":`Send ${A.toFixed(8)} OCT`})]})]})}function ji({wallet:t,onTransactionSuccess:s}){const[r,a]=de.useState(""),[n,i]=de.useState(null),[l,o]=de.useState(null),[c,d]=de.useState(!1),[m,u]=de.useState(null),[h,p]=de.useState(""),[f,x]=de.useState(!1),[g,v]=de.useState(!1),[y,w]=de.useState(null),[j,b]=de.useState(null),[N,k]=de.useState(null),{toast:C}=ar();de.useEffect(()=>{t&&li(t.address,t.privateKey).then(w)},[t]),de.useEffect(()=>{const e=setTimeout(async()=>{if(!r.trim())return i(null),o(null),u(null),void b(null);const e=gi(r);if(!e.isValid)return i(null),o(null),u(e.error||"Invalid input"),void b(null);if("address"===e.type)return i(r.trim()),o("address"),void u(null);if("ons"===e.type){d(!0),u(null);try{const e=await vi(r);e.address?(i(e.address),o("ons"),u(null)):(i(null),o("ons"),u(e.error||"Failed to resolve ONS domain"))}catch(t){i(null),o("ons"),u("Failed to resolve ONS domain")}finally{d(!1)}}},500);return()=>clearTimeout(e)},[r,null==t?void 0:t.address]),de.useEffect(()=>{const e=setTimeout(async()=>{if(n)if(n!==(null==t?void 0:t.address)){v(!0);try{const e=await si(n);b(e)}catch(e){b({error:"Failed to check recipient"})}finally{v(!1)}}else b({error:"Cannot send to yourself"});else b(null)},300);return()=>clearTimeout(e)},[n,null==t?void 0:t.address]);const S=e=>{const t=parseFloat(e);return!isNaN(t)&&t>0},E=async(e,t)=>{try{await navigator.clipboard.writeText(e),C({title:"Copied!",description:`${t} copied to clipboard`})}catch(s){C({title:"Error",description:"Copy failed",variant:"destructive"})}};return t?!y||y.encrypted<=0?e.jsxs(bt,{children:[e.jsx(Nt,{children:e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-5 w-5"}),"Private Transfer"]})}),e.jsx(Ct,{children:e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_s,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"No encrypted balance available. You need to encrypt some balance first to make private transfers."})]})})})]}):e.jsxs(bt,{children:[e.jsx(Nt,{children:e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-5 w-5"}),"Private Transfer"]})}),e.jsxs(Ct,{className:"space-y-6",children:[e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Rs,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"Private transfers use your encrypted balance and are completely anonymous. The recipient can claim the transfer in the next epoch."})]})}),e.jsx("div",{className:"p-3 bg-muted rounded-md",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Available Private Balance"}),e.jsxs("span",{className:"font-mono text-lg font-bold text-yellow-600",children:[y.encrypted.toFixed(8)," OCT"]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"recipient",children:"Recipient Address"}),e.jsx(ir,{id:"recipient",placeholder:"oct... or domain.oct",value:r,onChange:e=>a(e.target.value),className:"font-mono"}),(c||g)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ys,{className:"h-4 w-4 animate-spin"}),c?"Resolving...":"Checking recipient..."]}),l&&!c&&!g&&e.jsxs("div",{className:"space-y-2",children:["address"===l&&n&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-600",children:"Valid Octra address"})]}),"ons"===l&&n&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-blue-600",children:"ONS domain resolved"})]}),e.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-950/50 rounded text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Resolves to:"}),e.jsx("div",{className:"font-mono text-xs break-all mt-1",children:n})]})]}),m&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:m}),j&&!j.error&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Balance: ",j.balance||"0"," OCT"]}),!j.has_public_key&&e.jsx("div",{className:"text-sm text-red-600",children:" Recipient has no public key. They need to make a transaction first."})]})]}),r.trim()&&!l&&!c&&m&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:m}),j&&!g&&j.error&&e.jsx("div",{className:"space-y-2",children:j.error?e.jsx("div",{className:"text-sm text-red-600",children:j.error}):e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-600",children:"Valid recipient"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Balance: ",j.balance||"0"," OCT"]}),!j.has_public_key&&e.jsx("div",{className:"text-sm text-red-600",children:" Recipient has no public key. They need to make a transaction first."})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"amount",children:"Amount (OCT)"}),e.jsx(ir,{id:"amount",type:"number",placeholder:"0.00000000",value:h,onChange:e=>p(e.target.value),step:"0.1",min:"0",max:y.encrypted}),h&&S(h)&&parseFloat(h)>y.encrypted&&e.jsx("p",{className:"text-sm text-red-600",children:"Amount exceeds available encrypted balance"})]}),N&&e.jsx("div",{className:"rounded-lg p-4 "+(N.success?"bg-green-50 border border-green-200 dark:bg-green-950/50 dark:border-green-800":"bg-red-50 border border-red-200 dark:bg-red-950/50 dark:border-red-800"),children:e.jsxs("div",{className:"flex items-start space-x-2",children:[N.success?e.jsx(rs,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2 mt-0.5 flex-shrink-0"}):e.jsx(_s,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium "+(N.success?"text-green-800 dark:text-green-200":"text-red-800 dark:text-red-200"),children:N.success?"Private Transfer Sent Successfully!":"Private Transfer Failed"}),N.success&&N.tx_hash&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm",children:"Transaction Hash:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center mt-1 space-y-1 sm:space-y-0 sm:space-x-2",children:[e.jsx("code",{className:"text-xs bg-green-100 dark:bg-green-900/50 px-2 py-1 rounded font-mono break-all text-green-800 dark:text-green-200 flex-1",children:N.tx_hash}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>E(N.tx_hash,"Transaction Hash"),className:"h-6 w-6 p-0",children:e.jsx(ls,{className:"h-3 w-3"})}),e.jsx("a",{href:`https://octrascan.io/tx/${N.tx_hash}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center h-6 w-6 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"View on OctraScan",children:e.jsx(ds,{className:"h-3 w-3"})})]})]})]}),N.ephemeral_key&&e.jsxs("div",{children:[e.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm",children:"Ephemeral Key:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center mt-1 space-y-1 sm:space-y-0 sm:space-x-2",children:[e.jsx("code",{className:"text-xs bg-green-100 dark:bg-green-900/50 px-2 py-1 rounded font-mono break-all text-green-800 dark:text-green-200 flex-1",children:N.ephemeral_key}),e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>E(N.ephemeral_key,"Ephemeral Key"),className:"h-6 w-6 p-0",children:e.jsx(ls,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm",children:"Recipient can claim in next epoch"})]}),N.error&&e.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm mt-1 break-words",children:N.error})]})]})}),e.jsx(Lt,{onClick:async()=>{if(!t)return void C({title:"Error",description:"No wallet connected",variant:"destructive"});const e=n;if(!e)return void C({title:"Error",description:m||"Invalid recipient address",variant:"destructive"});if(!S(h))return void C({title:"Error",description:"Invalid amount",variant:"destructive"});if(!j||j.error)return void C({title:"Error",description:(null==j?void 0:j.error)||"Invalid recipient",variant:"destructive"});if(!j.has_public_key)return void C({title:"Error",description:"Recipient has no public key. They need to make a transaction first.",variant:"destructive"});const r=parseFloat(h);if(!y||r>y.encrypted)C({title:"Error",description:"Insufficient encrypted balance",variant:"destructive"});else{x(!0),k(null);try{const n=await oi(t.address,e,r,t.privateKey);k(n),n.success?(C({title:"Private Transfer Sent!",description:"Private transfer has been submitted successfully"}),a(""),p(""),b(null),li(t.address,t.privateKey).then(w),s()):C({title:"Transfer Failed",description:n.error||"Unknown error occurred",variant:"destructive"})}catch(i){console.error("Private transfer error:",i),C({title:"Error",description:"Failed to send private transfer",variant:"destructive"}),k({success:!1,error:i instanceof Error?i.message:"Unknown error"})}finally{x(!1)}}},disabled:f||!n||c||!S(h)||!j||j.error||!j.has_public_key||parseFloat(h)>y.encrypted,className:"w-full",size:"lg",children:f?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending Private Transfer..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Send Private Transfer"]})})]})]}):e.jsxs(Ft,{children:[e.jsx(Ls,{className:"h-4 w-4"}),e.jsx(Mt,{children:"No wallet available. Please generate or import a wallet first."})]})}function bi({wallet:t,onTransactionSuccess:s}){const[r,a]=de.useState([]),[n,i]=de.useState(!1),[l,o]=de.useState(null),[c,d]=de.useState(!1),{toast:m}=ar(),u=async()=>{if(t){i(!0);try{const e=await ci(t.address,t.privateKey),s=await Promise.all(e.map(async e=>{let s=null;if(e.encrypted_data&&e.ephemeral_key)try{const r=await async function(e,t){const s=me.sign.keyPair.fromSecretKey(Vs(e+"=".repeat(4-e.length%4))).publicKey,r=Vs(t);let a,n;Buffer.compare(Buffer.from(r),Buffer.from(s))<0?(a=r,n=s):(a=s,n=r);const i=new Uint8Array(a.length+n.length);i.set(a),i.set(n,a.length);const l=await crypto.subtle.digest("SHA-256",i),o=new Uint8Array(l),c=(new TextEncoder).encode("OCTRA_SYMMETRIC_V1"),d=new Uint8Array(o.length+c.length);d.set(o),d.set(c,o.length);const m=await crypto.subtle.digest("SHA-256",d);return new Uint8Array(m).slice(0,32)}(t.privateKey,e.ephemeral_key),a=await async function(e,t){if(!e||!e.startsWith("v2|"))return null;try{const s=Vs(e.slice(3));if(s.length<28)return null;const r=s.slice(0,12),a=s.slice(12),n=await crypto.subtle.importKey("raw",t,{name:"AES-GCM"},!1,["decrypt"]),i=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},n,a);return parseInt((new TextDecoder).decode(i))}catch{return null}}(e.encrypted_data,r);null!==a&&(s=a/1e6)}catch(r){console.error("Failed to decrypt amount for transfer:",e.id,r)}return{...e,decryptedAmount:s}}));a(s),s.length>0&&m({title:"Transfers Loaded",description:`Found ${s.length} claimable transfers`})}catch(e){console.error("Error fetching transfers:",e),m({title:"Error",description:"Failed to fetch pending transfers",variant:"destructive"})}finally{i(!1)}}};de.useEffect(()=>{t&&u()},[t]);return t?e.jsxs(bt,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5"}),"Claim Private Transfers",r.length>0&&e.jsx(zt,{variant:"secondary",className:"ml-2",children:r.length})]}),e.jsxs(Lt,{variant:"outline",size:"sm",onClick:u,disabled:n,children:[e.jsx(Es,{className:"h-4 w-4 mr-2 "+(n?"animate-spin":"")}),"Refresh"]})]}),e.jsxs(Ct,{children:[r.length>1&&e.jsx("div",{className:"mb-4",children:e.jsx(Lt,{onClick:async()=>{if(t&&0!==r.length){d(!0);try{let a=0,n=0;const i=[];for(const s of r)try{const e=await di(t.address,t.privateKey,s.id);e.success?(a++,e.amount&&(n+=parseFloat(e.amount))):i.push(`Transfer ${s.id}: ${e.error||"Unknown error"}`),await new Promise(e=>setTimeout(e,500))}catch(e){i.push(`Transfer ${s.id}: ${e instanceof Error?e.message:"Unknown error"}`)}a>0&&(m({title:"Claim All Completed!",description:`Successfully claimed ${a} out of ${r.length} transfers${n>0?` (Total: ${n.toFixed(8)} OCT)`:""}`}),await u(),s()),i.length>0&&(console.error("Claim errors:",i),0===a&&m({title:"Claim All Failed",description:`Failed to claim any transfers. First error: ${i[0]}`,variant:"destructive"}))}catch(e){console.error("Claim all error:",e),m({title:"Error",description:"Failed to claim transfers",variant:"destructive"})}finally{d(!1)}}},disabled:c||null!==l,className:"w-full",variant:"default",children:c?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4 mr-2 animate-spin"}),"Claiming All Transfers..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Claim All ",r.length," Transfers"]})})}),n?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading pending transfers..."}),[...Array(2)].map((t,s)=>e.jsxs("div",{className:"space-y-2 p-4 border rounded-lg",children:[e.jsx(Zn,{className:"h-4 w-full"}),e.jsx(Zn,{className:"h-4 w-3/4"}),e.jsx(Zn,{className:"h-8 w-24"})]},s))]}):0===r.length?e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ps,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"No pending private transfers found. When someone sends you a private transfer, it will appear here for claiming."})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Found ",r.length," claimable transfer",1!==r.length?"s":""]}),r.map((r,a)=>{return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Transfer #",r.id]}),e.jsxs(zt,{variant:"outline",className:"text-xs",children:["E.",r.epoch_id]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["From: ",r.sender.slice(0,12),"...",r.sender.slice(-8)]})]}),e.jsxs("div",{className:"text-right space-y-1",children:[e.jsx("div",{className:"font-mono font-bold text-green-600",children:null!==r.decryptedAmount?`${r.decryptedAmount.toFixed(8)} OCT`:"[Encrypted]"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:(n=r.created_at,new Date(864e5*(n-2440587.5))).toLocaleDateString()})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Lt,{onClick:()=>(async e=>{if(t){o(e);try{const r=await di(t.address,t.privateKey,e);r.success?(m({title:"Transfer Claimed!",description:`Successfully claimed ${r.amount||"transfer"}`}),await u(),s()):m({title:"Claim Failed",description:r.error||"Unknown error occurred",variant:"destructive"})}catch(r){console.error("Claim error:",r),m({title:"Error",description:"Failed to claim transfer",variant:"destructive"})}finally{o(null)}}})(r.id),disabled:l===r.id||c,size:"sm",className:"flex items-center gap-2",children:l===r.id||c?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4 animate-spin"}),c?"Processing...":"Claiming..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"h-4 w-4"}),"Claim Transfer"]})})})]},r.id);var n})]})]})]}):e.jsxs(Ft,{children:[e.jsx(Ls,{className:"h-4 w-4"}),e.jsx(Mt,{children:"No wallet available. Please generate or import a wallet first."})]})}var Ni="Radio",[ki,Ci]=l(Ni),[Si,Ei]=ki(Ni),Ai=de.forwardRef((t,s)=>{const{__scopeRadio:r,name:a,checked:n=!1,required:l,disabled:c,value:m="on",onCheck:u,form:h,...p}=t,[f,x]=de.useState(null),g=o(s,e=>x(e)),v=de.useRef(!1),y=!f||(h||!!f.closest("form"));return e.jsxs(Si,{scope:r,checked:n,disabled:c,children:[e.jsx(i.button,{type:"button",role:"radio","aria-checked":n,"data-state":Oi(n),"data-disabled":c?"":void 0,disabled:c,value:m,...p,ref:g,onClick:d(t.onClick,e=>{n||null==u||u(),y&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})}),y&&e.jsx(Ii,{control:f,bubbles:!v.current,name:a,value:m,checked:n,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});Ai.displayName=Ni;var Ti="RadioIndicator",Ri=de.forwardRef((t,s)=>{const{__scopeRadio:r,forceMount:a,...n}=t,l=Ei(Ti,r);return e.jsx(m,{present:a||l.checked,children:e.jsx(i.span,{"data-state":Oi(l.checked),"data-disabled":l.disabled?"":void 0,...n,ref:s})})});Ri.displayName=Ti;var Ii=t=>{const{control:s,checked:r,bubbles:a=!0,...n}=t,i=de.useRef(null),l=hr(r),o=u(s);return de.useEffect(()=>{const e=i.current,t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==r&&s){const t=new Event("click",{bubbles:a});s.call(e,r),e.dispatchEvent(t)}},[l,r,a]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:i,style:{...t.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Oi(e){return e?"checked":"unchecked"}var Pi=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],_i="RadioGroup",[Fi,Mi]=l(_i,[U,Ci]),Bi=U(),Li=Ci(),[Ui,zi]=Fi(_i),Di=de.forwardRef((t,s)=>{const{__scopeRadioGroup:r,name:a,defaultValue:n,value:l,required:o=!1,disabled:d=!1,orientation:m,dir:u,loop:h=!0,onValueChange:p,...f}=t,x=Bi(r),g=L(u),[v,y]=c({prop:l,defaultProp:n,onChange:p});return e.jsx(Ui,{scope:r,name:a,required:o,disabled:d,value:v,onValueChange:y,children:e.jsx(z,{asChild:!0,...x,orientation:m,dir:g,loop:h,children:e.jsx(i.div,{role:"radiogroup","aria-required":o,"aria-orientation":m,"data-disabled":d?"":void 0,dir:g,...f,ref:s})})})});Di.displayName=_i;var Wi="RadioGroupItem",$i=de.forwardRef((t,s)=>{const{__scopeRadioGroup:r,disabled:a,...n}=t,i=zi(Wi,r),l=i.disabled||a,c=Bi(r),m=Li(r),u=de.useRef(null),h=o(s,u),p=i.value===n.value,f=de.useRef(!1);return de.useEffect(()=>{const e=e=>{Pi.includes(e.key)&&(f.current=!0)},t=()=>f.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),e.jsx(D,{asChild:!0,...c,focusable:!l,active:p,children:e.jsx(Ai,{disabled:l,required:i.required,checked:p,...m,...n,name:i.name,ref:h,onCheck:()=>i.onValueChange(n.value),onKeyDown:d(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:d(n.onFocus,()=>{var e;f.current&&(null==(e=u.current)||e.click())})})})});$i.displayName=Wi;var Vi=de.forwardRef((t,s)=>{const{__scopeRadioGroup:r,...a}=t,n=Li(r);return e.jsx(Ri,{...n,...a,ref:s})});Vi.displayName="RadioGroupIndicator";var Ki=Di,Hi=$i,qi=Vi;const Gi=de.forwardRef(({className:t,...s},r)=>e.jsx(Ki,{className:jt("grid gap-2",t),...s,ref:r}));Gi.displayName=Ki.displayName;const Ji=de.forwardRef(({className:t,...s},r)=>e.jsx(Hi,{ref:r,className:jt("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(qi,{className:"flex items-center justify-center",children:e.jsx(Ir,{className:"h-3.5 w-3.5 fill-primary"})})}));function Yi({wallet:t,balance:s,nonce:r,onBalanceUpdate:a,onNonceUpdate:n,onTransactionSuccess:i}){const[l,o]=de.useState([]),[c,d]=de.useState("same"),[m,u]=de.useState(""),[h,p]=de.useState(!1),[f,x]=de.useState(!1),[g,v]=de.useState(!1),[y,w]=de.useState([]),{toast:j}=ar(),b=e=>e<1e3?.001:.003,N=async e=>{if(e.name.endsWith(".txt")){if("same"===c&&(!m||isNaN(Number(m))||Number(m)<=0))return j({title:"Invalid Amount",description:"Please enter a valid amount for same amount mode",variant:"destructive"}),void E();x(!0);try{const t=await e.text(),s=await(async e=>{const t=e.split("\n").filter(e=>e.trim()),s=[];for(const a of t){const e=a.trim();if(!e)continue;let t="",n="",i="",l=!1,o="";if("different"===c){const s=e.split(/[,\s]+/);s.length>=2?(t=s[0],n=s[1]):(t=s[0],i="Amount missing for different amount mode")}else t=e,n=m;const d=gi(t);if(d.isValid){if("address"===d.type)o=t,l=!0;else if("ons"===d.type)try{const e=await vi(t);e.address?(o=e.address,l=!0):(i=e.error||"Failed to resolve ONS domain",l=!1)}catch(r){i="Failed to resolve ONS domain",l=!1}i?l=!1:"same"===c||(l=!!n&&!isNaN(Number(n))&&Number(n)>0)}else i=d.error||"Invalid address format",l=!1;"different"===c&&(!n||isNaN(Number(n))||Number(n)<=0)&&(i="Invalid amount",l=!1),s.push({address:t,resolvedAddress:o,amount:n,isValid:l,error:i})}return s})(t);if(0===s.length)return void j({title:"Empty File",description:"No valid addresses found in the file",variant:"destructive"});o(s);const r=s.filter(e=>e.isValid).length,a=s.length-r;j({title:"File Processed",description:`Found ${r} valid addresses${a>0?` and ${a} invalid entries`:""}`})}catch(t){j({title:"File Processing Error",description:"Failed to process the file",variant:"destructive"})}finally{x(!1)}}else j({title:"Invalid File",description:"Please upload a .txt file",variant:"destructive"})},k=de.useCallback(e=>{e.preventDefault(),p(!1);const t=e.dataTransfer.files[0];t&&N(t)},[c,m]),C=de.useCallback(e=>{e.preventDefault(),p(!0)},[]),S=de.useCallback(e=>{e.preventDefault(),p(!1)},[]),E=()=>{o([]),w([]);const e=document.getElementById("file-upload");e&&(e.value="")};if(!t)return e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ls,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"No wallet available. Please generate or import a wallet first."})]})});const A=l.filter(e=>e.isValid),T=A.reduce((e,t)=>e+Number(t.amount||0),0),R=A.reduce((e,t)=>e+b(Number(t.amount||0)),0),I=T+R,O=s||0;return e.jsxs(bt,{children:[e.jsx(Nt,{children:e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"h-5 w-5"}),"Lightning Multi Send",e.jsx(zt,{variant:"secondary",className:"text-xs",children:"File Upload"})]})}),e.jsxs(Ct,{className:"space-y-6",children:[e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ds,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"Upload a .txt file with addresses to send OCT quickly. Lightning fast with no messages for maximum speed."})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(mr,{className:"text-base font-medium",children:"Amount Mode"}),e.jsxs(Gi,{value:c,onValueChange:e=>d(e),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ji,{value:"same",id:"same"}),e.jsx(mr,{htmlFor:"same",children:"Same amount for all addresses"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ji,{value:"different",id:"different"}),e.jsx(mr,{htmlFor:"different",children:"Different amount for each address"})]})]}),"same"===c&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"same-amount",children:"Amount per Address (OCT)"}),e.jsx(ir,{id:"same-amount",type:"number",placeholder:"0.00000000",value:m,onChange:e=>u(e.target.value),step:"0.1",min:"0"})]})]}),e.jsxs("div",{className:"p-3 bg-muted rounded-md",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"File Format (.txt)"}),e.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:"same"===c?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:" One address or ONS domain per line"}),e.jsx("div",{children:" Example:"}),e.jsxs("div",{className:"font-mono bg-background p-2 rounded mt-1",children:["oct1234567890abcdef1234567890abcdef12345678",e.jsx("br",{}),"alice.oct"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:" Format: address,amount or address amount"}),e.jsx("div",{children:" One entry per line"}),e.jsx("div",{children:" Support .oct domain"}),e.jsx("div",{children:" Example:"}),e.jsxs("div",{className:"font-mono bg-background p-2 rounded mt-1",children:["oct1234567890abcdef1234567890abcdef12345678,1.5",e.jsx("br",{}),"bob.oct,0.5",e.jsx("br",{}),"oct1234567890abcdef1234567890abcdef12345678 1.5",e.jsx("br",{}),"foo.oct 0.3"]})]})})]}),e.jsx("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors "+(h?"border-primary bg-primary/5":"border-muted-foreground/25"),onDrop:k,onDragOver:C,onDragLeave:S,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(Ms,{className:"h-12 w-12 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium",children:"Drop .txt file containing your octra address here"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supports Octra addresses and ONS domains"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:".txt",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];s&&N(s)},className:"hidden",id:"file-upload",disabled:f}),e.jsxs(Lt,{variant:"outline",onClick:()=>{var e;return null==(e=document.getElementById("file-upload"))?void 0:e.click()},disabled:f,children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),f?"Processing...":"Choose File"]})]})]})}),l.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(mr,{className:"text-base font-medium",children:["Recipients (",A.length," valid, ",l.length-A.length," invalid)"]}),e.jsxs(Lt,{variant:"ghost",size:"sm",onClick:E,children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Clear"]})]}),e.jsx(Yn,{className:"max-h-[calc(90vh-100px)] pr-2",children:e.jsx("div",{className:"pr-2",children:e.jsx("div",{className:"max-h-60 space-y-2",children:l.map((t,s)=>e.jsx("div",{className:"p-3 rounded-lg border "+(t.isValid?"border-green-200 bg-green-50 dark:bg-green-950/50":"border-red-200 bg-red-50 dark:bg-red-950/50"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.isValid?e.jsx(rs,{className:"h-4 w-4 text-green-600"}):e.jsx(_s,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"font-mono text-sm truncate",children:t.address})]}),t.resolvedAddress&&t.resolvedAddress!==t.address&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 font-mono",children:[" ",t.resolvedAddress]}),t.error&&e.jsx("div",{className:"text-xs text-red-600 mt-1",children:t.error})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-mono text-sm font-medium",children:[t.amount," OCT"]}),t.isValid&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Fee: ",b(Number(t.amount)).toFixed(3)," OCT"]})]})]})},s))})})})]}),y.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(mr,{className:"text-base font-medium",children:"Transaction Results"}),e.jsxs(Lt,{variant:"ghost",size:"sm",onClick:()=>w([]),children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Clear Logs"]})]}),y.map((t,s)=>e.jsx("div",{className:"rounded-lg p-3 sm:p-4 "+(t.success?"bg-green-50 border border-green-200 dark:bg-green-950/50 dark:border-green-800":"bg-red-50 border border-red-200 dark:bg-red-950/50 dark:border-red-800"),children:e.jsxs("div",{className:"flex items-start space-x-2",children:[t.success?e.jsx(rs,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2 mt-0.5 flex-shrink-0"}):e.jsx(_s,{className:"h-5 w-5 text-red-600 dark:text-red-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium break-words "+(t.success?"text-green-800 dark:text-green-200":"text-red-800 dark:text-red-200"),children:t.success?"Success":"Failed"}),e.jsxs("div",{className:"mt-1 space-y-1",children:[e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"To:"})," ",e.jsx("span",{className:"font-mono break-all",children:t.recipient})]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Amount:"})," ",t.amount," OCT"]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Fee:"})," ",b(Number(t.amount)||0).toFixed(3)," OCT"]})]}),t.success&&t.hash&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm",children:"Transaction Hash:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center mt-1 space-y-1 sm:space-y-0 sm:space-x-2",children:[e.jsx("code",{className:"text-xs bg-green-100 dark:bg-green-900/50 px-2 py-1 rounded font-mono break-all text-green-800 dark:text-green-200 flex-1",children:t.hash}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>(async(e,t)=>{try{await navigator.clipboard.writeText(e),j({title:"Copied!",description:`${t} copied to clipboard`})}catch(s){j({title:"Error",description:"Copy failed",variant:"destructive"})}})(t.hash,"Transaction Hash"),className:"h-6 w-6 p-0",children:e.jsx(ls,{className:"h-3 w-3"})}),e.jsx("a",{href:`https://octrascan.io/tx/${t.hash}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center h-6 w-6 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",title:"View on OctraScan",children:e.jsx(ds,{className:"h-3 w-3"})})]})]})]}),t.error&&e.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 break-words",children:t.error})]})]})},s))]}),A.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Kt,{}),e.jsxs("div",{className:"p-3 sm:p-4 bg-muted rounded-md space-y-2",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Transaction Summary"}),e.jsxs("div",{className:"space-y-1 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Valid Recipients:"}),e.jsx("span",{children:A.length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{className:"font-mono",children:[T.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Total Fees:"}),e.jsxs("span",{className:"font-mono",children:[R.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center font-medium",children:[e.jsx("span",{children:"Total Cost:"}),e.jsxs("span",{className:"font-mono",children:[I.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Current Balance:"}),e.jsxs("span",{className:"font-mono",children:[O.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Remaining Balance:"}),e.jsxs("span",{className:"font-mono "+(O-I>=0?"text-green-600":"text-red-600"),children:[(O-I).toFixed(8)," OCT"]})]}),I>O&&e.jsx("div",{className:"text-red-600 text-xs mt-2 break-words",children:" Insufficient balance for this transaction"})]})]}),e.jsx(Lt,{onClick:async()=>{var e;if(!t)return void j({title:"Error",description:"No wallet connected",variant:"destructive"});const r=l.filter(e=>e.isValid);if(0===r.length)return void j({title:"Error",description:"No valid recipients found",variant:"destructive"});const c=r.reduce((e,t)=>e+Number(t.amount),0),d=r.reduce((e,t)=>e+b(Number(t.amount)),0),m=c+d;if(null!==s&&m>s)j({title:"Error",description:`Insufficient balance. Need ${m.toFixed(8)} OCT (${c.toFixed(8)} + ${d.toFixed(8)} fees)`,variant:"destructive"});else{v(!0),w([]);try{let s=(await ii(t.address)).nonce;const l=[],c=5,d=[];for(let e=0;e<r.length;e+=c)d.push(r.slice(e,e+c));for(let r=0;r<d.length;r++){const a=d[r],n=[];for(let e=0;e<a.length;e++){const i=a[e],l=i.resolvedAddress,o=s+1+(r*c+e),d=mi(t.address,l,Number(i.amount),o,t.privateKey,t.publicKey||"");n.push(ri(d).then(e=>({...e,recipient:i.address,amount:i.amount})))}const i=await Promise.allSettled(n);for(let t=0;t<i.length;t++){const s=i[t],r=a[t];"fulfilled"===s.status?l.push(s.value):l.push({success:!1,error:(null==(e=s.reason)?void 0:e.message)||"Unknown error",recipient:r.address,amount:r.amount})}r<d.length-1&&await new Promise(e=>setTimeout(e,50))}w(l);const m=l.filter(e=>e.success).length;if(m>0){j({title:"Lightning Multi Send Completed!",description:`${m} out of ${l.length} transactions sent successfully`}),m===l.length&&(o([]),u(""));n(s+m),setTimeout(async()=>{try{const e=await ii(t.address);a(e.balance),n(e.nonce)}catch(e){console.error("Failed to refresh balance after transaction:",e)}},2e3),i()}}catch(h){console.error("File multi-send error:",h),j({title:"Error",description:"Send failed",variant:"destructive"})}finally{v(!1)}}},disabled:g||0===A.length||I>O,className:"w-full text-sm sm:text-base",size:"lg",children:g?"Sending...":` Send to ${A.length} Recipients`})]})]})]})}function Xi({wallet:t,transactions:s,onTransactionsUpdate:r,isLoading:a=!1}){const[n,i]=de.useState(!1),[l,o]=de.useState(null),[c,d]=de.useState(!1),{toast:m}=ar(),u=async(e,t=!1)=>{d(!0);try{if(t){const t=await async function(e){try{const s=await ei("/staging");if(!s.ok){const e=await s.text();return console.error("Failed to fetch pending transactions:",s.status,e),null}let r;try{if(r=await ti(s),!r.staged_transactions||!Array.isArray(r.staged_transactions))return console.warn("Staging response does not contain staged_transactions array:",r),null}catch(t){return console.error("Failed to parse staging JSON:",t),null}return r.staged_transactions.find(t=>t.hash===e)||null}catch(s){return console.error("Error fetching pending transaction by hash:",s),null}}(e);if(!t)throw new Error("Pending transaction not found");o(t)}else{const t=await ai(e);o(t)}}catch(s){console.error("Error fetching transaction details:",s),m({title:"Error",description:"Fetch failed",variant:"destructive"})}finally{d(!1)}},h=e=>{switch(e){case"confirmed":return"default";case"pending":default:return"secondary";case"failed":return"destructive"}},p=t=>{switch(t){case"confirmed":return e.jsx(rs,{className:"h-4 w-4 text-green-500"});case"pending":return e.jsx(is,{className:"h-4 w-4 text-yellow-500"});case"failed":return e.jsx(as,{className:"h-4 w-4 text-red-500"});default:return e.jsx(is,{className:"h-4 w-4 text-gray-500"})}},f=async(e,t)=>{try{await navigator.clipboard.writeText(e),m({title:"Copied!",description:`${t} copied to clipboard`})}catch(s){m({title:"Error",description:"Copy failed",variant:"destructive"})}},x=e=>"stage_status"in e;if(!t)return e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ls,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"No wallet available. Please generate or import a wallet first."})]})});const g=s.filter(e=>"pending"===e.status).length;return e.jsxs(bt,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5"}),"Transaction History",g>0&&e.jsx(zt,{variant:"secondary",className:"ml-2",children:g})]}),e.jsxs(Lt,{variant:"outline",size:"sm",onClick:async()=>{if(t){i(!0);try{const e=await ui(t.address);if(!Array.isArray(e))return console.error("Transaction history data is not an array:",e),void r([]);const s=e.map(e=>{var s;return{...e,type:(null==(s=e.from)?void 0:s.toLowerCase())===t.address.toLowerCase()?"sent":"received"}});r(s),m({title:"Transactions Updated",description:`Loaded ${s.length} transactions`})}catch(e){console.error("Error fetching transactions:",e),m({title:"Error",description:"Failed to fetch transactions. Check RPC connection.",variant:"destructive"})}finally{i(!1)}}},disabled:n,children:[e.jsx(Es,{className:"h-4 w-4 mr-2 "+(n?"animate-spin":"")}),"Refresh"]})]}),e.jsx(Ct,{children:a?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading transactions..."}),[...Array(3)].map((t,s)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(Zn,{className:"h-4 w-full"}),e.jsx(Zn,{className:"h-4 w-3/4"}),e.jsx(Zn,{className:"h-4 w-1/2"})]},s))]}):0===s.length?e.jsx(Ft,{children:e.jsx(Mt,{children:"No transactions found for this wallet."})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Recent ",s.length," transactions",g>0&&` (${g} pending)`]}),s.map((t,r)=>{return e.jsxs("div",{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:["sent"===t.type?e.jsx(Xt,{className:"h-4 w-4 text-red-500"}):e.jsx(Yt,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"font-medium capitalize",children:t.type}),e.jsxs("div",{className:"flex items-center gap-1",children:[p(t.status),e.jsx(zt,{variant:h(t.status),className:"text-xs",children:t.status})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Vr,{children:[e.jsx(Kr,{asChild:!0,children:e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>u(t.hash,"pending"===t.status),children:e.jsx(us,{className:"h-4 w-4"})})}),e.jsxs(Gr,{className:"max-w-2xl",children:[e.jsx(Jr,{children:e.jsx(Yr,{children:"Transaction Details"})}),c?e.jsxs("div",{className:"space-y-4",children:[e.jsx(Zn,{className:"h-4 w-full"}),e.jsx(Zn,{className:"h-4 w-3/4"}),e.jsx(Zn,{className:"h-4 w-1/2"})]}):l?e.jsx("div",{className:"space-y-4",children:x(l)?e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Hash:"}),e.jsxs("div",{className:"font-mono text-xs break-all flex items-center gap-2",children:[l.hash,e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>f(l.hash,"Transaction Hash"),children:e.jsx(ls,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"capitalize",children:l.stage_status.replace("_"," ")})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"From:"}),e.jsx("div",{className:"font-mono text-xs break-all",children:l.from})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"To:"}),e.jsx("div",{className:"font-mono text-xs break-all",children:l.to})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Amount:"}),e.jsx("div",{className:"flex items-center gap-2",children:"PRIVATE_TRANSFER"===l.message||"505249564154455f5452414e53464552"===l.message||"0"===l.amount&&l.message?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rs,{className:"h-3 w-3 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"private OCT"})]}):`${l.amount} OCT`})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Priority:"}),e.jsx("div",{className:"capitalize",children:l.priority})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Nonce:"}),e.jsx("div",{children:l.nonce})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"OU:"}),e.jsx("div",{children:l.ou})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Timestamp:"}),e.jsx("div",{children:new Date(1e3*l.timestamp).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Has Public Key:"}),e.jsx("div",{children:l.has_public_key?"Yes":"No"})]}),l.message&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Message:"}),e.jsx("div",{className:"mt-1 p-2 bg-muted rounded text-sm flex items-center gap-2",children:"PRIVATE_TRANSFER"===l.message||"505249564154455f5452414e53464552"===l.message?e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"Private Transfer"})]}):l.message})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Hash:"}),e.jsxs("div",{className:"font-mono text-xs break-all flex items-center gap-2",children:[l.tx_hash,e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>f(l.tx_hash,"Transaction Hash"),children:e.jsx(ls,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Epoch:"}),e.jsx("div",{children:l.epoch})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"From:"}),e.jsx("div",{className:"font-mono text-xs break-all",children:l.parsed_tx.from})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"To:"}),e.jsx("div",{className:"font-mono text-xs break-all",children:l.parsed_tx.to})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Amount:"}),e.jsx("div",{className:"flex items-center gap-2",children:"PRIVATE_TRANSFER"===l.parsed_tx.message||"505249564154455f5452414e53464552"===l.parsed_tx.message||"0"===l.parsed_tx.amount&&l.parsed_tx.message?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rs,{className:"h-3 w-3 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"private OCT"})]}):`${l.parsed_tx.amount} OCT`})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Amount Raw:"}),e.jsx("div",{className:"flex items-center gap-2",children:"PRIVATE_TRANSFER"===l.parsed_tx.message||"505249564154455f5452414e53464552"===l.parsed_tx.message||"0"===l.parsed_tx.amount&&l.parsed_tx.message?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rs,{className:"h-3 w-3 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"private OCT"})]}):l.parsed_tx.amount_raw})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Nonce:"}),e.jsx("div",{children:l.parsed_tx.nonce})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"OU:"}),e.jsx("div",{children:l.parsed_tx.ou})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Timestamp:"}),e.jsx("div",{children:new Date(1e3*l.parsed_tx.timestamp).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Source:"}),e.jsx("div",{children:l.source})]}),l.parsed_tx.message&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Message:"}),e.jsx("div",{className:"mt-1 p-2 bg-muted rounded text-sm flex items-center gap-2",children:"PRIVATE_TRANSFER"===l.parsed_tx.message||"505249564154455f5452414e53464552"===l.parsed_tx.message?e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"Private Transfer"})]}):l.parsed_tx.message})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-medium",children:"Raw Data:"}),e.jsx("div",{className:"mt-1 p-2 bg-muted rounded text-xs font-mono break-all max-h-32 overflow-y-auto",children:l.data})]})]})}):e.jsx("div",{children:"No details available"})]})]}),"confirmed"===t.status&&e.jsx(Lt,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx("a",{href:`https://octrascan.io/tx/${t.hash}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(ds,{className:"h-4 w-4"})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsx("div",{className:"font-mono font-medium flex items-center gap-2",children:"PRIVATE_TRANSFER"===t.message||"505249564154455f5452414e53464552"===t.message||0===t.amount&&t.message?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rs,{className:"h-3 w-3 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"private OCT"})]}):`${(null==(o=t.amount)?void 0:o.toFixed(8))||"0.00000000"} OCT`})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Hash:"}),e.jsx("div",{className:"font-mono break-all text-xs",children:(i=t.hash||"N/A",`${i.slice(0,8)}...${i.slice(-8)}`)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"sent"===t.type?"To:":"From:"}),e.jsx("div",{className:"font-mono",children:e.jsx("span",{className:"break-all text-xs",children:(n="sent"===t.type?t.to:t.from,`${n.slice(0,6)}...${n.slice(-4)}`)})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"}),e.jsx("div",{children:(a=t.timestamp||0,new Date(1e3*a).toLocaleString())})]})]})]})]}),r<s.length-1&&e.jsx(Kt,{className:"mt-4"})]},t.hash||r);var a,n,i,o})]})})]})}Ji.displayName=Hi.displayName;const Zi=de.createContext({theme:"light",setTheme:()=>null});function Qi({children:t,defaultTheme:s="dark",storageKey:r="vite-ui-theme",...a}){const[n,i]=de.useState(()=>localStorage.getItem(r)||s);de.useEffect(()=>{const e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(n)},[n]),de.useEffect(()=>{const e=e=>{e.key===r&&e.newValue&&i(e.newValue)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[r]);const l={theme:n,setTheme:e=>{localStorage.setItem(r,e),i(e)}};return e.jsx(Zi.Provider,{...a,value:l,children:t})}function el(){const{setTheme:t,theme:s}=(()=>{const e=de.useContext(Zi);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e})();return e.jsxs(Lt,{variant:"outline",size:"sm",onClick:()=>{t("light"===s?"dark":"light")},className:"flex items-center justify-center",children:[e.jsx(Os,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(ks,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}function tl({onClose:t,onRPCChange:s}){const[r,a]=de.useState([]),[n,i]=de.useState(!1),[l,o]=de.useState(null),{toast:c}=ar(),[d,m]=de.useState({name:"",url:"",headers:{},priority:1}),[u,h]=de.useState(""),[p,f]=de.useState("");de.useEffect(()=>{x()},[]);const x=()=>{const e=localStorage.getItem("rpcProviders");if(e){const t=JSON.parse(e);a(t.sort((e,t)=>e.priority-t.priority))}else{const e={id:"default",name:"Octra Network (Default)",url:"https://octra.network",headers:{},priority:1,isActive:!0,createdAt:Date.now()};a([e]),localStorage.setItem("rpcProviders",JSON.stringify([e]))}},g=e=>{const t=e.sort((e,t)=>e.priority-t.priority);a(t),localStorage.setItem("rpcProviders",JSON.stringify(t))},v=()=>{m({name:"",url:"",headers:{},priority:r.length+1}),h(""),f(""),o(null)};return e.jsx("div",{className:"space-y-6",children:e.jsxs(bt,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-5 w-5"}),"RPC Providers"]}),e.jsxs(Vr,{open:n,onOpenChange:i,children:[e.jsx(Kr,{asChild:!0,children:e.jsxs(Lt,{size:"sm",onClick:v,children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Add Provider"]})}),e.jsxs(Gr,{className:"sm:max-w-md",children:[e.jsx(Jr,{children:e.jsx(Yr,{children:l?"Edit RPC Provider":"Add RPC Provider"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"provider-name",children:"Connection Name"}),e.jsx(ir,{id:"provider-name",placeholder:"e.g., Octra Mainnet",value:d.name,onChange:e=>m({...d,name:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"provider-url",children:"URL"}),e.jsx(ir,{id:"provider-url",placeholder:"https://octra.network",value:d.url,onChange:e=>m({...d,url:e.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"RPC URL will be tried directly first. If CORS fails, it will fallback to nginx proxy automatically."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"provider-priority",children:"Priority (lower = higher priority)"}),e.jsx(ir,{id:"provider-priority",type:"number",min:"1",value:d.priority,onChange:e=>m({...d,priority:parseInt(e.target.value)||1})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{children:"Headers"}),e.jsxs("div",{className:"space-y-2",children:[Object.entries(d.headers).map(([t,s])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 text-sm font-mono bg-muted p-2 rounded",children:[t,": ",s]}),e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>(e=>{const t={...d.headers};delete t[e],m({...d,headers:t})})(t),children:e.jsx(Ps,{className:"h-4 w-4"})})]},t)),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ir,{placeholder:"Header key",value:u,onChange:e=>h(e.target.value),className:"flex-1"}),e.jsx(ir,{placeholder:"Header value",value:p,onChange:e=>f(e.target.value),className:"flex-1"}),e.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>{u&&p&&(m({...d,headers:{...d.headers,[u]:p}}),h(""),f(""))},disabled:!u||!p,children:"Add"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Lt,{variant:"outline",onClick:()=>i(!1),className:"flex-1",children:"Cancel"}),e.jsxs(Lt,{onClick:()=>{if(d.name&&d.url){try{new URL(d.url)}catch{return void c({title:"Invalid URL",description:"Please enter a valid URL",variant:"destructive"})}if(l){const e=r.map(e=>e.id===l.id?{...e,...d}:e);g(e),c({title:"Provider Updated",description:"RPC provider has been updated successfully"})}else{const e={id:Date.now().toString(),...d,isActive:!1,createdAt:Date.now()};g([...r,e]),c({title:"Provider Added",description:"New RPC provider has been added successfully"})}i(!1),v()}else c({title:"Validation Error",description:"Name and URL are required",variant:"destructive"})},className:"flex-1",children:[l?"Update":"Add"," Provider"]})]})]})]})]})]}),e.jsx(Ct,{children:e.jsx("div",{className:"space-y-3",children:r.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg "+(t.isActive?"border-primary bg-primary/5":""),children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:t.name}),t.isActive&&e.jsx(zt,{variant:"default",className:"text-xs",children:"Primary"}),e.jsxs(zt,{variant:"outline",className:"text-xs",children:["P.",t.priority]})]}),e.jsx("div",{className:"text-sm text-muted-foreground font-mono",children:t.url}),Object.keys(t.headers).length>0&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[Object.keys(t.headers).length," custom header(s)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!t.isActive&&e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>(e=>{const t=r.map(t=>({...t,isActive:t.id===e}));g(t);const a=t.find(e=>e.isActive);console.log("RPC provider changed to:",null==a?void 0:a.name,null==a?void 0:a.url),c({title:"Primary Provider Set",description:"RPC provider has been set as primary"}),s&&s()})(t.id),title:"Set as primary",children:e.jsx(Is,{className:"h-4 w-4"})}),e.jsxs(Zr,{children:[e.jsx(Qr,{asChild:!0,children:e.jsx(Lt,{variant:"ghost",size:"sm",children:e.jsx(cs,{className:"h-4 w-4"})})}),e.jsxs(ea,{align:"end",children:[e.jsxs(ta,{onClick:()=>(e=>{o(e),m({name:e.name,url:e.url,headers:e.headers,priority:e.priority}),i(!0)})(t),children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Edit"]}),"default"!==t.id&&e.jsxs(ta,{onClick:()=>(e=>{if(r.length<=1)return void c({title:"Cannot Delete",description:"You must have at least one RPC provider",variant:"destructive"});const t=r.filter(t=>t.id!==e);g(t),c({title:"Provider Deleted",description:"RPC provider has been deleted"})})(t.id),className:"text-red-600",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]},t.id))})})]})})}var sl=[" ","Enter","ArrowUp","ArrowDown"],rl=[" ","Enter"],al="Select",[nl,il,ll]=W(al),[ol,cl]=l(al,[ll,$]),dl=$(),[ml,ul]=ol(al),[hl,pl]=ol(al),fl=t=>{const{__scopeSelect:s,children:r,open:a,defaultOpen:n,onOpenChange:i,value:l,defaultValue:o,onValueChange:d,dir:m,name:u,autoComplete:h,disabled:p,required:f,form:x}=t,g=dl(s),[v,y]=de.useState(null),[w,j]=de.useState(null),[b,N]=de.useState(!1),k=L(m),[C=!1,S]=c({prop:a,defaultProp:n,onChange:i}),[E,A]=c({prop:l,defaultProp:o,onChange:d}),T=de.useRef(null),R=!v||(x||!!v.closest("form")),[I,O]=de.useState(new Set),P=Array.from(I).map(e=>e.props.value).join(";");return e.jsx(te,{...g,children:e.jsxs(ml,{required:f,scope:s,trigger:v,onTriggerChange:y,valueNode:w,onValueNodeChange:j,valueNodeHasChildren:b,onValueNodeHasChildrenChange:N,contentId:X(),value:E,onValueChange:A,open:C,onOpenChange:S,dir:k,triggerPointerDownPosRef:T,disabled:p,children:[e.jsx(nl.Provider,{scope:s,children:e.jsx(hl,{scope:t.__scopeSelect,onNativeOptionAdd:de.useCallback(e=>{O(t=>new Set(t).add(e))},[]),onNativeOptionRemove:de.useCallback(e=>{O(t=>{const s=new Set(t);return s.delete(e),s})},[]),children:r})}),R?e.jsxs(to,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:E,onChange:e=>A(e.target.value),disabled:p,form:x,children:[void 0===E?e.jsx("option",{value:""}):null,Array.from(I)]},P):null]})})};fl.displayName=al;var xl="SelectTrigger",gl=de.forwardRef((t,s)=>{const{__scopeSelect:r,disabled:a=!1,...n}=t,l=dl(r),c=ul(xl,r),m=c.disabled||a,u=o(s,c.onTriggerChange),h=il(r),p=de.useRef("touch"),[f,x,g]=so(e=>{const t=h().filter(e=>!e.disabled),s=t.find(e=>e.value===c.value),r=ro(t,e,s);void 0!==r&&c.onValueChange(r.value)}),v=e=>{m||(c.onOpenChange(!0),g()),e&&(c.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return e.jsx(V,{asChild:!0,...l,children:e.jsx(i.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:m,"data-disabled":m?"":void 0,"data-placeholder":eo(c.value)?"":void 0,...n,ref:u,onClick:d(n.onClick,e=>{e.currentTarget.focus(),"mouse"!==p.current&&v(e)}),onPointerDown:d(n.onPointerDown,e=>{p.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(v(e),e.preventDefault())}),onKeyDown:d(n.onKeyDown,e=>{const t=""!==f.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||x(e.key),t&&" "===e.key||sl.includes(e.key)&&(v(),e.preventDefault())})})})});gl.displayName=xl;var vl="SelectValue",yl=de.forwardRef((t,s)=>{const{__scopeSelect:r,className:a,style:n,children:l,placeholder:c="",...d}=t,m=ul(vl,r),{onValueNodeHasChildrenChange:u}=m,h=void 0!==l,p=o(s,m.onValueNodeChange);return B(()=>{u(h)},[u,h]),e.jsx(i.span,{...d,ref:p,style:{pointerEvents:"none"},children:eo(m.value)?e.jsx(e.Fragment,{children:c}):l})});yl.displayName=vl;var wl=de.forwardRef((t,s)=>{const{__scopeSelect:r,children:a,...n}=t;return e.jsx(i.span,{"aria-hidden":!0,...n,ref:s,children:a||""})});wl.displayName="SelectIcon";var jl=t=>e.jsx(ee,{asChild:!0,...t});jl.displayName="SelectPortal";var bl="SelectContent",Nl=de.forwardRef((t,s)=>{const r=ul(bl,t.__scopeSelect),[a,n]=de.useState();if(B(()=>{n(new DocumentFragment)},[]),!r.open){const s=a;return s?ce.createPortal(e.jsx(Cl,{scope:t.__scopeSelect,children:e.jsx(nl.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),s):null}return e.jsx(El,{...t,ref:s})});Nl.displayName=bl;var kl=10,[Cl,Sl]=ol(bl),El=de.forwardRef((t,s)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:l,onPointerDownOutside:c,side:m,sideOffset:u,align:h,alignOffset:p,arrowPadding:f,collisionBoundary:x,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:w,...j}=t,b=ul(bl,r),[N,k]=de.useState(null),[C,S]=de.useState(null),E=o(s,e=>k(e)),[A,T]=de.useState(null),[R,I]=de.useState(null),O=il(r),[P,_]=de.useState(!1),F=de.useRef(!1);de.useEffect(()=>{if(N)return K(N)},[N]),H();const M=de.useCallback(e=>{const[t,...s]=O().map(e=>e.ref.current),[r]=s.slice(-1),a=document.activeElement;for(const n of e){if(n===a)return;if(null==n||n.scrollIntoView({block:"nearest"}),n===t&&C&&(C.scrollTop=0),n===r&&C&&(C.scrollTop=C.scrollHeight),null==n||n.focus(),document.activeElement!==a)return}},[O,C]),B=de.useCallback(()=>M([A,N]),[M,A,N]);de.useEffect(()=>{P&&B()},[P,B]);const{onOpenChange:L,triggerPointerDownPosRef:U}=b;de.useEffect(()=>{if(N){let e={x:0,y:0};const t=t=>{var s,r;e={x:Math.abs(Math.round(t.pageX)-((null==(s=U.current)?void 0:s.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(r=U.current)?void 0:r.y)??0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():N.contains(s.target)||L(!1),document.removeEventListener("pointermove",t),U.current=null};return null!==U.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[N,L,U]),de.useEffect(()=>{const e=()=>L(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[L]);const[z,D]=so(e=>{const t=O().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),r=ro(t,e,s);r&&setTimeout(()=>r.ref.current.focus())}),W=de.useCallback((e,t,s)=>{const r=!F.current&&!s;(void 0!==b.value&&b.value===t||r)&&(T(e),r&&(F.current=!0))},[b.value]),$=de.useCallback(()=>null==N?void 0:N.focus(),[N]),V=de.useCallback((e,t,s)=>{const r=!F.current&&!s;(void 0!==b.value&&b.value===t||r)&&I(e)},[b.value]),Y="popper"===a?Tl:Al,X=Y===Tl?{side:m,sideOffset:u,align:h,alignOffset:p,arrowPadding:f,collisionBoundary:x,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:w}:{};return e.jsx(Cl,{scope:r,content:N,viewport:C,onViewportChange:S,itemRefCallback:W,selectedItem:A,onItemLeave:$,itemTextRefCallback:V,focusSelectedItem:B,selectedItemText:R,position:a,isPositioned:P,searchRef:z,children:e.jsx(q,{as:n,allowPinchZoom:!0,children:e.jsx(G,{asChild:!0,trapped:b.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:d(i,e=>{var t;null==(t=b.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:e.jsx(J,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:e.jsx(Y,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:e=>e.preventDefault(),...j,...X,onPlaced:()=>_(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:d(j.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||D(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=O().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const s=e.target,r=t.indexOf(s);t=t.slice(r+1)}setTimeout(()=>M(t)),e.preventDefault()}})})})})})})});El.displayName="SelectContentImpl";var Al=de.forwardRef((t,s)=>{const{__scopeSelect:r,onPlaced:a,...n}=t,l=ul(bl,r),c=Sl(bl,r),[d,m]=de.useState(null),[u,h]=de.useState(null),p=o(s,e=>h(e)),f=il(r),x=de.useRef(!1),g=de.useRef(!0),{viewport:v,selectedItem:y,selectedItemText:w,focusSelectedItem:j}=c,b=de.useCallback(()=>{if(l.trigger&&l.valueNode&&d&&u&&v&&y&&w){const e=l.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),s=l.valueNode.getBoundingClientRect(),r=w.getBoundingClientRect();if("rtl"!==l.dir){const a=r.left-t.left,n=s.left-a,i=e.left-n,l=e.width+i,o=Math.max(l,t.width),c=window.innerWidth-kl,m=mn(n,[kl,Math.max(kl,c-o)]);d.style.minWidth=l+"px",d.style.left=m+"px"}else{const a=t.right-r.right,n=window.innerWidth-s.right-a,i=window.innerWidth-e.right-n,l=e.width+i,o=Math.max(l,t.width),c=window.innerWidth-kl,m=mn(n,[kl,Math.max(kl,c-o)]);d.style.minWidth=l+"px",d.style.right=m+"px"}const n=f(),i=window.innerHeight-2*kl,o=v.scrollHeight,c=window.getComputedStyle(u),m=parseInt(c.borderTopWidth,10),h=parseInt(c.paddingTop,10),p=parseInt(c.borderBottomWidth,10),g=m+h+o+parseInt(c.paddingBottom,10)+p,j=Math.min(5*y.offsetHeight,g),b=window.getComputedStyle(v),N=parseInt(b.paddingTop,10),k=parseInt(b.paddingBottom,10),C=e.top+e.height/2-kl,S=i-C,E=y.offsetHeight/2,A=m+h+(y.offsetTop+E),T=g-A;if(A<=C){const e=n.length>0&&y===n[n.length-1].ref.current;d.style.bottom="0px";const t=u.clientHeight-v.offsetTop-v.offsetHeight,s=A+Math.max(S,E+(e?k:0)+t+p);d.style.height=s+"px"}else{const e=n.length>0&&y===n[0].ref.current;d.style.top="0px";const t=Math.max(C,m+v.offsetTop+(e?N:0)+E)+T;d.style.height=t+"px",v.scrollTop=A-C+v.offsetTop}d.style.margin=`${kl}px 0`,d.style.minHeight=j+"px",d.style.maxHeight=i+"px",null==a||a(),requestAnimationFrame(()=>x.current=!0)}},[f,l.trigger,l.valueNode,d,u,v,y,w,l.dir,a]);B(()=>b(),[b]);const[N,k]=de.useState();B(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const C=de.useCallback(e=>{e&&!0===g.current&&(b(),null==j||j(),g.current=!1)},[b,j]);return e.jsx(Rl,{scope:r,contentWrapper:d,shouldExpandOnScrollRef:x,onScrollButtonChange:C,children:e.jsx("div",{ref:m,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:e.jsx(i.div,{...n,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});Al.displayName="SelectItemAlignedPosition";var Tl=de.forwardRef((t,s)=>{const{__scopeSelect:r,align:a="start",collisionPadding:n=kl,...i}=t,l=dl(r);return e.jsx(Y,{...l,...i,ref:s,align:a,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Tl.displayName="SelectPopperPosition";var[Rl,Il]=ol(bl,{}),Ol="SelectViewport",Pl=de.forwardRef((t,s)=>{const{__scopeSelect:r,nonce:a,...n}=t,l=Sl(Ol,r),c=Il(Ol,r),m=o(s,l.onViewportChange),u=de.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(nl.Slot,{scope:r,children:e.jsx(i.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:m,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:d(n.onScroll,e=>{const t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:r}=c;if((null==r?void 0:r.current)&&s){const e=Math.abs(u.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*kl,a=parseFloat(s.style.minHeight),n=parseFloat(s.style.height),i=Math.max(a,n);if(i<r){const a=i+e,n=Math.min(r,a),l=a-n;s.style.height=n+"px","0px"===s.style.bottom&&(t.scrollTop=l>0?l:0,s.style.justifyContent="flex-end")}}}u.current=t.scrollTop})})})]})});Pl.displayName=Ol;var _l="SelectGroup",[Fl,Ml]=ol(_l);de.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t,n=X();return e.jsx(Fl,{scope:r,id:n,children:e.jsx(i.div,{role:"group","aria-labelledby":n,...a,ref:s})})}).displayName=_l;var Bl="SelectLabel",Ll=de.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t,n=Ml(Bl,r);return e.jsx(i.div,{id:n.id,...a,ref:s})});Ll.displayName=Bl;var Ul="SelectItem",[zl,Dl]=ol(Ul),Wl=de.forwardRef((t,s)=>{const{__scopeSelect:r,value:a,disabled:n=!1,textValue:l,...c}=t,m=ul(Ul,r),u=Sl(Ul,r),h=m.value===a,[p,f]=de.useState(l??""),[x,g]=de.useState(!1),v=o(s,e=>{var t;return null==(t=u.itemRefCallback)?void 0:t.call(u,e,a,n)}),y=X(),w=de.useRef("touch"),j=()=>{n||(m.onValueChange(a),m.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(zl,{scope:r,value:a,disabled:n,textId:y,isSelected:h,onItemTextChange:de.useCallback(e=>{f(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:e.jsx(nl.ItemSlot,{scope:r,value:a,disabled:n,textValue:p,children:e.jsx(i.div,{role:"option","aria-labelledby":y,"data-highlighted":x?"":void 0,"aria-selected":h&&x,"data-state":h?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...c,ref:v,onFocus:d(c.onFocus,()=>g(!0)),onBlur:d(c.onBlur,()=>g(!1)),onClick:d(c.onClick,()=>{"mouse"!==w.current&&j()}),onPointerUp:d(c.onPointerUp,()=>{"mouse"===w.current&&j()}),onPointerDown:d(c.onPointerDown,e=>{w.current=e.pointerType}),onPointerMove:d(c.onPointerMove,e=>{var t;w.current=e.pointerType,n?null==(t=u.onItemLeave)||t.call(u):"mouse"===w.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:d(c.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=u.onItemLeave)||t.call(u))}),onKeyDown:d(c.onKeyDown,e=>{var t;""!==(null==(t=u.searchRef)?void 0:t.current)&&" "===e.key||(rl.includes(e.key)&&j()," "===e.key&&e.preventDefault())})})})})});Wl.displayName=Ul;var $l="SelectItemText",Vl=de.forwardRef((t,s)=>{const{__scopeSelect:r,className:a,style:n,...l}=t,c=ul($l,r),d=Sl($l,r),m=Dl($l,r),u=pl($l,r),[h,p]=de.useState(null),f=o(s,e=>p(e),m.onItemTextChange,e=>{var t;return null==(t=d.itemTextRefCallback)?void 0:t.call(d,e,m.value,m.disabled)}),x=null==h?void 0:h.textContent,g=de.useMemo(()=>e.jsx("option",{value:m.value,disabled:m.disabled,children:x},m.value),[m.disabled,m.value,x]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=u;return B(()=>(v(g),()=>y(g)),[v,y,g]),e.jsxs(e.Fragment,{children:[e.jsx(i.span,{id:m.textId,...l,ref:f}),m.isSelected&&c.valueNode&&!c.valueNodeHasChildren?ce.createPortal(l.children,c.valueNode):null]})});Vl.displayName=$l;var Kl="SelectItemIndicator",Hl=de.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t;return Dl(Kl,r).isSelected?e.jsx(i.span,{"aria-hidden":!0,...a,ref:s}):null});Hl.displayName=Kl;var ql="SelectScrollUpButton",Gl=de.forwardRef((t,s)=>{const r=Sl(ql,t.__scopeSelect),a=Il(ql,t.__scopeSelect),[n,i]=de.useState(!1),l=o(s,a.onScrollButtonChange);return B(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;i(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),n?e.jsx(Xl,{...t,ref:l,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});Gl.displayName=ql;var Jl="SelectScrollDownButton",Yl=de.forwardRef((t,s)=>{const r=Sl(Jl,t.__scopeSelect),a=Il(Jl,t.__scopeSelect),[n,i]=de.useState(!1),l=o(s,a.onScrollButtonChange);return B(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,s=Math.ceil(t.scrollTop)<e;i(s)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),n?e.jsx(Xl,{...t,ref:l,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});Yl.displayName=Jl;var Xl=de.forwardRef((t,s)=>{const{__scopeSelect:r,onAutoScroll:a,...n}=t,l=Sl("SelectScrollButton",r),o=de.useRef(null),c=il(r),m=de.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return de.useEffect(()=>()=>m(),[m]),B(()=>{var e;const t=c().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[c]),e.jsx(i.div,{"aria-hidden":!0,...n,ref:s,style:{flexShrink:0,...n.style},onPointerDown:d(n.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(a,50))}),onPointerMove:d(n.onPointerMove,()=>{var e;null==(e=l.onItemLeave)||e.call(l),null===o.current&&(o.current=window.setInterval(a,50))}),onPointerLeave:d(n.onPointerLeave,()=>{m()})})}),Zl=de.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t;return e.jsx(i.div,{"aria-hidden":!0,...a,ref:s})});Zl.displayName="SelectSeparator";var Ql="SelectArrow";function eo(e){return""===e||void 0===e}de.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t,n=dl(r),i=ul(Ql,r),l=Sl(Ql,r);return i.open&&"popper"===l.position?e.jsx(Z,{...n,...a,ref:s}):null}).displayName=Ql;var to=de.forwardRef((t,s)=>{const{value:r,...a}=t,n=de.useRef(null),i=o(s,n),l=hr(r);return de.useEffect(()=>{const e=n.current,t=window.HTMLSelectElement.prototype,s=Object.getOwnPropertyDescriptor(t,"value").set;if(l!==r&&s){const t=new Event("change",{bubbles:!0});s.call(e,r),e.dispatchEvent(t)}},[l,r]),e.jsx(Q,{asChild:!0,children:e.jsx("select",{...a,ref:i,defaultValue:r})})});function so(e){const t=M(e),s=de.useRef(""),r=de.useRef(0),a=de.useCallback(e=>{const a=s.current+e;t(a),function e(t){s.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),n=de.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return de.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,a,n]}function ro(e,t,s){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let n=(i=e,l=Math.max(a,0),i.map((e,t)=>i[(l+t)%i.length]));var i,l;1===r.length&&(n=n.filter(e=>e!==s));const o=n.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return o!==s?o:void 0}to.displayName="BubbleSelect";var ao=gl,no=wl,io=jl,lo=Nl,oo=Pl,co=Ll,mo=Wl,uo=Vl,ho=Hl,po=Gl,fo=Yl,xo=Zl;const go=fl,vo=yl,yo=de.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(ao,{ref:a,className:jt("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(no,{asChild:!0,children:e.jsx(Tr,{className:"h-4 w-4 opacity-50"})})]}));yo.displayName=ao.displayName;const wo=de.forwardRef(({className:t,...s},r)=>e.jsx(po,{ref:r,className:jt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Fr,{})}));wo.displayName=po.displayName;const jo=de.forwardRef(({className:t,...s},r)=>e.jsx(fo,{ref:r,className:jt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Pr,{})}));jo.displayName=fo.displayName;const bo=de.forwardRef(({className:t,children:s,position:r="popper",...a},n)=>e.jsx(io,{children:e.jsxs(lo,{ref:n,className:jt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...a,children:[e.jsx(wo,{}),e.jsx(oo,{className:jt("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(jo,{})]})}));bo.displayName=lo.displayName;de.forwardRef(({className:t,...s},r)=>e.jsx(co,{ref:r,className:jt("px-2 py-1.5 text-sm font-semibold",t),...s})).displayName=co.displayName;const No=de.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(mo,{ref:a,className:jt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ho,{children:e.jsx(Ir,{className:"h-4 w-4"})})}),e.jsx(uo,{children:s})]}));No.displayName=mo.displayName;function ko({wallets:t,onClose:s}){const[r,a]=de.useState([]),[n,i]=de.useState(!1),[l,o]=de.useState(null),[c,d]=de.useState(""),{toast:m}=ar();de.useEffect(()=>{u()},[]);const u=()=>{const e=JSON.parse(localStorage.getItem("connectedDApps")||"[]"),t=e.reduce((e,t)=>{const s=e.findIndex(e=>e.origin===t.origin);return s>=0?t.connectedAt>e[s].connectedAt&&(e[s]=t):e.push(t),e},[]);t.length!==e.length&&localStorage.setItem("connectedDApps",JSON.stringify(t)),a(t)},h=e=>{localStorage.setItem("connectedDApps",JSON.stringify(e)),a(e)},p=e=>`${e.slice(0,8)}...${e.slice(-6)}`,f=t=>{switch(t){case"view_address":case"view_balance":return e.jsx(us,{className:"h-3 w-3"});case"call_methods":return e.jsx(As,{className:"h-3 w-3"});default:return e.jsx(Rs,{className:"h-3 w-3"})}},x=e=>{const s=t.findIndex(t=>t.address===e);return s>=0?`Account ${s+1}`:"Unknown Wallet"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(bt,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5"}),"Connected dApps",r.length>0&&e.jsx(zt,{variant:"secondary",className:"ml-2",children:r.length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Lt,{variant:"outline",size:"sm",onClick:u,children:[e.jsx(Es,{className:"h-4 w-4 mr-2"}),"Refresh"]}),r.length>0&&e.jsxs(Ba,{children:[e.jsx(La,{asChild:!0,children:e.jsxs(Lt,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:[e.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Disconnect All"]})}),e.jsxs(Da,{children:[e.jsxs(Wa,{children:[e.jsx(Va,{children:"Disconnect All dApps"}),e.jsx(Ka,{children:"Are you sure you want to disconnect all connected dApps? This action cannot be undone and you'll need to reconnect each dApp manually."})]}),e.jsxs($a,{children:[e.jsx(qa,{children:"Cancel"}),e.jsx(Ha,{onClick:()=>{h([]),m({title:"All dApps Disconnected",description:"All connected dApps have been disconnected"})},className:"bg-red-600 hover:bg-red-700",children:"Disconnect All"})]})]})]})]})]}),e.jsx(Ct,{children:0===r.length?e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(fs,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:"No connected dApps found. When you connect to a dApp, it will appear here for management."})]})}):e.jsx("div",{className:"space-y-4",children:r.map(s=>{return t.find(e=>e.address===s.selectedAddress),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx(on,{className:"h-12 w-12",children:e.jsx(dn,{className:"bg-primary text-primary-foreground",children:s.appName.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium truncate text-sm sm:text-base",children:s.appName}),e.jsx(zt,{variant:"outline",className:"text-xs",children:"Connected"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate mb-2",children:s.origin}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Bs,{className:"h-3 w-3"}),e.jsx("span",{children:x(s.selectedAddress)})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:["Connected: ",(a=s.connectedAt,new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 sm:mt-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Permissions:"}),e.jsx("div",{className:"flex items-center gap-1",children:s.permissions.map((t,s)=>e.jsx("div",{className:"flex items-center gap-1",children:f(t)},s))})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>window.open(s.origin,"_blank"),title:"Visit dApp",className:"h-8 w-8 p-0 sm:h-9 sm:w-9",children:e.jsx(ds,{className:"h-4 w-4"})}),e.jsxs(Zr,{children:[e.jsx(Qr,{asChild:!0,children:e.jsx(Lt,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 sm:h-9 sm:w-9",children:e.jsx(cs,{className:"h-4 w-4"})})}),e.jsxs(ea,{align:"end",children:[e.jsxs(ta,{onClick:()=>(e=>{o(e),d(e.selectedAddress),i(!0)})(s),children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Change Wallet"]}),e.jsxs(ta,{onClick:()=>(e=>{const t=r.filter(t=>t.origin!==e.origin);h(t),m({title:"dApp Disconnected",description:`${e.appName} has been disconnected from your wallet`})})(s),className:"text-red-600",children:[e.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Disconnect"]})]})]})]})]},s.origin);var a})})})]}),e.jsx(Vr,{open:n,onOpenChange:i,children:e.jsxs(Gr,{className:"sm:max-w-md mx-4 max-w-[calc(100vw-2rem)]",children:[e.jsx(Jr,{children:e.jsx(Yr,{children:"Change Connected Wallet"})}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[e.jsx(on,{className:"h-10 w-10",children:e.jsx(dn,{className:"bg-primary text-primary-foreground",children:l.appName.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:l.appName}),e.jsx("div",{className:"text-sm text-muted-foreground truncate",children:l.origin})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Wallet"}),e.jsxs(go,{value:c,onValueChange:d,children:[e.jsx(yo,{children:e.jsx(vo,{placeholder:"Choose a wallet"})}),e.jsx(bo,{children:t.map((t,s)=>e.jsx(No,{value:t.address,children:e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs("span",{children:["Account ",s+1]}),e.jsx("span",{className:"text-muted-foreground font-mono text-xs truncate",children:p(t.address)})]})},t.address))})]})]}),e.jsxs(Ft,{children:[e.jsx(Rs,{className:"h-4 w-4"}),e.jsx(Mt,{children:"Changing the connected wallet will update which account this dApp can access. The dApp will use the new wallet for all future interactions."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(Lt,{variant:"outline",onClick:()=>i(!1),className:"flex-1 order-2 sm:order-1",children:"Cancel"}),e.jsx(Lt,{onClick:()=>{if(!l||!c)return;const e=t.find(e=>e.address===c);if(!e)return;const s=r.map(t=>t.origin===l.origin?{...t,selectedAddress:e.address}:t);h(s),i(!1),o(null),d(""),m({title:"Wallet Changed",description:`${l.appName} is now connected to ${p(e.address)}`})},disabled:!c||c===l.selectedAddress,className:"flex-1 order-1 sm:order-2",children:"Change Wallet"})]})]})]})})]})}function Co({wallet:t,wallets:s,onDisconnect:r,onSwitchWallet:a,onAddWallet:n,onRemoveWallet:i}){const[l,o]=de.useState("overview"),[c,d]=de.useState(null),[m,u]=de.useState([]),[h,p]=de.useState(!0),[f,x]=de.useState(!0),[g,v]=de.useState(0);de.useState(!1);const[y,w]=de.useState(!1),[j,b]=de.useState(!1),[N,k]=de.useState(!1),[C,S]=de.useState("import"),[E,A]=de.useState(null),[T,R]=de.useState(!1),[I,O]=de.useState(!1),[P,_]=de.useState(!1),[F,M]=de.useState(null),{toast:B}=ar();de.useEffect(()=>{(async()=>{if(t){try{p(!0);const e=await ii(t.address);d(e.balance),v(e.nonce)}catch(e){console.error("Failed to fetch balance:",e),d(0),v(0)}finally{p(!1)}try{x(!0);const e=await ui(t.address);if(Array.isArray(e)){const s=e.map(e=>{var s;return{...e,type:(null==(s=e.from)?void 0:s.toLowerCase())===t.address.toLowerCase()?"sent":"received"}});u(s)}}catch(e){console.error("Failed to fetch transaction history:",e),u([])}finally{x(!1)}}})()},[t,B]);const L=async(e,t)=>{try{await navigator.clipboard.writeText(e),B({title:"Copied!",description:`${t} copied to clipboard`})}catch(s){B({title:"Error",description:"Copy failed",variant:"destructive"})}},U=()=>{localStorage.setItem("isWalletLocked","true"),setTimeout(()=>{window.dispatchEvent(new StorageEvent("storage",{key:"isWalletLocked",oldValue:"false",newValue:"true",storageArea:localStorage}))},50),r(),R(!1)},z=e=>{n(e),w(!1);const t=JSON.parse(localStorage.getItem("wallets")||"[]");if(!t.some(t=>t.address===e.address)){const s=[...t,e];localStorage.setItem("wallets",JSON.stringify(s)),localStorage.setItem("activeWalletId",e.address)}B({title:"Wallet Added",description:"New wallet has been added successfully"})},D=e=>{n(e),w(!1);const t=JSON.parse(localStorage.getItem("wallets")||"[]");if(!t.some(t=>t.address===e.address)){const s=[...t,e];localStorage.setItem("wallets",JSON.stringify(s)),localStorage.setItem("activeWalletId",e.address)}B({title:"Wallet Generated",description:"New wallet has been generated and added successfully"})},W=async e=>{d(e);try{const e=await ii(t.address);v(e.nonce)}catch(s){console.error("Failed to refresh nonce:",s)}},$=e=>{v(e)},V=async()=>{setTimeout(async()=>{try{const e=await ii(t.address);d(e.balance),v(e.nonce);const s=await ui(t.address);if(Array.isArray(s)){const e=s.map(e=>{var s;return{...e,type:(null==(s=e.from)?void 0:s.toLowerCase())===t.address.toLowerCase()?"sent":"received"}});u(e)}}catch(e){console.error("Failed to refresh data after transaction:",e)}},2e3)},K=e=>`${e.slice(0,8)}...${e.slice(-6)}`;return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("header",{className:"octra-header sticky top-0 z-50",children:e.jsx("div",{className:"octra-container",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(on,{className:"h-10 w-10",children:e.jsx(dn,{className:"bg-primary/10 text-primary border border-primary/20",children:e.jsx(Ls,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Octra Wallet"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Zr,{children:[e.jsx(Qr,{asChild:!0,children:e.jsx(Lt,{variant:"ghost",className:"h-auto p-0 hover:bg-transparent",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:K(t.address)}),e.jsx(ts,{className:"h-3 w-3 text-muted-foreground"})]})})}),e.jsxs(ea,{align:"start",className:"w-80 max-h-[70vh] p-0",children:[e.jsxs("div",{className:"px-2 pt-1.5 pb-1 text-sm font-medium text-center w-full",children:["Select Wallet ( ",s.length," )"]}),e.jsx(sa,{}),e.jsx(Yn,{className:"pr-2 mr-2",children:e.jsx("div",{style:{minHeight:"8vh",maxHeight:"40vh"},className:"p-2",children:s.map((r,n)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-sm hover:bg-accent hover:text-accent-foreground cursor-pointer group",onClick:()=>a(r),children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-mono text-sm truncate",children:["#",n+1," ",K(r.address)]}),r.address===t.address&&e.jsx(es,{className:"h-4 w-4 text-green-500 flex-shrink-0"})]}),r.mnemonic&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Generated wallet"})]}),e.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(Lt,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),L(r.address,"Address")},className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",title:"Copy address",children:e.jsx(ls,{className:"h-3 w-3"})}),s.length>1&&e.jsx(Lt,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),A(r)},className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",title:"Remove wallet",children:e.jsx(Ps,{className:"h-3 w-3"})})]})]},r.address))})}),e.jsx(sa,{}),e.jsxs("div",{onClick:()=>w(!0),className:"flex items-center justify-center space-x-2 p-3 cursor-pointer hover:bg-accent hover:text-accent-foreground rounded-sm mx-1 mb-1",children:[e.jsx(Ss,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Wallet"})]})]})]}),e.jsx(Lt,{variant:"ghost",size:"sm",onClick:()=>L(t.address,"Address"),className:"h-6 w-6 p-0",children:e.jsx(ls,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(zt,{variant:"secondary",className:"hidden sm:inline-flex relative pl-4",children:[e.jsx("span",{className:"absolute left-1 top-1/2 -translate-y-1/2 w-2 h-2 bg-green-500 rounded-full"}),"Connected"]}),e.jsxs(zt,{variant:"outline",className:"hidden sm:inline-flex text-xs",children:["Nonce: ",g]}),e.jsxs(zt,{variant:"outline",className:"hidden sm:inline-flex text-xs",children:[s.length," Wallet",1!==s.length?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(el,{}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsxs(Lt,{variant:"outline",size:"sm",onClick:()=>b(!0),className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-4 w-4"}),"RPC"]}),e.jsxs(Lt,{variant:"outline",size:"sm",onClick:()=>k(!0),className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"dApps"]}),e.jsxs(Vr,{open:y,onOpenChange:w,children:[e.jsx(Kr,{asChild:!0,children:e.jsxs(Lt,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4"}),"Add Wallet"]})}),e.jsxs(Gr,{className:"sm:max-w-lg max-h-[90vh] overflow-hidden",children:[e.jsxs(Jr,{children:[e.jsx(Yr,{children:"Add New Wallet"}),e.jsx(Xr,{children:"Import an existing wallet using private key or mnemonic phrase, or generate a new wallet."})]}),e.jsx("div",{className:"flex flex-col max-h-[calc(90vh-120px)]",children:e.jsxs(St,{value:C,onValueChange:S,className:"w-full flex flex-col",children:[e.jsxs(Et,{className:"grid w-full grid-cols-2 flex-shrink-0",children:[e.jsxs(At,{value:"import",className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-4 w-4"}),"Import"]}),e.jsxs(At,{value:"generate",className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4"}),"Generate"]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(Yn,{className:"h-full max-h-[calc(90vh-180px)]",children:e.jsxs("div",{className:"pr-4",children:[e.jsx(Tt,{value:"import",className:"mt-4 data-[state=inactive]:hidden",children:e.jsx(ur,{onWalletImported:z})}),e.jsx(Tt,{value:"generate",className:"mt-4 data-[state=inactive]:hidden",children:e.jsx(nr,{onWalletGenerated:D})})]})})})]})})]})]}),e.jsxs(Ba,{open:T,onOpenChange:R,children:[e.jsx(La,{asChild:!0,children:e.jsxs(Lt,{variant:"outline",size:"sm",className:"text-orange-600 hover:text-orange-700 dark:text-orange-400 dark:hover:text-orange-300 flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Lock Wallet"]})}),e.jsxs(Da,{children:[e.jsxs(Wa,{children:[e.jsx(Va,{children:"Lock Wallet"}),e.jsx(Ka,{children:"Are you sure you want to lock your wallet? You will need to enter your password to unlock it again."})]}),e.jsxs($a,{children:[e.jsx(qa,{children:"Cancel"}),e.jsx(Ha,{onClick:U,className:"bg-orange-600 hover:bg-orange-700",children:"Lock Wallet"})]})]})]})]}),e.jsx("div",{className:"md:hidden",children:e.jsxs(ra,{open:I,onOpenChange:O,children:[e.jsx(aa,{asChild:!0,children:e.jsx(Lt,{variant:"outline",size:"sm",children:e.jsx(bs,{className:"h-4 w-4"})})}),e.jsxs(oa,{side:"right",className:"w-80",children:[e.jsx(ca,{children:e.jsx(da,{children:"Additional Menu"})}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs(Lt,{variant:"outline",onClick:()=>{b(!0),O(!1)},className:"w-full justify-start gap-2",children:[e.jsx(Us,{className:"h-4 w-4"}),"RPC Provider"]}),e.jsxs(Lt,{variant:"outline",onClick:()=>{k(!0),O(!1)},className:"w-full justify-start gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Connected dApps"]}),e.jsxs(Lt,{variant:"outline",onClick:()=>{w(!0),O(!1)},className:"w-full justify-start gap-2",children:[e.jsx(Ss,{className:"h-4 w-4"}),"Add Wallet"]}),e.jsxs(Lt,{variant:"outline",onClick:()=>{R(!0),O(!1)},className:"w-full justify-start gap-2 text-orange-600 hover:text-orange-700 dark:text-orange-400 dark:hover:text-orange-300",children:[e.jsx(js,{className:"h-4 w-4"}),"Lock Wallet"]})]})]})]})}),e.jsx(Ba,{open:!!E,onOpenChange:e=>!e&&A(null),children:e.jsxs(Da,{children:[e.jsxs(Wa,{children:[e.jsx(Va,{children:"Remove Wallet"}),e.jsxs(Ka,{children:["Are you sure you want to remove wallet"," ",e.jsx("span",{className:"font-mono",children:E?K(E.address):""}),"? This action cannot be undone.",(null==E?void 0:E.address)===t.address&&e.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 dark:bg-yellow-950/50 rounded text-sm",children:[e.jsx("strong",{children:"Note:"})," This is your currently active wallet. The first remaining wallet will become active."]})]})]}),e.jsxs($a,{children:[e.jsx(qa,{onClick:()=>A(null),children:"Cancel"}),e.jsx(Ha,{onClick:()=>{if(!E)return;if(1===s.length)return B({title:"Cannot Remove",description:"You cannot remove the last wallet. Use disconnect instead.",variant:"destructive"}),void A(null);const e=s.filter(e=>e.address!==E.address);if(E.address===t.address&&e.length>0){const t=e[0];localStorage.setItem("activeWalletId",t.address),localStorage.setItem("wallets",JSON.stringify(e)),a(t),setTimeout(()=>{i(E)},100)}else i(E);const r=JSON.parse(localStorage.getItem("encryptedWallets")||"[]").filter(e=>e.address!==E.address);localStorage.setItem("encryptedWallets",JSON.stringify(r)),setTimeout(()=>{B({title:"Wallet Removed",description:"Wallet has been removed successfully"}),A(null)},150)},className:"bg-red-600 hover:bg-red-700",children:"Remove Wallet"})]})]})}),e.jsx(Vr,{open:y,onOpenChange:w,children:e.jsxs(Gr,{className:"sm:max-w-lg max-h-[90vh] overflow-hidden",children:[e.jsxs(Jr,{children:[e.jsx(Yr,{children:"Add New Wallet"}),e.jsx(Xr,{children:"Import an existing wallet using private key or mnemonic phrase, or generate a new wallet."})]}),e.jsx("div",{className:"flex flex-col max-h-[calc(90vh-120px)]",children:e.jsxs(St,{value:C,onValueChange:S,className:"w-full flex flex-col",children:[e.jsxs(Et,{className:"grid w-full grid-cols-2 flex-shrink-0",children:[e.jsxs(At,{value:"import",className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-4 w-4"}),"Import"]}),e.jsxs(At,{value:"generate",className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4"}),"Generate"]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(Yn,{className:"h-full max-h-[calc(90vh-180px)]",children:e.jsxs("div",{className:"pr-4",children:[e.jsx(Tt,{value:"import",className:"mt-4 data-[state=inactive]:hidden",children:e.jsx(ur,{onWalletImported:z})}),e.jsx(Tt,{value:"generate",className:"mt-4 data-[state=inactive]:hidden",children:e.jsx(nr,{onWalletGenerated:D})})]})})})]})})]})}),e.jsx(Vr,{open:j,onOpenChange:b,children:e.jsxs(Gr,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Jr,{children:[e.jsx(Yr,{children:"RPC Provider Management"}),e.jsx(Xr,{children:"Manage your RPC providers to connect to different blockchain networks."})]}),e.jsx(tl,{onClose:()=>b(!1),onRPCChange:()=>{b(!1),(async()=>{if(t){_(!0);try{const r=await ii(t.address);d(r.balance),v(r.nonce);try{const e=await li(t.address,t.privateKey);M(e||{public:r.balance,public_raw:Math.floor(1e6*r.balance),encrypted:0,encrypted_raw:0,total:r.balance})}catch(e){console.error("Failed to fetch encrypted balance during refresh:",e),M({public:r.balance,public_raw:Math.floor(1e6*r.balance),encrypted:0,encrypted_raw:0,total:r.balance})}try{const e=await ui(t.address);if(Array.isArray(e)){const s=e.map(e=>{var s;return{...e,type:(null==(s=e.from)?void 0:s.toLowerCase())===t.address.toLowerCase()?"sent":"received"}});u(s)}else u([])}catch(s){console.error("Failed to fetch transaction history:",s),u([])}B({title:"Data Refreshed",description:"Wallet data has been updated with new RPC provider"})}catch(r){console.error("Failed to refresh wallet data:",r),B({title:"Refresh Failed",description:"Failed to refresh data with new RPC provider",variant:"destructive"})}finally{_(!1)}}})()}})]})}),e.jsx(Vr,{open:N,onOpenChange:k,children:e.jsxs(Gr,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Jr,{children:[e.jsx(Yr,{children:"Connected dApps Management"}),e.jsx(Xr,{children:"View and manage applications that have been granted access to your wallet."})]}),e.jsx(ko,{wallets:s,onClose:()=>k(!1)})]})}),e.jsx(Ba,{open:T,onOpenChange:R,children:e.jsxs(Da,{children:[e.jsxs(Wa,{children:[e.jsx(Va,{children:"Lock Wallet"}),e.jsx(Ka,{children:"Are you sure you want to lock your wallet? You will need to enter your password to unlock it again."})]}),e.jsxs($a,{children:[e.jsx(qa,{children:"Cancel"}),e.jsx(Ha,{onClick:U,className:"bg-orange-600 hover:bg-orange-700",children:"Lock Wallet"})]})]})})]})]})})}),e.jsx("main",{className:"octra-container py-8",children:e.jsxs(St,{value:l,onValueChange:o,className:"space-y-6",children:[e.jsxs(Et,{className:"grid w-full grid-cols-5",children:[e.jsxs(At,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Overview"}),P&&e.jsx("div",{className:"animate-spin h-3 w-3 border border-primary border-t-transparent rounded-full ml-1"})]}),e.jsxs(At,{value:"send",className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Send"})]}),e.jsxs(At,{value:"private",className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Private"})]}),e.jsxs(At,{value:"claim",className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Claim"})]}),e.jsxs(At,{value:"history",className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"History"})]})]}),e.jsx(Tt,{value:"overview",className:"space-y-6",children:e.jsx(xi,{wallet:t,balance:c,encryptedBalance:F,onEncryptedBalanceUpdate:M,onBalanceUpdate:W,isLoading:h||P})}),e.jsx(Tt,{value:"send",children:e.jsxs(St,{defaultValue:"single",className:"w-full",children:[e.jsxs(Et,{className:"grid w-full grid-cols-3",children:[e.jsx(At,{value:"single",children:"Single Send"}),e.jsx(At,{value:"multi",children:"Multi Send"}),e.jsx(At,{value:"file",children:"File Multi Send"})]}),e.jsx(Tt,{value:"single",className:"mt-6",children:e.jsx(wi,{wallet:t,balance:c,nonce:g,onBalanceUpdate:W,onNonceUpdate:$,onTransactionSuccess:V})}),e.jsx(Tt,{value:"multi",className:"mt-6",children:e.jsx(yi,{wallet:t,balance:c,nonce:g,onBalanceUpdate:W,onNonceUpdate:$,onTransactionSuccess:V})}),e.jsx(Tt,{value:"file",className:"mt-6",children:e.jsx(Yi,{wallet:t,balance:c,nonce:g,onBalanceUpdate:W,onNonceUpdate:$,onTransactionSuccess:V})})]})}),e.jsx(Tt,{value:"private",children:e.jsx(ji,{wallet:t,onTransactionSuccess:V})}),e.jsx(Tt,{value:"claim",children:e.jsx(bi,{wallet:t,onTransactionSuccess:V})}),e.jsx(Tt,{value:"history",children:e.jsx(Xi,{wallet:t,transactions:m,onTransactionsUpdate:e=>{u(e)},isLoading:f})})]})})]})}function So({onUnlock:t}){const[s,r]=de.useState(""),[a,n]=de.useState(!1),[i,l]=de.useState(!1),{toast:o}=ar(),c=async()=>{if(s){l(!0);try{const a=localStorage.getItem("walletPasswordHash"),n=localStorage.getItem("walletPasswordSalt");if(!a||!n)throw new Error("No password set");if(!(await zr(s,a,n)))return void o({title:"Invalid Password",description:"The password you entered is incorrect",variant:"destructive"});const i=JSON.parse(localStorage.getItem("encryptedWallets")||"[]"),l=[];for(const t of i)try{let r;try{const e=await Dr(t.encryptedData,s);r=JSON.parse(e)}catch(e){console.warn("Decryption failed, trying plain JSON:",t.address),r=JSON.parse(t.encryptedData)}l.push(r)}catch(r){console.error("Failed to decrypt wallet:",t.address,r)}const c=JSON.parse(localStorage.getItem("wallets")||"[]");for(const e of c){l.some(t=>t.address===e.address)||l.push(e)}localStorage.setItem("isWalletLocked","false"),localStorage.setItem("wallets",JSON.stringify(l));!localStorage.getItem("activeWalletId")&&l.length>0&&localStorage.setItem("activeWalletId",l[0].address),setTimeout(()=>{window.dispatchEvent(new StorageEvent("storage",{key:"wallets",oldValue:null,newValue:JSON.stringify(l),storageArea:localStorage})),window.dispatchEvent(new StorageEvent("storage",{key:"isWalletLocked",oldValue:"true",newValue:"false",storageArea:localStorage}))},50),o({title:"Wallet Unlocked!",description:"Welcome back to your wallet"}),t(l)}catch(r){console.error("Unlock error:",r),o({title:"Unlock Failed",description:"Failed to unlock wallet",variant:"destructive"})}finally{l(!1)}}else o({title:"Password Required",description:"Please enter your password",variant:"destructive"})};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(bt,{children:[e.jsxs(Nt,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-primary rounded-full",children:e.jsx(Rs,{className:"h-8 w-8 text-primary-foreground"})})}),e.jsx(kt,{className:"text-2xl",children:"Unlock Your Wallet"}),e.jsx("p",{className:"text-muted-foreground",children:"Enter your password to access your wallet"})]}),e.jsxs(Ct,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(mr,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ir,{id:"password",type:a?"text":"password",placeholder:"Enter your password",value:s,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"===e.key&&c()},className:"pr-10",disabled:i}),e.jsx(Lt,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>n(!a),disabled:i,children:a?e.jsx(ms,{className:"h-4 w-4"}):e.jsx(us,{className:"h-4 w-4"})})]})]}),e.jsx(Lt,{onClick:c,disabled:i||!s,className:"w-full",size:"lg",children:i?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4 mr-2 animate-spin"}),"Unlocking..."]}):"Unlock Wallet"})]})]})})})}function Eo({connectionRequest:t,wallets:s,selectedWallet:r,onWalletSelect:a,onApprove:n,onReject:i}){var l;const[o,c]=de.useState(!1),[d,m]=de.useState(null),{toast:u}=ar();de.useEffect(()=>{const e=JSON.parse(localStorage.getItem("connectedDApps")||"[]").find(e=>e.origin===t.origin);m(e)},[t.origin]);const h=e=>`${e.slice(0,8)}...${e.slice(-6)}`,p=t=>{switch(t){case"view_address":case"view_balance":return e.jsx(us,{className:"h-4 w-4"});case"call_methods":return e.jsx(As,{className:"h-4 w-4"});default:return console.warn(`Unknown permission: ${t}`),e.jsx(Rs,{className:"h-4 w-4"})}},f=e=>{switch(e){case"view_address":return"View the address of your permitted account";case"view_balance":return"View the balance of your permitted account";case"call_methods":return"Call methods on the smart contract on behalf of your permitted account";default:return e}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(bt,{children:[e.jsxs(Nt,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:t.appIcon?e.jsxs(on,{className:"h-16 w-16",children:[e.jsx(cn,{src:t.appIcon}),e.jsx(dn,{children:(null==(l=t.appName)?void 0:l.charAt(0))||"A"})]}):e.jsx("div",{className:"h-16 w-16 bg-primary rounded-full flex items-center justify-center",children:e.jsx(ds,{className:"h-8 w-8 text-primary-foreground"})})}),e.jsx(kt,{className:"text-xl",children:d?`Update connection for ${t.appName||"Unknown App"}`:`${t.appName||"Unknown App"} wants to connect`}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.origin}),d&&e.jsx("div",{className:"mt-2",children:e.jsxs(zt,{variant:"secondary",className:"text-xs",children:["Previously connected to ",h(d.selectedAddress)]})})]}),e.jsxs(Ct,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium",children:"Select Account"}),e.jsx(Yn,{className:"pr-2 pb-2 rounded-md border",children:e.jsx("div",{style:{minHeight:"8vh",maxHeight:"15vh"},className:"p-2 space-y-2",children:s.map((t,s)=>e.jsx("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors "+((null==r?void 0:r.address)===t.address?"border-primary bg-primary/5":"hover:bg-muted/50"),onClick:()=>a(t),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Account ",s+1]}),e.jsx("div",{className:"text-sm text-muted-foreground font-mono",children:h(t.address)})]}),(null==r?void 0:r.address)===t.address&&e.jsx(es,{className:"h-5 w-5 text-primary"})]})},t.address))})})]}),e.jsx(Kt,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium",children:"This app will be able to:"}),e.jsxs("div",{className:"space-y-2",children:[t.permissions.map((t,s)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:p(t)}),e.jsx("span",{className:"text-sm",children:f(t)})]},s)),e.jsxs("div",{className:"flex items-start gap-3 text-muted-foreground",children:[e.jsx(zs,{className:"h-4 w-4 mt-0.5"}),e.jsx("span",{className:"text-sm",children:"This does not allow the app to transfer tokens"})]})]})]}),e.jsx(Ft,{children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Rs,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx(Mt,{children:d?"Updating this connection will change which wallet this dApp can access.":"Only connect to websites you trust. This connection will allow the app to view your account information and request transactions."})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Lt,{variant:"outline",onClick:()=>{c(!0),i()},disabled:o,className:"flex-1",children:"Cancel"}),e.jsx(Lt,{onClick:async()=>{if(r){c(!0);try{const e=JSON.parse(localStorage.getItem("connectedDApps")||"[]").filter(e=>e.origin!==t.origin),s={origin:t.origin,appName:t.appName||t.origin,connectedAt:Date.now(),permissions:t.permissions,selectedAddress:r.address};e.push(s),localStorage.setItem("connectedDApps",JSON.stringify(e)),u({title:d?"Connection Updated":"Connection Approved",description:`${t.appName||"dApp"} is now connected to ${r.address.slice(0,8)}...${r.address.slice(-6)}`}),n(r)}catch(e){console.error("Connection approval error:",e),u({title:"Connection Failed",description:"Failed to approve connection",variant:"destructive"}),c(!1)}}else u({title:"No Wallet Selected",description:"Please select a wallet to connect",variant:"destructive"})},disabled:o||!r,className:"flex-1",children:o?"Connecting...":d?"Update Connection":"Connect"})]})]})]})})})}function Ao({transactionRequest:t,wallets:s,selectedWallet:r,connectedWallet:a,onWalletSelect:n,onApprove:i,onReject:l}){var o;const[c,d]=de.useState(!1),[m,u]=de.useState(null),[h,p]=de.useState(0),[f,x]=de.useState(!1),[g,v]=de.useState(null),[y,w]=de.useState(!1),{toast:j}=ar();de.useEffect(()=>{(async()=>{if(!t.to)return;const e=gi(t.to);if(e.isValid)if("address"!==e.type){if("ons"===e.type){w(!0);try{const e=await vi(t.to);v(e.address||t.to)}catch(s){v(t.to)}finally{w(!1)}}}else v(t.to);else v(t.to)})()},[t.to]),de.useEffect(()=>{r&&(x(!0),ii(r.address).then(e=>{u(e.balance),p(e.nonce)}).catch(e=>{console.error("Failed to fetch balance:",e),j({title:"Error",description:"Failed to fetch wallet balance",variant:"destructive"})}).finally(()=>x(!1)))},[r,j]);const b=e=>e<1e3?.001:.003,N=e=>`${e.slice(0,8)}...${e.slice(-6)}`,k=parseFloat(t.amount),C=b(k),S=k+C,E=m||0;return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(bt,{children:[e.jsxs(Nt,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:t.appIcon?e.jsxs(on,{className:"h-16 w-16",children:[e.jsx(cn,{src:t.appIcon}),e.jsx(dn,{children:(null==(o=t.appName)?void 0:o.charAt(0))||"A"})]}):e.jsx("div",{className:"h-16 w-16 bg-primary rounded-full flex items-center justify-center",children:e.jsx(As,{className:"h-8 w-8 text-primary-foreground"})})}),e.jsxs(kt,{className:"text-xl",children:[t.appName||"Unknown App"," wants to send a transaction"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.origin})]}),e.jsxs(Ct,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium",children:"Transaction Details"}),e.jsxs("div",{className:"space-y-2 p-3 bg-muted rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"To:"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-mono text-sm",children:N(t.to)}),g&&g!==t.to&&e.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:[" ",N(g)]}),y&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"Resolving..."})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Amount:"}),e.jsxs("span",{className:"font-mono font-bold",children:[k.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Fee:"}),e.jsxs("span",{className:"font-mono text-sm",children:[C.toFixed(8)," OCT"]})]}),e.jsx(Kt,{}),e.jsxs("div",{className:"flex justify-between items-center font-medium",children:[e.jsx("span",{className:"text-sm",children:"Total Cost:"}),e.jsxs("span",{className:"font-mono",children:[S.toFixed(8)," OCT"]})]}),t.message&&e.jsxs(e.Fragment,{children:[e.jsx(Kt,{}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Message:"})]}),e.jsx("div",{className:"p-2 bg-background rounded text-sm break-all",children:t.message})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium",children:a?"Connected Account":"Select Account"}),a&&e.jsxs(Ft,{children:[e.jsx(Rs,{className:"h-4 w-4"}),e.jsx(Mt,{children:"This dApp is connected to your wallet. Using the previously selected account."})]}),e.jsx("div",{className:"max-h-[150px] w-full overflow-y-auto rounded-md border",children:e.jsx("div",{className:"p-2 space-y-2",children:a?e.jsx("div",{className:"p-3 border border-primary bg-primary/5 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Connected Account"}),e.jsx("div",{className:"text-sm text-muted-foreground font-mono",children:N(a.address)}),null!==m&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Balance: ",m.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5 text-primary"}),f&&e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"})]})]})}):s.map((t,s)=>e.jsx("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors "+((null==r?void 0:r.address)===t.address?"border-primary bg-primary/5":"hover:bg-muted/50"),onClick:()=>n(t),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Account ",s+1]}),e.jsx("div",{className:"text-sm text-muted-foreground font-mono",children:N(t.address)}),(null==r?void 0:r.address)===t.address&&null!==m&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Balance: ",m.toFixed(8)," OCT"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:(null==r?void 0:r.address)===t.address&&e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"h-5 w-5 text-primary"}),f&&e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"})]})})]})},t.address))})})]}),r&&null!==m&&e.jsxs("div",{className:"p-3 bg-muted rounded-md space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(Zt,{className:"h-4 w-4"}),"Balance Check"]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Current Balance:"}),e.jsxs("span",{className:"font-mono",children:[E.toFixed(8)," OCT"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"After Transaction:"}),e.jsxs("span",{className:"font-mono "+(E-S>=0?"text-green-600":"text-red-600"),children:[(E-S).toFixed(8)," OCT"]})]}),S>E&&e.jsx("div",{className:"text-red-600 text-xs mt-2",children:" Insufficient balance for this transaction"})]})]}),e.jsxs(Ft,{children:[e.jsx(Rs,{className:"h-4 w-4"}),e.jsx(Mt,{children:"Only approve transactions from websites you trust. This transaction cannot be reversed once confirmed."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Lt,{variant:"outline",onClick:()=>{d(!0),l()},disabled:c,className:"flex-1",children:"Reject"}),e.jsx(Lt,{onClick:async()=>{if(!r)return void j({title:"No Wallet Selected",description:"Please select a wallet to send the transaction",variant:"destructive"});if(null===m)return void j({title:"Balance Unknown",description:"Unable to verify wallet balance",variant:"destructive"});const e=parseFloat(t.amount),s=b(e),a=e+s;if(a>m)j({title:"Insufficient Balance",description:`Need ${a.toFixed(8)} OCT (${e.toFixed(8)} + ${s.toFixed(8)} fee), but only have ${m.toFixed(8)} OCT`,variant:"destructive"});else{d(!0);try{const s=(await ii(r.address)).nonce,a=mi(r.address,g||t.to,e,s+1,r.privateKey,r.publicKey||"",t.message||void 0),n=await ri(a);n.success&&n.hash?(j({title:"Transaction Sent!",description:"Transaction has been submitted successfully"}),i(n.hash)):j({title:"Transaction Failed",description:n.error||"Unknown error occurred",variant:"destructive"})}catch(n){console.error("Transaction error:",n),j({title:"Error",description:"Failed to send transaction",variant:"destructive"})}finally{d(!1)}}},disabled:c||!r||null===m||S>E||f||y,className:"flex-1",children:c?"Sending...":"Approve & Send"})]})]})]})})})}de.forwardRef(({className:t,...s},r)=>e.jsx(xo,{ref:r,className:jt("-mx-1 my-1 h-px bg-muted",t),...s})).displayName=xo.displayName;const To=oe,Ro=de.forwardRef(({className:t,...s},r)=>e.jsx(se,{ref:r,className:jt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));Ro.displayName=se.displayName;const Io=Pt("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Oo=de.forwardRef(({className:t,variant:s,...r},a)=>e.jsx(re,{ref:a,className:jt(Io({variant:s}),t),...r}));Oo.displayName=re.displayName;de.forwardRef(({className:t,...s},r)=>e.jsx(ae,{ref:r,className:jt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s})).displayName=ae.displayName;const Po=de.forwardRef(({className:t,...s},r)=>e.jsx(ne,{ref:r,className:jt("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Br,{className:"h-4 w-4"})}));Po.displayName=ne.displayName;const _o=de.forwardRef(({className:t,...s},r)=>e.jsx(ie,{ref:r,className:jt("text-sm font-semibold [&+div]:text-xs",t),...s}));_o.displayName=ie.displayName;const Fo=de.forwardRef(({className:t,...s},r)=>e.jsx(le,{ref:r,className:jt("text-sm opacity-90",t),...s}));function Mo(){const{toasts:t}=ar();return e.jsxs(To,{children:[t.map(function({id:t,title:s,description:r,action:a,...n}){return e.jsxs(Oo,{...n,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(_o,{children:s}),r&&e.jsx(Fo,{children:r})]}),a,e.jsx(Po,{})]},t)}),e.jsx(Ro,{className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px] sm:bottom-4 bottom-4 sm:top-auto top-auto"})]})}function Bo(){const[t,s]=de.useState(null),[r,a]=de.useState([]),[n,i]=de.useState(!1),[l,o]=de.useState(null),[c,d]=de.useState(null),[m,u]=de.useState(null),[h,p]=de.useState(null),[f,x]=de.useState(null);de.useEffect(()=>{const e=e=>{if("isWalletLocked"===e.key){const t="true"===e.newValue;i(t),t?(s(null),a([])):setTimeout(()=>{const e=localStorage.getItem("wallets"),t=localStorage.getItem("activeWalletId");if(e){const r=JSON.parse(e);if(a(r),r.length>0){let e=r[0];if(t){const s=r.find(e=>e.address===t);s&&(e=s)}s(e)}}},100)}if("wallets"===e.key&&!n&&e.newValue){const r=JSON.parse(e.newValue);a(r);const n=localStorage.getItem("activeWalletId");if(n&&r.length>0){const e=r.find(e=>e.address===n);e&&s(e)}else r.length>0&&!t&&s(r[0])}if("activeWalletId"===e.key&&!n){const t=e.newValue,a=r.length>0?r:JSON.parse(localStorage.getItem("wallets")||"[]");if(t&&a.length>0){const e=a.find(e=>e.address===t);e&&s(e)}}};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[n,r,t]),de.useEffect(()=>{const e=new URLSearchParams(window.location.search);if("send"===e.get("action")){const t=e.get("to"),s=e.get("amount"),r=e.get("success_url"),a=e.get("failure_url"),n=e.get("origin"),i=e.get("app_name"),l=e.get("message");t&&s&&r&&a&&n&&u({action:"send",to:decodeURIComponent(t),amount:decodeURIComponent(s),origin:decodeURIComponent(n),successUrl:decodeURIComponent(r),failureUrl:decodeURIComponent(a),appName:i?decodeURIComponent(i):void 0,message:l?decodeURIComponent(l):void 0})}else{const t=e.get("success_url"),s=e.get("failure_url"),r=e.get("origin"),a=e.get("app_name");t&&s&&r&&o({origin:decodeURIComponent(r),successUrl:decodeURIComponent(t),failureUrl:decodeURIComponent(s),permissions:["view_address","view_balance","call_methods"],appName:a?decodeURIComponent(a):void 0})}const t=localStorage.getItem("isWalletLocked");if(localStorage.getItem("walletPasswordHash")&&"false"!==t)return void i(!0);const r=localStorage.getItem("wallets"),n=localStorage.getItem("activeWalletId");if(r){const e=JSON.parse(r);if(a(e),e.length>0){let t=e[0];if(n){const s=e.find(e=>e.address===n);s&&(t=s)}s(t)}}},[]),de.useEffect(()=>{if(m&&r.length>0){const e=JSON.parse(localStorage.getItem("connectedDApps")||"[]").find(e=>e.origin===m.origin);if(e){const t=r.find(t=>t.address===e.selectedAddress);t&&(x(t),p(t))}}},[m,r]),de.useEffect(()=>{if(l&&r.length>0){const e=JSON.parse(localStorage.getItem("connectedDApps")||"[]").find(e=>e.origin===l.origin);if(!c&&r.length>0)if(e){const t=r.find(t=>t.address===e.selectedAddress);d(t||r[0])}else d(r[0])}},[l,r,c]);const g=e=>{if(a(e),i(!1),e.length>0){const t=localStorage.getItem("activeWalletId");let r=e[0];if(t){const s=e.find(e=>e.address===t);s&&(r=s)}s(r)}},v=e=>{if(!l)return;const t=new URL(l.successUrl);t.searchParams.set("account_id",e.address),e.publicKey&&t.searchParams.set("public_key",e.publicKey),o(null),d(null),window.history.replaceState({},document.title,window.location.pathname),window.location.href=t.toString()},y=()=>{l&&(o(null),d(null),window.history.replaceState({},document.title,window.location.pathname),window.location.href=l.failureUrl)},w=e=>{if(!m)return;const t=new URL(m.successUrl);t.searchParams.set("tx_hash",e),window.location.href=t.toString()},j=()=>{m&&(window.location.href=m.failureUrl)},b=e=>{const t=r.find(t=>t.address===e.address);if(t)return s(t),void localStorage.setItem("activeWalletId",t.address);const n=[...r,e];a(n),s(e),localStorage.setItem("wallets",JSON.stringify(n)),localStorage.setItem("activeWalletId",e.address);if(localStorage.getItem("walletPasswordHash")){const t=JSON.parse(localStorage.getItem("encryptedWallets")||"[]");if(!t.some(t=>t.address===e.address)){const s={address:e.address,encryptedData:JSON.stringify(e),createdAt:Date.now()},r=[...t,s];localStorage.setItem("encryptedWallets",JSON.stringify(r))}}};return n?e.jsx(Qi,{defaultTheme:"dark",storageKey:"octra-wallet-theme",children:e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(So,{onUnlock:g}),e.jsx(Mo,{})]})}):m&&r.length>0?e.jsx(Qi,{defaultTheme:"dark",storageKey:"octra-wallet-theme",children:e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ao,{transactionRequest:m,wallets:r,selectedWallet:h,connectedWallet:f,onWalletSelect:p,onApprove:w,onReject:j}),e.jsx(Mo,{})]})}):l&&r.length>0?e.jsx(Qi,{defaultTheme:"dark",storageKey:"octra-wallet-theme",children:e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Eo,{connectionRequest:l,wallets:r,selectedWallet:c,onWalletSelect:d,onApprove:v,onReject:y}),e.jsx(Mo,{})]})}):e.jsx(Qi,{defaultTheme:"dark",storageKey:"octra-wallet-theme",children:e.jsxs("div",{className:"min-h-screen bg-background",children:[t?e.jsx(Co,{wallet:t,wallets:r,onDisconnect:()=>{s(null),a([]),i(!0)},onSwitchWallet:e=>{s(e),localStorage.setItem("activeWalletId",e.address)},onAddWallet:b,onRemoveWallet:e=>{const n=r.filter(t=>t.address!==e.address);a(n),localStorage.setItem("wallets",JSON.stringify(n)),(null==t?void 0:t.address)===e.address&&0===n.length&&(s(null),localStorage.removeItem("activeWalletId"))}}):e.jsx($r,{onWalletCreated:b}),e.jsx(Mo,{})]})})}Fo.displayName=le.displayName,fe(document.getElementById("root")).render(e.jsx(de.StrictMode,{children:e.jsx(Bo,{})}));
